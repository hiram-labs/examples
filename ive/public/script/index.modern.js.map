{"version":3,"file":"index.modern.js","sources":["../src/util/constant.ts","../node_modules/reflect-metadata/Reflect.js","../node_modules/json-object-mapper/dist/ObjectMapper.js","../src/util/vendor.js","../src/view/Base.ts","../src/view/Handle.ts","../src/controller/Host.ts","../src/controller/Manage.ts","../src/util/lib.ts","../src/controller/Collection.ts","../src/model/Config.ts","../src/model/Runner.ts","../src/model/Session.ts","../src/view/Core.ts","../src/view/Loader.ts","../src/view/Control.ts","../src/view/Visual.ts","../src/view/Audio.ts","../src/view/Video.ts","../src/util/misc.ts","../src/view/Engine.ts","../src/index.ts"],"sourcesContent":["enum E {\n  HOST_TYPE_INTERNAL = \"INTERNAL\",\n  HOST_TYPE_EXTERNAL = \"EXTERNAL\",\n\n  ORM_CONFIGS = \"CONFIGS\",\n  ORM_RUNNERS = \"RUNNERS\",\n  ORM_SESSIONS = \"SESSIONS\",\n\n  CC_OFF = \"None\",\n\n  EVENT_ENGINE_READY = \"ive-ready\",\n  EVENT_ENGINE_ATTACH_VIDEO_SRC = \"ive-attach-video-src\",\n  EVENT_ENGINE_ATTACH_AUDIO_SRC = \"ive-attach-audio-src\",\n  EVENT_ENGINE_EXPERIENCE_LOADING = \"ive-experience-loading\",\n  EVENT_ENGINE_TIMEUPDATE = \"ive-time-update\",\n  EVENT_ENGINE_VISUAL_INTERACTION = \"ive-visual-interaction\",\n  EVENT_ENGINE_VISUAL_PRESENTED_TIMEUPDATE = \"ive-visual-presented\",\n\n  RUNNER_TYPE_IMMEDIATE = \"IMMEDIATE\",\n  RUNNER_TYPE_TIMER = \"TIMER\",\n  RUNNER_TYPE_INTERACTION = \"INTERACTION\",\n  RUNNER_STATE_BUSY = \"busy\",\n  RUNNER_STATE_IDLE = \"idle\",\n\n  CSS_VIDEO_ELEMENT = \"ive-video-element\",\n  CSS_AUDIO_ELEMENT = \"ive-audio-element\",\n\n  CSS_ENGINE_CONTAINER = \"ive-engine-container\",\n  CSS_VISUAL_CONTAINER = \"ive-visual-container\",\n  CSS_CONTROL_CONTAINER = \"ive-control-container\",\n  CSS_LOADER_CONTAINER = \"ive-loader-container\",\n\n  CSS_LOADER_VIDEO_LOAD_PROGRESS_GROUP = \"ive-loader-video-load-progress-group\",\n  CSS_LOADER_ENGINE_BUSY_GROUP = \"ive-loader-engine-busy-group\",\n  CSS_LOADER_WELCOME_GROUP = \"ive-loader-welcome-group\",\n  CSS_LOADER_NETWORK_ERROR_GROUP = \"ive-loader-network-error-group\",\n  CSS_LOADER_VIDEO_CAPTION_CONTAINER = \"ive-loader-video-caption-container\",\n  CSS_LOADER_AUDIO_CAPTION_CONTAINER = \"ive-loader-audion-caption-container\",\n  CSS_LOADER_RESUME_PLAY_BTN = \"ive-loader-resume-play-container\",\n\n  CSS_CONTROL_PROGRESS_TIME_GROUP = \"ive-control-progress-time-group\",\n  CSS_CONTROL_PROGRESS_BAR = \"ive-control-progress-bar-group\",\n  CSS_CONTROL_TIME_PER_DURATION = \"ive-control-time-per-duration\",\n  CSS_CONTROL_CTA_GROUP = \"ive-control-cta-group\",\n  CSS_CONTROL_PREVIOUS_BTN = \"ive-control-previous-btn\",\n  CSS_CONTROL_PLAY_PAUSE_BTN = \"ive-control-play-pause-btn\",\n  CSS_CONTROL_NEXT_BTN = \"ive-control-next-btn\",\n  CSS_CONTROL_REWIND_15SEC_BTN = \"ive-control-rewind-15sec-btn\",\n  CSS_CONTROL_FORWARD_15SEC_BTN = \"ive-control-forward-15sec-btn\",\n  CSS_CONTROL_VOLUME_GROUP = \"ive-control-volume-group\",\n  CSS_CONTROL_VOLUME_BTN = \"ive-control-volume-btn\",\n  CSS_CONTROL_VOLUME_RANGE_INPUT = \"ive-control-volume-range\",\n  CSS_CONTROL_CAPTION_BTN = \"ive-control-caption-btn\",\n  CSS_CONTROL_CAPTION_LIST_GROUP = \"ive-control-caption-select\",\n  CSS_CONTROL_PLAYBACK_RATE_BTN = \"ive-control-playback-rate-btn\",\n  CSS_CONTROL_PLAYBACK_RATE_LIST_GROUP = \"ive-control-playback-rate-select\",\n  CSS_CONTROL_FULLSCREEN_BTN = \"ive-control-fullscreen-btn\",\n  CSS_CONTROL_CLOSE_POPUP_BTN = \"ive-control-close-popup-btn\",\n  CSS_CONTROL_POPUP_CONTAINER = \"ive-control-popup-container\",\n\n  CSS_CLS_ICON_PLAY_BG = \"ive-play-btn-bg-img\",\n  CSS_CLS_ICON_PAUSE_BG = \"pause-btn-bg-img\",\n  CSS_CLS_ICON_PREV_BG = \"prev-btn-bg-img\",\n  CSS_CLS_ICON_NEXT_BG = \"next-btn-bg-img\",\n  CSS_CLS_ICON_REWIND_15SEC_BG = \"rewind-15sec-btn-bg-img\",\n  CSS_CLS_ICON_FORWARD_15SEC_BG = \"forward-15sec-btn-bg-img\",\n  CSS_CLS_ICON_VOLUME_BG = \"volume-btn-bg-img\",\n  CSS_CLS_ICON_VOLUME_LOW_BG = \"volume-low-btn-bg-img\",\n  CSS_CLS_ICON_MUTE_BG = \"mute-btn-bg-img\",\n  CSS_CLS_ICON_CAPTION_BG = \"caption-btn-bg-img\",\n  CSS_CLS_ICON_FULLSCREEN_BG = \"fullscreen-btn-bg-img\",\n  CSS_CLS_ICON_OK_BG = \"ok-btn-bg-img\",\n  CSS_CLS_ICON_RELOAD_BG = \"reload-btn-bg-img\",\n  CSS_CLS_ICON_CLOSE_BG = \"close-btn-bg-img\",\n  CSS_CLS_ICON_RESUME_PLAY_BG = \"circle-play-bg-img\",\n\n  CSS_CLS_HIDDEN = \"ive-hidden\",\n  CSS_CLS_INVISIBLE = \"ive-invisible\",\n  CSS_CLS_CHAPTER_LINK = \"ive-chapter-link\",\n  CSS_CLS_VISUAL_SHOWING = \"ive-visual-showing\",\n  CSS_CLS_CONTROL_SHOW = \"ive-control-show\",\n\n  IVE_FONT_LOGO_STYLE = \"font-family: monospace,system-ui,sans-serif; font-weight: bold; color: red; text-shadow: 2px 2px 0 rgb(217,31,38) , 4px 4px 0 rgb(226,91,14) , 6px 6px 0 rgb(245,221,8) , 8px 8px 0 rgb(5,148,68) , 10px 10px 0 rgb(2,135,206) , 12px 12px 0 rgb(4,77,145) , 14px 14px 0 rgb(42,21,113)\",\n}\n\nconst _A = {\n  DELAY_BY: \"delayBy\",\n  PLAY_FILM: \"playFilm\",\n  PAUSE_FILM: \"pauseFilm\",\n  SEEK_FILM: \"seekFilm\",\n  PLAY_AUDIO: \"playAudio\",\n  PAUSE_AUDIO: \"pauseAudio\",\n  SEEK_AUDIO: \"seekAudio\",\n  SHOW_VISUAL: \"showVisual\",\n  HIDE_VISUAL: \"hideVisual\",\n  LOAD_VISUAL: \"loadVisual\",\n  PUSH_ASIDE: \"pushAsideIndex\",\n};\n\nconst _T = {\n  RIOT_INTERACTION: \"riotinteraction\",\n  TOUCH_END: \"touchend\",\n  MOUSE_OVER: \"mouseover\",\n  CLICK: \"click\",\n};\n\nconst _C = {\n  DEFAULT_HOST_TYPE: \"INTERNAL\",\n\n  HOST_BASE_URL: \"http://localhost:3000\",\n  HOST_ENDPOINT_GET_ALL: \"/api/v1/get_all?\",\n  HOST_ENDPOINT_GET: \"/api/v1/get?\",\n  HOST_ENDPOINT_PUT: \"/api/v1/put?\",\n  HOST_ENDPOINT_POST: \"/api/v1/post?\",\n  HOST_ENDPOINT_DELETE: \"/api/v1/delete?\",\n\n  DB: {\n    CONFIGS: [{}],\n    RUNNERS: [{}],\n    SESSIONS: [{}],\n  },\n\n  POWERED_BY_IVE_MSG: `<br/><span style='font-size:0.5em;color:springgreen'>Powered by</span> <span style='${E.IVE_FONT_LOGO_STYLE};font-size:0.75em'>IVE</span>`,\n  WELCOME_CTA_MSG: \"<span style='opacity:0.75'>Begin Experience?</span>\",\n  NETWORK_ERROR_CTA_MSG:\n    \"<span style='opacity:0.75'>Sorry!</span><br/><span style='font-size:0.65em;color:red'>something went wrong</span>\",\n};\n\n// make action constants immutable before export\nconst A = Object.freeze(_A);\n\n// make trigger constants immutable before export\nconst T = Object.freeze(_T);\n\n// creates instance of the constants object (_C) and extends it\n// with a method to update the named constants (_C's properties)\nconst C = Object.create(_C);\nC.update = function (key: keyof typeof _C, value: any) {\n  C[key] = value;\n};\n\nexport { A, C, E, T };\n","/*! *****************************************************************************\nCopyright (C) Microsoft. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\nvar Reflect;\n(function (Reflect) {\n    // Metadata Proposal\n    // https://rbuckton.github.io/reflect-metadata/\n    (function (factory) {\n        var root = typeof global === \"object\" ? global :\n            typeof self === \"object\" ? self :\n                typeof this === \"object\" ? this :\n                    Function(\"return this;\")();\n        var exporter = makeExporter(Reflect);\n        if (typeof root.Reflect === \"undefined\") {\n            root.Reflect = Reflect;\n        }\n        else {\n            exporter = makeExporter(root.Reflect, exporter);\n        }\n        factory(exporter);\n        function makeExporter(target, previous) {\n            return function (key, value) {\n                if (typeof target[key] !== \"function\") {\n                    Object.defineProperty(target, key, { configurable: true, writable: true, value: value });\n                }\n                if (previous)\n                    previous(key, value);\n            };\n        }\n    })(function (exporter) {\n        var hasOwn = Object.prototype.hasOwnProperty;\n        // feature test for Symbol support\n        var supportsSymbol = typeof Symbol === \"function\";\n        var toPrimitiveSymbol = supportsSymbol && typeof Symbol.toPrimitive !== \"undefined\" ? Symbol.toPrimitive : \"@@toPrimitive\";\n        var iteratorSymbol = supportsSymbol && typeof Symbol.iterator !== \"undefined\" ? Symbol.iterator : \"@@iterator\";\n        var supportsCreate = typeof Object.create === \"function\"; // feature test for Object.create support\n        var supportsProto = { __proto__: [] } instanceof Array; // feature test for __proto__ support\n        var downLevel = !supportsCreate && !supportsProto;\n        var HashMap = {\n            // create an object in dictionary mode (a.k.a. \"slow\" mode in v8)\n            create: supportsCreate\n                ? function () { return MakeDictionary(Object.create(null)); }\n                : supportsProto\n                    ? function () { return MakeDictionary({ __proto__: null }); }\n                    : function () { return MakeDictionary({}); },\n            has: downLevel\n                ? function (map, key) { return hasOwn.call(map, key); }\n                : function (map, key) { return key in map; },\n            get: downLevel\n                ? function (map, key) { return hasOwn.call(map, key) ? map[key] : undefined; }\n                : function (map, key) { return map[key]; },\n        };\n        // Load global or shim versions of Map, Set, and WeakMap\n        var functionPrototype = Object.getPrototypeOf(Function);\n        var usePolyfill = typeof process === \"object\" && process.env && process.env[\"REFLECT_METADATA_USE_MAP_POLYFILL\"] === \"true\";\n        var _Map = !usePolyfill && typeof Map === \"function\" && typeof Map.prototype.entries === \"function\" ? Map : CreateMapPolyfill();\n        var _Set = !usePolyfill && typeof Set === \"function\" && typeof Set.prototype.entries === \"function\" ? Set : CreateSetPolyfill();\n        var _WeakMap = !usePolyfill && typeof WeakMap === \"function\" ? WeakMap : CreateWeakMapPolyfill();\n        // [[Metadata]] internal slot\n        // https://rbuckton.github.io/reflect-metadata/#ordinary-object-internal-methods-and-internal-slots\n        var Metadata = new _WeakMap();\n        /**\n         * Applies a set of decorators to a property of a target object.\n         * @param decorators An array of decorators.\n         * @param target The target object.\n         * @param propertyKey (Optional) The property key to decorate.\n         * @param attributes (Optional) The property descriptor for the target key.\n         * @remarks Decorators are applied in reverse order.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Example = Reflect.decorate(decoratorsArray, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.decorate(decoratorsArray, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.decorate(decoratorsArray, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Object.defineProperty(Example, \"staticMethod\",\n         *         Reflect.decorate(decoratorsArray, Example, \"staticMethod\",\n         *             Object.getOwnPropertyDescriptor(Example, \"staticMethod\")));\n         *\n         *     // method (on prototype)\n         *     Object.defineProperty(Example.prototype, \"method\",\n         *         Reflect.decorate(decoratorsArray, Example.prototype, \"method\",\n         *             Object.getOwnPropertyDescriptor(Example.prototype, \"method\")));\n         *\n         */\n        function decorate(decorators, target, propertyKey, attributes) {\n            if (!IsUndefined(propertyKey)) {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsObject(attributes) && !IsUndefined(attributes) && !IsNull(attributes))\n                    throw new TypeError();\n                if (IsNull(attributes))\n                    attributes = undefined;\n                propertyKey = ToPropertyKey(propertyKey);\n                return DecorateProperty(decorators, target, propertyKey, attributes);\n            }\n            else {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsConstructor(target))\n                    throw new TypeError();\n                return DecorateConstructor(decorators, target);\n            }\n        }\n        exporter(\"decorate\", decorate);\n        // 4.1.2 Reflect.metadata(metadataKey, metadataValue)\n        // https://rbuckton.github.io/reflect-metadata/#reflect.metadata\n        /**\n         * A default metadata decorator factory that can be used on a class, class member, or parameter.\n         * @param metadataKey The key for the metadata entry.\n         * @param metadataValue The value for the metadata entry.\n         * @returns A decorator function.\n         * @remarks\n         * If `metadataKey` is already defined for the target and target key, the\n         * metadataValue for that key will be overwritten.\n         * @example\n         *\n         *     // constructor\n         *     @Reflect.metadata(key, value)\n         *     class Example {\n         *     }\n         *\n         *     // property (on constructor, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticProperty;\n         *     }\n         *\n         *     // property (on prototype, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         property;\n         *     }\n         *\n         *     // method (on constructor)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticMethod() { }\n         *     }\n         *\n         *     // method (on prototype)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         method() { }\n         *     }\n         *\n         */\n        function metadata(metadataKey, metadataValue) {\n            function decorator(target, propertyKey) {\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsUndefined(propertyKey) && !IsPropertyKey(propertyKey))\n                    throw new TypeError();\n                OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n            }\n            return decorator;\n        }\n        exporter(\"metadata\", metadata);\n        /**\n         * Define a unique metadata entry on the target.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param metadataValue A value that contains attached metadata.\n         * @param target The target object on which to define metadata.\n         * @param propertyKey (Optional) The property key for the target.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"method\");\n         *\n         *     // decorator factory as metadata-producing annotation.\n         *     function MyAnnotation(options): Decorator {\n         *         return (target, key?) => Reflect.defineMetadata(\"custom:annotation\", options, target, key);\n         *     }\n         *\n         */\n        function defineMetadata(metadataKey, metadataValue, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n        }\n        exporter(\"defineMetadata\", defineMetadata);\n        /**\n         * Gets a value indicating whether the target object or its prototype chain has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object or its prototype chain; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasMetadata\", hasMetadata);\n        /**\n         * Gets a value indicating whether the target object has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasOwnMetadata\", hasOwnMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object or its prototype chain.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getMetadata\", getMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getOwnMetadata\", getOwnMetadata);\n        /**\n         * Gets the metadata keys defined on the target object or its prototype chain.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getMetadataKeys\", getMetadataKeys);\n        /**\n         * Gets the unique metadata keys defined on the target object.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryOwnMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getOwnMetadataKeys\", getOwnMetadataKeys);\n        /**\n         * Deletes the metadata entry from the target object with the provided key.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata entry was found and deleted; otherwise, false.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function deleteMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            var metadataMap = GetOrCreateMetadataMap(target, propertyKey, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            if (!metadataMap.delete(metadataKey))\n                return false;\n            if (metadataMap.size > 0)\n                return true;\n            var targetMetadata = Metadata.get(target);\n            targetMetadata.delete(propertyKey);\n            if (targetMetadata.size > 0)\n                return true;\n            Metadata.delete(target);\n            return true;\n        }\n        exporter(\"deleteMetadata\", deleteMetadata);\n        function DecorateConstructor(decorators, target) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsConstructor(decorated))\n                        throw new TypeError();\n                    target = decorated;\n                }\n            }\n            return target;\n        }\n        function DecorateProperty(decorators, target, propertyKey, descriptor) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target, propertyKey, descriptor);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsObject(decorated))\n                        throw new TypeError();\n                    descriptor = decorated;\n                }\n            }\n            return descriptor;\n        }\n        function GetOrCreateMetadataMap(O, P, Create) {\n            var targetMetadata = Metadata.get(O);\n            if (IsUndefined(targetMetadata)) {\n                if (!Create)\n                    return undefined;\n                targetMetadata = new _Map();\n                Metadata.set(O, targetMetadata);\n            }\n            var metadataMap = targetMetadata.get(P);\n            if (IsUndefined(metadataMap)) {\n                if (!Create)\n                    return undefined;\n                metadataMap = new _Map();\n                targetMetadata.set(P, metadataMap);\n            }\n            return metadataMap;\n        }\n        // 3.1.1.1 OrdinaryHasMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasmetadata\n        function OrdinaryHasMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return true;\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryHasMetadata(MetadataKey, parent, P);\n            return false;\n        }\n        // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata\n        function OrdinaryHasOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            return ToBoolean(metadataMap.has(MetadataKey));\n        }\n        // 3.1.3.1 OrdinaryGetMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetmetadata\n        function OrdinaryGetMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return OrdinaryGetOwnMetadata(MetadataKey, O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryGetMetadata(MetadataKey, parent, P);\n            return undefined;\n        }\n        // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata\n        function OrdinaryGetOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return undefined;\n            return metadataMap.get(MetadataKey);\n        }\n        // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata\n        function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ true);\n            metadataMap.set(MetadataKey, MetadataValue);\n        }\n        // 3.1.6.1 OrdinaryMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarymetadatakeys\n        function OrdinaryMetadataKeys(O, P) {\n            var ownKeys = OrdinaryOwnMetadataKeys(O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (parent === null)\n                return ownKeys;\n            var parentKeys = OrdinaryMetadataKeys(parent, P);\n            if (parentKeys.length <= 0)\n                return ownKeys;\n            if (ownKeys.length <= 0)\n                return parentKeys;\n            var set = new _Set();\n            var keys = [];\n            for (var _i = 0, ownKeys_1 = ownKeys; _i < ownKeys_1.length; _i++) {\n                var key = ownKeys_1[_i];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            for (var _a = 0, parentKeys_1 = parentKeys; _a < parentKeys_1.length; _a++) {\n                var key = parentKeys_1[_a];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            return keys;\n        }\n        // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys\n        function OrdinaryOwnMetadataKeys(O, P) {\n            var keys = [];\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return keys;\n            var keysObj = metadataMap.keys();\n            var iterator = GetIterator(keysObj);\n            var k = 0;\n            while (true) {\n                var next = IteratorStep(iterator);\n                if (!next) {\n                    keys.length = k;\n                    return keys;\n                }\n                var nextValue = IteratorValue(next);\n                try {\n                    keys[k] = nextValue;\n                }\n                catch (e) {\n                    try {\n                        IteratorClose(iterator);\n                    }\n                    finally {\n                        throw e;\n                    }\n                }\n                k++;\n            }\n        }\n        // 6 ECMAScript Data Typ0es and Values\n        // https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values\n        function Type(x) {\n            if (x === null)\n                return 1 /* Null */;\n            switch (typeof x) {\n                case \"undefined\": return 0 /* Undefined */;\n                case \"boolean\": return 2 /* Boolean */;\n                case \"string\": return 3 /* String */;\n                case \"symbol\": return 4 /* Symbol */;\n                case \"number\": return 5 /* Number */;\n                case \"object\": return x === null ? 1 /* Null */ : 6 /* Object */;\n                default: return 6 /* Object */;\n            }\n        }\n        // 6.1.1 The Undefined Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-undefined-type\n        function IsUndefined(x) {\n            return x === undefined;\n        }\n        // 6.1.2 The Null Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-null-type\n        function IsNull(x) {\n            return x === null;\n        }\n        // 6.1.5 The Symbol Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-symbol-type\n        function IsSymbol(x) {\n            return typeof x === \"symbol\";\n        }\n        // 6.1.7 The Object Type\n        // https://tc39.github.io/ecma262/#sec-object-type\n        function IsObject(x) {\n            return typeof x === \"object\" ? x !== null : typeof x === \"function\";\n        }\n        // 7.1 Type Conversion\n        // https://tc39.github.io/ecma262/#sec-type-conversion\n        // 7.1.1 ToPrimitive(input [, PreferredType])\n        // https://tc39.github.io/ecma262/#sec-toprimitive\n        function ToPrimitive(input, PreferredType) {\n            switch (Type(input)) {\n                case 0 /* Undefined */: return input;\n                case 1 /* Null */: return input;\n                case 2 /* Boolean */: return input;\n                case 3 /* String */: return input;\n                case 4 /* Symbol */: return input;\n                case 5 /* Number */: return input;\n            }\n            var hint = PreferredType === 3 /* String */ ? \"string\" : PreferredType === 5 /* Number */ ? \"number\" : \"default\";\n            var exoticToPrim = GetMethod(input, toPrimitiveSymbol);\n            if (exoticToPrim !== undefined) {\n                var result = exoticToPrim.call(input, hint);\n                if (IsObject(result))\n                    throw new TypeError();\n                return result;\n            }\n            return OrdinaryToPrimitive(input, hint === \"default\" ? \"number\" : hint);\n        }\n        // 7.1.1.1 OrdinaryToPrimitive(O, hint)\n        // https://tc39.github.io/ecma262/#sec-ordinarytoprimitive\n        function OrdinaryToPrimitive(O, hint) {\n            if (hint === \"string\") {\n                var toString_1 = O.toString;\n                if (IsCallable(toString_1)) {\n                    var result = toString_1.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            else {\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var toString_2 = O.toString;\n                if (IsCallable(toString_2)) {\n                    var result = toString_2.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            throw new TypeError();\n        }\n        // 7.1.2 ToBoolean(argument)\n        // https://tc39.github.io/ecma262/2016/#sec-toboolean\n        function ToBoolean(argument) {\n            return !!argument;\n        }\n        // 7.1.12 ToString(argument)\n        // https://tc39.github.io/ecma262/#sec-tostring\n        function ToString(argument) {\n            return \"\" + argument;\n        }\n        // 7.1.14 ToPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-topropertykey\n        function ToPropertyKey(argument) {\n            var key = ToPrimitive(argument, 3 /* String */);\n            if (IsSymbol(key))\n                return key;\n            return ToString(key);\n        }\n        // 7.2 Testing and Comparison Operations\n        // https://tc39.github.io/ecma262/#sec-testing-and-comparison-operations\n        // 7.2.2 IsArray(argument)\n        // https://tc39.github.io/ecma262/#sec-isarray\n        function IsArray(argument) {\n            return Array.isArray\n                ? Array.isArray(argument)\n                : argument instanceof Object\n                    ? argument instanceof Array\n                    : Object.prototype.toString.call(argument) === \"[object Array]\";\n        }\n        // 7.2.3 IsCallable(argument)\n        // https://tc39.github.io/ecma262/#sec-iscallable\n        function IsCallable(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Call]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.4 IsConstructor(argument)\n        // https://tc39.github.io/ecma262/#sec-isconstructor\n        function IsConstructor(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Construct]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.7 IsPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-ispropertykey\n        function IsPropertyKey(argument) {\n            switch (Type(argument)) {\n                case 3 /* String */: return true;\n                case 4 /* Symbol */: return true;\n                default: return false;\n            }\n        }\n        // 7.3 Operations on Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-objects\n        // 7.3.9 GetMethod(V, P)\n        // https://tc39.github.io/ecma262/#sec-getmethod\n        function GetMethod(V, P) {\n            var func = V[P];\n            if (func === undefined || func === null)\n                return undefined;\n            if (!IsCallable(func))\n                throw new TypeError();\n            return func;\n        }\n        // 7.4 Operations on Iterator Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-iterator-objects\n        function GetIterator(obj) {\n            var method = GetMethod(obj, iteratorSymbol);\n            if (!IsCallable(method))\n                throw new TypeError(); // from Call\n            var iterator = method.call(obj);\n            if (!IsObject(iterator))\n                throw new TypeError();\n            return iterator;\n        }\n        // 7.4.4 IteratorValue(iterResult)\n        // https://tc39.github.io/ecma262/2016/#sec-iteratorvalue\n        function IteratorValue(iterResult) {\n            return iterResult.value;\n        }\n        // 7.4.5 IteratorStep(iterator)\n        // https://tc39.github.io/ecma262/#sec-iteratorstep\n        function IteratorStep(iterator) {\n            var result = iterator.next();\n            return result.done ? false : result;\n        }\n        // 7.4.6 IteratorClose(iterator, completion)\n        // https://tc39.github.io/ecma262/#sec-iteratorclose\n        function IteratorClose(iterator) {\n            var f = iterator[\"return\"];\n            if (f)\n                f.call(iterator);\n        }\n        // 9.1 Ordinary Object Internal Methods and Internal Slots\n        // https://tc39.github.io/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots\n        // 9.1.1.1 OrdinaryGetPrototypeOf(O)\n        // https://tc39.github.io/ecma262/#sec-ordinarygetprototypeof\n        function OrdinaryGetPrototypeOf(O) {\n            var proto = Object.getPrototypeOf(O);\n            if (typeof O !== \"function\" || O === functionPrototype)\n                return proto;\n            // TypeScript doesn't set __proto__ in ES5, as it's non-standard.\n            // Try to determine the superclass constructor. Compatible implementations\n            // must either set __proto__ on a subclass constructor to the superclass constructor,\n            // or ensure each class has a valid `constructor` property on its prototype that\n            // points back to the constructor.\n            // If this is not the same as Function.[[Prototype]], then this is definately inherited.\n            // This is the case when in ES6 or when using __proto__ in a compatible browser.\n            if (proto !== functionPrototype)\n                return proto;\n            // If the super prototype is Object.prototype, null, or undefined, then we cannot determine the heritage.\n            var prototype = O.prototype;\n            var prototypeProto = prototype && Object.getPrototypeOf(prototype);\n            if (prototypeProto == null || prototypeProto === Object.prototype)\n                return proto;\n            // If the constructor was not a function, then we cannot determine the heritage.\n            var constructor = prototypeProto.constructor;\n            if (typeof constructor !== \"function\")\n                return proto;\n            // If we have some kind of self-reference, then we cannot determine the heritage.\n            if (constructor === O)\n                return proto;\n            // we have a pretty good guess at the heritage.\n            return constructor;\n        }\n        // naive Map shim\n        function CreateMapPolyfill() {\n            var cacheSentinel = {};\n            var arraySentinel = [];\n            var MapIterator = /** @class */ (function () {\n                function MapIterator(keys, values, selector) {\n                    this._index = 0;\n                    this._keys = keys;\n                    this._values = values;\n                    this._selector = selector;\n                }\n                MapIterator.prototype[\"@@iterator\"] = function () { return this; };\n                MapIterator.prototype[iteratorSymbol] = function () { return this; };\n                MapIterator.prototype.next = function () {\n                    var index = this._index;\n                    if (index >= 0 && index < this._keys.length) {\n                        var result = this._selector(this._keys[index], this._values[index]);\n                        if (index + 1 >= this._keys.length) {\n                            this._index = -1;\n                            this._keys = arraySentinel;\n                            this._values = arraySentinel;\n                        }\n                        else {\n                            this._index++;\n                        }\n                        return { value: result, done: false };\n                    }\n                    return { value: undefined, done: true };\n                };\n                MapIterator.prototype.throw = function (error) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    throw error;\n                };\n                MapIterator.prototype.return = function (value) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    return { value: value, done: true };\n                };\n                return MapIterator;\n            }());\n            return /** @class */ (function () {\n                function Map() {\n                    this._keys = [];\n                    this._values = [];\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                }\n                Object.defineProperty(Map.prototype, \"size\", {\n                    get: function () { return this._keys.length; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Map.prototype.has = function (key) { return this._find(key, /*insert*/ false) >= 0; };\n                Map.prototype.get = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    return index >= 0 ? this._values[index] : undefined;\n                };\n                Map.prototype.set = function (key, value) {\n                    var index = this._find(key, /*insert*/ true);\n                    this._values[index] = value;\n                    return this;\n                };\n                Map.prototype.delete = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    if (index >= 0) {\n                        var size = this._keys.length;\n                        for (var i = index + 1; i < size; i++) {\n                            this._keys[i - 1] = this._keys[i];\n                            this._values[i - 1] = this._values[i];\n                        }\n                        this._keys.length--;\n                        this._values.length--;\n                        if (key === this._cacheKey) {\n                            this._cacheKey = cacheSentinel;\n                            this._cacheIndex = -2;\n                        }\n                        return true;\n                    }\n                    return false;\n                };\n                Map.prototype.clear = function () {\n                    this._keys.length = 0;\n                    this._values.length = 0;\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                };\n                Map.prototype.keys = function () { return new MapIterator(this._keys, this._values, getKey); };\n                Map.prototype.values = function () { return new MapIterator(this._keys, this._values, getValue); };\n                Map.prototype.entries = function () { return new MapIterator(this._keys, this._values, getEntry); };\n                Map.prototype[\"@@iterator\"] = function () { return this.entries(); };\n                Map.prototype[iteratorSymbol] = function () { return this.entries(); };\n                Map.prototype._find = function (key, insert) {\n                    if (this._cacheKey !== key) {\n                        this._cacheIndex = this._keys.indexOf(this._cacheKey = key);\n                    }\n                    if (this._cacheIndex < 0 && insert) {\n                        this._cacheIndex = this._keys.length;\n                        this._keys.push(key);\n                        this._values.push(undefined);\n                    }\n                    return this._cacheIndex;\n                };\n                return Map;\n            }());\n            function getKey(key, _) {\n                return key;\n            }\n            function getValue(_, value) {\n                return value;\n            }\n            function getEntry(key, value) {\n                return [key, value];\n            }\n        }\n        // naive Set shim\n        function CreateSetPolyfill() {\n            return /** @class */ (function () {\n                function Set() {\n                    this._map = new _Map();\n                }\n                Object.defineProperty(Set.prototype, \"size\", {\n                    get: function () { return this._map.size; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Set.prototype.has = function (value) { return this._map.has(value); };\n                Set.prototype.add = function (value) { return this._map.set(value, value), this; };\n                Set.prototype.delete = function (value) { return this._map.delete(value); };\n                Set.prototype.clear = function () { this._map.clear(); };\n                Set.prototype.keys = function () { return this._map.keys(); };\n                Set.prototype.values = function () { return this._map.values(); };\n                Set.prototype.entries = function () { return this._map.entries(); };\n                Set.prototype[\"@@iterator\"] = function () { return this.keys(); };\n                Set.prototype[iteratorSymbol] = function () { return this.keys(); };\n                return Set;\n            }());\n        }\n        // naive WeakMap shim\n        function CreateWeakMapPolyfill() {\n            var UUID_SIZE = 16;\n            var keys = HashMap.create();\n            var rootKey = CreateUniqueKey();\n            return /** @class */ (function () {\n                function WeakMap() {\n                    this._key = CreateUniqueKey();\n                }\n                WeakMap.prototype.has = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.has(table, this._key) : false;\n                };\n                WeakMap.prototype.get = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.get(table, this._key) : undefined;\n                };\n                WeakMap.prototype.set = function (target, value) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ true);\n                    table[this._key] = value;\n                    return this;\n                };\n                WeakMap.prototype.delete = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? delete table[this._key] : false;\n                };\n                WeakMap.prototype.clear = function () {\n                    // NOTE: not a real clear, just makes the previous data unreachable\n                    this._key = CreateUniqueKey();\n                };\n                return WeakMap;\n            }());\n            function CreateUniqueKey() {\n                var key;\n                do\n                    key = \"@@WeakMap@@\" + CreateUUID();\n                while (HashMap.has(keys, key));\n                keys[key] = true;\n                return key;\n            }\n            function GetOrCreateWeakMapTable(target, create) {\n                if (!hasOwn.call(target, rootKey)) {\n                    if (!create)\n                        return undefined;\n                    Object.defineProperty(target, rootKey, { value: HashMap.create() });\n                }\n                return target[rootKey];\n            }\n            function FillRandomBytes(buffer, size) {\n                for (var i = 0; i < size; ++i)\n                    buffer[i] = Math.random() * 0xff | 0;\n                return buffer;\n            }\n            function GenRandomBytes(size) {\n                if (typeof Uint8Array === \"function\") {\n                    if (typeof crypto !== \"undefined\")\n                        return crypto.getRandomValues(new Uint8Array(size));\n                    if (typeof msCrypto !== \"undefined\")\n                        return msCrypto.getRandomValues(new Uint8Array(size));\n                    return FillRandomBytes(new Uint8Array(size), size);\n                }\n                return FillRandomBytes(new Array(size), size);\n            }\n            function CreateUUID() {\n                var data = GenRandomBytes(UUID_SIZE);\n                // mark as random - RFC 4122  4.4\n                data[6] = data[6] & 0x4f | 0x40;\n                data[8] = data[8] & 0xbf | 0x80;\n                var result = \"\";\n                for (var offset = 0; offset < UUID_SIZE; ++offset) {\n                    var byte = data[offset];\n                    if (offset === 4 || offset === 6 || offset === 8)\n                        result += \"-\";\n                    if (byte < 16)\n                        result += \"0\";\n                    result += byte.toString(16).toLowerCase();\n                }\n                return result;\n            }\n        }\n        // uses a heuristic used by v8 and chakra to force an object into dictionary mode.\n        function MakeDictionary(obj) {\n            obj.__ = undefined;\n            delete obj.__;\n            return obj;\n        }\n    });\n})(Reflect || (Reflect = {}));\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nfunction __metadata(k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n}\n\n/**\n * Reflect Metadata json properties storage name.\n */\nvar METADATA_JSON_PROPERTIES_NAME = 'JsonProperties';\nvar METADATA_JSON_IGNORE_NAME = 'JsonIgnore';\n/**\n * Returns the JsonProperty decorator metadata.\n */\nvar getJsonPropertyDecoratorMetadata = function (target, key) {\n    return Reflect.getMetadata(JSON_PROPERTY_DECORATOR_NAME, target, key);\n};\n/**\n * Returns the JsonProperty name (if any) associated with the object instance.\n * If any JsonProperty metadata found, it returns the key name as the name of the property.\n */\nvar getKeyName = function (target, key) {\n    var metadata = getJsonPropertyDecoratorMetadata(target, key);\n    // tslint:disable-next-line:triple-equals\n    if (metadata != undefined && metadata.name != undefined) {\n        return metadata.name;\n    }\n    else {\n        return key;\n    }\n};\n/**\n * Returns the JsonPropertyDecoratorMetadata for the property\n */\nvar getJsonPropertyDecorator = function (metadata) {\n    return getPropertyDecorator(JSON_PROPERTY_DECORATOR_NAME, metadata);\n};\n/**\n * Returns the JsonIgnoreDecoratorMetadata for the property\n */\nvar getJsonIgnoreDecorator = function () {\n    return function (target, propertyKey) {\n        Reflect.defineMetadata(METADATA_JSON_IGNORE_NAME, true, target, propertyKey);\n    };\n};\nvar getPropertyDecorator = function (metadataKey, metadata) {\n    return Reflect.metadata(metadataKey, metadata);\n};\n/**\n * Checks to see if the specified type is a standard JS object type.\n */\nvar isSimpleType = function (typeName) {\n    switch (typeName) {\n        case Constants.STRING_TYPE: return true;\n        case Constants.NUMBER_TYPE: return true;\n        case Constants.BOOLEAN_TYPE: return true;\n        case Constants.DATE_TYPE: return true;\n        case Constants.STRING_TYPE_LOWERCASE: return true;\n        case Constants.NUMBER_TYPE_LOWERCASE: return true;\n        case Constants.BOOLEAN_TYPE_LOWERCASE: return true;\n        case Constants.DATE_TYPE_LOWERCASE: return true;\n        default: return false;\n    }\n};\n/**\n * Returns the the instance type name by looking at the constructor name.\n * Stupid IE does not have name property! Hence the hack.\n */\nvar extractClassname = function (instance) {\n    var instr = instance.toString();\n    var i1 = instr.indexOf('class');\n    var i2 = instr.indexOf('{', i1 + 5);\n    return instr.substring(i1 + 5, i2).trim();\n};\nvar getTypeNameFromInstance = function (instance) {\n    return instance.name || extractClassname(instance);\n};\nvar getType = function (instance, key) {\n    return Reflect.getMetadata('design:type', instance, key);\n};\nvar isArrayType = function (instance, key) {\n    return Array === getType(instance, key);\n};\nvar getTypeName = function (instance, key) {\n    var type = getType(instance, key);\n    // tslint:disable-next-line:triple-equals\n    if (type != undefined) {\n        return getTypeNameFromInstance(type);\n    }\n    return type;\n};\nvar Constants = {\n    OBJECT_TYPE: 'Object',\n    OBJECT_TYPE_LOWERCASE: 'object',\n    STRING_TYPE: 'String',\n    STRING_TYPE_LOWERCASE: 'string',\n    NUMBER_TYPE: 'Number',\n    NUMBER_TYPE_LOWERCASE: 'number',\n    BOOLEAN_TYPE: 'Boolean',\n    BOOLEAN_TYPE_LOWERCASE: 'boolean',\n    DATE_TYPE: 'Date',\n    DATE_TYPE_LOWERCASE: 'date',\n    ARRAY_TYPE: 'Array',\n    ARRAY_TYPE_LOWERCASE: 'array',\n    FROM_ARRAY: 'fromArray'\n};\nvar getCachedType = function (type, cache) {\n    // tslint:disable-next-line:triple-equals\n    var typeName = type.getJsonObjectMapperCacheKey != undefined ? type.getJsonObjectMapperCacheKey() : getTypeNameFromInstance(type);\n    if (!cache[typeName]) {\n        cache[typeName] = new type();\n    }\n    return cache[typeName];\n};\n\n/**\n * Decorator names\n */\nvar JSON_PROPERTY_DECORATOR_NAME = 'JsonProperty';\n\n(function (AccessType) {\n    AccessType[AccessType[\"READ_ONLY\"] = 0] = \"READ_ONLY\";\n    AccessType[AccessType[\"WRITE_ONLY\"] = 1] = \"WRITE_ONLY\";\n    AccessType[AccessType[\"BOTH\"] = 2] = \"BOTH\";\n})(exports.AccessType || (exports.AccessType = {}));\n/**\n * JsonProperty Decorator function.\n */\nvar JsonProperty = function (metadata) {\n    if (typeof metadata === 'string') {\n        return getJsonPropertyDecorator({ name: metadata, required: false, access: exports.AccessType.BOTH });\n    }\n    else {\n        return getJsonPropertyDecorator(metadata);\n    }\n};\n/**\n * Decorator for specifying cache key.\n * Used for Serializer/Deserializer caching.\n *\n * @export\n * @param {string} key\n * @returns\n */\nvar CacheKey = function (key) {\n    return function (f) {\n        var functionName = 'getJsonObjectMapperCacheKey';\n        var functionImpl = new Function(\"return '\" + key + \"';\");\n        f[functionName] = functionImpl;\n    };\n};\n/**\n * JsonIgnore Decorator function.\n */\nvar JsonIgnore = function () {\n    return getJsonIgnoreDecorator();\n};\n/**\n * Json convertion error type.\n */\nvar JsonConverstionError = (function () {\n    function JsonConverstionError(message, json) {\n        this.json = json;\n        this.message = message;\n        this.stack = (new Error()).stack;\n    }\n    return JsonConverstionError;\n}());\n\nvar SimpleTypeCoverter = function (value, type) {\n    return type === Constants.DATE_TYPE ? new Date(value) : value;\n};\n/**\n * Deserializes a standard js object type(string, number and boolean) from json.\n */\nvar DeserializeSimpleType = function (instance, instanceKey, type, json, jsonKey) {\n    try {\n        instance[instanceKey] = json[jsonKey];\n        return [];\n    }\n    catch (e) {\n        // tslint:disable-next-line:no-string-literal\n        throw new JsonConverstionError(\"Property '\" + instanceKey + \"' of \" + instance.constructor['name'] + \" does not match datatype of \" + jsonKey, json);\n    }\n};\n/**\n * Deserializes a standard js Date object type from json.\n */\nvar DeserializeDateType = function (instance, instanceKey, type, json, jsonKey) {\n    try {\n        instance[instanceKey] = new Date(json[jsonKey]);\n        return [];\n    }\n    catch (e) {\n        // tslint:disable-next-line:no-string-literal\n        throw new JsonConverstionError(\"Property '\" + instanceKey + \"' of \" + instance.constructor['name'] + \" does not match datatype of \" + jsonKey, json);\n    }\n};\n/**\n * Deserializes a JS array type from json.\n */\nvar DeserializeArrayType = function (instance, instanceKey, type, json, jsonKey) {\n    var jsonObject = (jsonKey !== undefined) ? (json[jsonKey] || []) : json;\n    var jsonArraySize = jsonObject.length;\n    var conversionFunctionsList = [];\n    var arrayInstance = [];\n    instance[instanceKey] = arrayInstance;\n    if (jsonArraySize > 0) {\n        for (var i = 0; i < jsonArraySize; i++) {\n            if (jsonObject[i]) {\n                var typeName = getTypeNameFromInstance(type);\n                if (!isSimpleType(typeName)) {\n                    var typeInstance = new type();\n                    conversionFunctionsList.push({ functionName: Constants.OBJECT_TYPE, instance: typeInstance, json: jsonObject[i] });\n                    arrayInstance.push(typeInstance);\n                }\n                else {\n                    arrayInstance.push(conversionFunctions[Constants.FROM_ARRAY](jsonObject[i], typeName));\n                }\n            }\n        }\n    }\n    return conversionFunctionsList;\n};\n/**\n * Deserializes a js object type from json.\n */\nvar DeserializeComplexType = function (instance, instanceKey, type, json, jsonKey) {\n    var conversionFunctionsList = [];\n    var objectInstance;\n    /**\n     * If instanceKey is not passed on then it's the first iteration of the functions.\n     */\n    // tslint:disable-next-line:triple-equals\n    if (instanceKey != undefined) {\n        objectInstance = new type();\n        instance[instanceKey] = objectInstance;\n    }\n    else {\n        objectInstance = instance;\n    }\n    var objectKeys = Object.keys(objectInstance);\n    objectKeys = objectKeys.concat((Reflect.getMetadata(METADATA_JSON_PROPERTIES_NAME, objectInstance) || []).filter(function (item) {\n        if (objectInstance.constructor.prototype.hasOwnProperty(item) && Object.getOwnPropertyDescriptor(objectInstance.constructor.prototype, item).set === undefined) {\n            // Property does not have setter\n            return false;\n        }\n        return objectKeys.indexOf(item) < 0;\n    }));\n    objectKeys = objectKeys.filter(function (item) {\n        return !Reflect.hasMetadata(METADATA_JSON_IGNORE_NAME, objectInstance, item);\n    });\n    objectKeys.forEach(function (key) {\n        /**\n         * Check if there is any DecoratorMetadata attached to this property, otherwise create a new one.\n         */\n        var metadata = getJsonPropertyDecoratorMetadata(objectInstance, key);\n        if (metadata === undefined) {\n            metadata = { name: key, required: false, access: exports.AccessType.BOTH };\n        }\n        // tslint:disable-next-line:triple-equals\n        if (exports.AccessType.WRITE_ONLY != metadata.access) {\n            /**\n             * Check requried property\n             */\n            if (metadata.required && json[metadata.name] === undefined) {\n                throw new JsonConverstionError(\"JSON structure does have have required property '\" + metadata.name + \"' as required by '\" + getTypeNameFromInstance(objectInstance) + \"[\" + key + \"]\", json);\n            }\n            // tslint:disable-next-line:triple-equals\n            var jsonKeyName = metadata.name != undefined ? metadata.name : key;\n            // tslint:disable-next-line:triple-equals\n            if (json[jsonKeyName] != undefined) {\n                /**\n                 * If metadata has deserializer, use that one instead.\n                 */\n                // tslint:disable-next-line:triple-equals\n                if (metadata.deserializer != undefined) {\n                    objectInstance[key] = getOrCreateDeserializer(metadata.deserializer).deserialize(json[jsonKeyName]);\n                }\n                else if (metadata.type === undefined) {\n                    /**\n                    * If we do not have any type defined, then we can't do much here but to hope for the best.\n                    */\n                    objectInstance[key] = json[jsonKeyName];\n                }\n                else {\n                    if (!isArrayType(objectInstance, key)) {\n                        // tslint:disable-next-line:triple-equals\n                        var typeName = metadata.type != undefined ? getTypeNameFromInstance(metadata.type) : getTypeName(objectInstance, key);\n                        if (!isSimpleType(typeName)) {\n                            objectInstance[key] = new metadata.type();\n                            conversionFunctionsList.push({ functionName: Constants.OBJECT_TYPE, type: metadata.type, instance: objectInstance[key], json: json[jsonKeyName] });\n                        }\n                        else {\n                            conversionFunctions[typeName](objectInstance, key, typeName, json, jsonKeyName);\n                        }\n                    }\n                    else {\n                        var moreFunctions = conversionFunctions[Constants.ARRAY_TYPE](objectInstance, key, metadata.type, json, jsonKeyName);\n                        moreFunctions.forEach(function (struct) {\n                            conversionFunctionsList.push(struct);\n                        });\n                    }\n                }\n            }\n        }\n    });\n    return conversionFunctionsList;\n};\n/**\n * Object to cache deserializers\n */\nvar deserializers = {};\n/**\n * Checks to see if the deserializer already exists or not.\n * If not, creates a new one and caches it, returns the\n * cached instance otherwise.\n */\nvar getOrCreateDeserializer = function (type) {\n    return getCachedType(type, deserializers);\n};\n/**\n * List of JSON object conversion functions.\n */\nvar conversionFunctions = {};\nconversionFunctions[Constants.OBJECT_TYPE] = DeserializeComplexType;\nconversionFunctions[Constants.ARRAY_TYPE] = DeserializeArrayType;\nconversionFunctions[Constants.DATE_TYPE] = DeserializeDateType;\nconversionFunctions[Constants.STRING_TYPE] = DeserializeSimpleType;\nconversionFunctions[Constants.NUMBER_TYPE] = DeserializeSimpleType;\nconversionFunctions[Constants.BOOLEAN_TYPE] = DeserializeSimpleType;\nconversionFunctions[Constants.FROM_ARRAY] = SimpleTypeCoverter;\nconversionFunctions[Constants.OBJECT_TYPE_LOWERCASE] = DeserializeComplexType;\nconversionFunctions[Constants.ARRAY_TYPE_LOWERCASE] = DeserializeArrayType;\nconversionFunctions[Constants.DATE_TYPE_LOWERCASE] = DeserializeDateType;\nconversionFunctions[Constants.STRING_TYPE_LOWERCASE] = DeserializeSimpleType;\nconversionFunctions[Constants.NUMBER_TYPE_LOWERCASE] = DeserializeSimpleType;\nconversionFunctions[Constants.BOOLEAN_TYPE_LOWERCASE] = DeserializeSimpleType;\n\nvar SerializeArrayType = function (parentStructure, instanceStructure, instanceIndex) {\n    var furtherSerializationStructures = {};\n    var arrayInstance = instanceStructure.instance;\n    instanceStructure.visited = true;\n    arrayInstance.forEach(function (value) {\n        if (value !== undefined) {\n            if (!isSimpleType(typeof value)) {\n                var struct = {\n                    id: uniqueId(),\n                    type: Constants.OBJECT_TYPE,\n                    instance: value,\n                    parentIndex: instanceIndex,\n                    values: [],\n                    key: undefined,\n                    visited: false\n                };\n                furtherSerializationStructures[struct.id] = struct;\n            }\n            else {\n                instanceStructure.values.push(serializeFunctions[typeof value](undefined, value, serializers[typeof value]));\n            }\n        }\n    });\n    return createArrayOfSerializationStructures(furtherSerializationStructures);\n};\nvar createArrayOfSerializationStructures = function (serializationStructuresObject) {\n    var serializationStructures = [];\n    Object.keys(serializationStructuresObject).forEach(function (key) {\n        serializationStructures.push(serializationStructuresObject[key]);\n    });\n    return serializationStructures;\n};\nvar serializeObject = function (key, instanceValuesStack) {\n    var json = (key !== undefined ? \"\\\"\" + key + \"\\\":\" : '');\n    return json + \"{\" + instanceValuesStack.join() + \"}\";\n};\nvar serializeArray = function (key, instanceValuesStack) {\n    var json = (key !== undefined ? \"\\\"\" + key + \"\\\":\" : '');\n    return json + \"[\" + instanceValuesStack.join() + \"]\";\n};\nvar mergeObjectOrArrayValuesAndCopyToParents = function (instanceStructure, parentStructure) {\n    mergeObjectOrArrayValues(instanceStructure);\n    parentStructure.values.push(instanceStructure.values.pop());\n};\nvar mergeObjectOrArrayValues = function (instanceStructure) {\n    var mergedValue;\n    if (instanceStructure.type === Constants.OBJECT_TYPE) {\n        mergedValue = serializeObject(instanceStructure.key, instanceStructure.values);\n    }\n    else {\n        mergedValue = serializeArray(instanceStructure.key, instanceStructure.values);\n    }\n    instanceStructure.values = [];\n    instanceStructure.values.push(mergedValue);\n};\nvar SerializeObjectType = function (parentStructure, instanceStructure, instanceIndex) {\n    var furtherSerializationStructures = {};\n    instanceStructure.visited = true;\n    var objectKeys = Object.keys(instanceStructure.instance);\n    objectKeys = objectKeys.concat((Reflect.getMetadata(METADATA_JSON_PROPERTIES_NAME, instanceStructure.instance) || []).filter(function (item) {\n        if (instanceStructure.instance.constructor.prototype.hasOwnProperty(item) && Object.getOwnPropertyDescriptor(instanceStructure.instance.constructor.prototype, item).get === undefined) {\n            // Property does not have getter\n            return false;\n        }\n        return objectKeys.indexOf(item) < 0;\n    }));\n    objectKeys = objectKeys.filter(function (item) {\n        return !Reflect.hasMetadata(METADATA_JSON_IGNORE_NAME, instanceStructure.instance, item);\n    });\n    objectKeys.forEach(function (key) {\n        var keyInstance = instanceStructure.instance[key];\n        if (keyInstance === null) {\n            instanceStructure.values.push(\"\\\"\" + key + \"\\\":\" + keyInstance);\n        }\n        else if (keyInstance !== undefined) {\n            var metadata = getJsonPropertyDecoratorMetadata(instanceStructure.instance, key);\n            if (metadata !== undefined && exports.AccessType.READ_ONLY === metadata.access) {\n            }\n            else if (metadata !== undefined && metadata.serializer !== undefined) {\n                var serializer = getOrCreateSerializer(metadata.serializer);\n                instanceStructure.values.push(serializeFunctions[Constants.STRING_TYPE](getKeyName(instanceStructure.instance, key), keyInstance, serializer));\n            }\n            else {\n                if (keyInstance instanceof Array) {\n                    var struct = {\n                        id: uniqueId(),\n                        type: Constants.ARRAY_TYPE,\n                        instance: keyInstance,\n                        parentIndex: instanceIndex,\n                        values: [],\n                        key: getKeyName(instanceStructure.instance, key),\n                        visited: false\n                    };\n                    furtherSerializationStructures[struct.id] = struct;\n                }\n                else if (!isSimpleType(typeof keyInstance)) {\n                    var struct = {\n                        id: uniqueId(),\n                        type: Constants.OBJECT_TYPE,\n                        instance: keyInstance,\n                        parentIndex: instanceIndex,\n                        values: [],\n                        key: getKeyName(instanceStructure.instance, key),\n                        visited: false\n                    };\n                    furtherSerializationStructures[struct.id] = struct;\n                }\n                else {\n                    var serializer = serializers[typeof keyInstance];\n                    instanceStructure.values.push(serializeFunctions[typeof keyInstance](getKeyName(instanceStructure.instance, key), keyInstance, serializer));\n                }\n            }\n        }\n    });\n    return createArrayOfSerializationStructures(furtherSerializationStructures);\n};\n/**\n * Serialize any type with key value pairs\n */\nvar SerializeSimpleType = function (key, instance, serializer) {\n    var value = serializer.serialize(instance);\n    if (key !== undefined) {\n        return \"\\\"\" + key + \"\\\":\" + value;\n    }\n    else {\n        return value;\n    }\n};\nvar DateSerializer = (function () {\n    function DateSerializer() {\n        this.serialize = function (value) {\n            return value.getTime();\n        };\n    }\n    DateSerializer = __decorate([\n        CacheKey('DateSerializer'), \n        __metadata('design:paramtypes', [])\n    ], DateSerializer);\n    return DateSerializer;\n}());\nvar StringSerializer = (function () {\n    function StringSerializer() {\n        this.serialize = function (value) {\n            return JSON.stringify(value);\n        };\n    }\n    StringSerializer = __decorate([\n        CacheKey('StringSerializer'), \n        __metadata('design:paramtypes', [])\n    ], StringSerializer);\n    return StringSerializer;\n}());\nvar NumberSerializer = (function () {\n    function NumberSerializer() {\n        this.serialize = function (value) {\n            return value;\n        };\n    }\n    NumberSerializer = __decorate([\n        CacheKey('NumberSerializer'), \n        __metadata('design:paramtypes', [])\n    ], NumberSerializer);\n    return NumberSerializer;\n}());\nvar BooleanSerializer = (function () {\n    function BooleanSerializer() {\n        this.serialize = function (value) {\n            return value;\n        };\n    }\n    BooleanSerializer = __decorate([\n        CacheKey('BooleanSerializer'), \n        __metadata('design:paramtypes', [])\n    ], BooleanSerializer);\n    return BooleanSerializer;\n}());\n/**\n * Object to cache serializers\n */\nvar serializers = {};\nserializers[Constants.STRING_TYPE] = new StringSerializer();\nserializers[Constants.NUMBER_TYPE] = new NumberSerializer();\nserializers[Constants.DATE_TYPE] = new DateSerializer();\nserializers[Constants.BOOLEAN_TYPE] = new BooleanSerializer();\nserializers[Constants.STRING_TYPE_LOWERCASE] = serializers[Constants.STRING_TYPE];\nserializers[Constants.NUMBER_TYPE_LOWERCASE] = serializers[Constants.NUMBER_TYPE];\nserializers[Constants.DATE_TYPE_LOWERCASE] = serializers[Constants.DATE_TYPE];\nserializers[Constants.BOOLEAN_TYPE_LOWERCASE] = serializers[Constants.BOOLEAN_TYPE];\n/**\n * Checks to see if the serializer already exists or not.\n * If not, creates a new one and caches it, returns the\n * cached instance otherwise.\n */\nvar getOrCreateSerializer = function (type) {\n    return getCachedType(type, serializers);\n};\nvar serializeFunctions = [];\nserializeFunctions[Constants.STRING_TYPE] = SerializeSimpleType;\nserializeFunctions[Constants.NUMBER_TYPE] = SerializeSimpleType;\nserializeFunctions[Constants.BOOLEAN_TYPE] = SerializeSimpleType;\nserializeFunctions[Constants.DATE_TYPE] = SerializeSimpleType;\nserializeFunctions[Constants.ARRAY_TYPE] = SerializeArrayType;\nserializeFunctions[Constants.OBJECT_TYPE] = SerializeObjectType;\nserializeFunctions[Constants.STRING_TYPE_LOWERCASE] = SerializeSimpleType;\nserializeFunctions[Constants.NUMBER_TYPE_LOWERCASE] = SerializeSimpleType;\nserializeFunctions[Constants.BOOLEAN_TYPE_LOWERCASE] = SerializeSimpleType;\nserializeFunctions[Constants.DATE_TYPE_LOWERCASE] = SerializeSimpleType;\nserializeFunctions[Constants.ARRAY_TYPE_LOWERCASE] = SerializeArrayType;\nserializeFunctions[Constants.OBJECT_TYPE_LOWERCASE] = SerializeObjectType;\nvar uniqueId = function () {\n    return Math.random() + \"-\" + Date.now();\n};\n\n(function (ObjectMapper) {\n    /**\n     * Deserializes an array of object types with the passed on JSON data.\n     */\n    ObjectMapper.deserializeArray = function (type, json) {\n        var ObjectsArrayParent = (function () {\n            function ObjectsArrayParent() {\n                this.instances = undefined;\n            }\n            return ObjectsArrayParent;\n        }());\n        var parent = new ObjectsArrayParent();\n        runDeserialization(conversionFunctions[Constants.ARRAY_TYPE](parent, 'instances', type, json, undefined));\n        return parent.instances;\n    };\n    /**\n     * Deserializes a Object type with the passed on JSON data.\n     */\n    ObjectMapper.deserialize = function (type, json) {\n        var dtoInstance = new type();\n        var conversionFunctionStructure = {\n            functionName: Constants.OBJECT_TYPE,\n            instance: dtoInstance,\n            json: json,\n        };\n        runDeserialization([conversionFunctionStructure]);\n        return dtoInstance;\n    };\n    var runDeserialization = function (conversionFunctionStructures) {\n        var converstionFunctionsArray = [];\n        conversionFunctionStructures.forEach(function (struct) {\n            converstionFunctionsArray.push(struct);\n        });\n        var conversionFunctionStructure = converstionFunctionsArray[0];\n        // tslint:disable-next-line:triple-equals\n        while (conversionFunctionStructure != undefined) {\n            var stackEntries = conversionFunctions[conversionFunctionStructure.functionName](conversionFunctionStructure.instance, conversionFunctionStructure.instanceKey, conversionFunctionStructure.type, conversionFunctionStructure.json, conversionFunctionStructure.jsonKey);\n            stackEntries.forEach(function (structure) {\n                converstionFunctionsArray.push(structure);\n            });\n            conversionFunctionStructure = converstionFunctionsArray.pop();\n        }\n    };\n    /**\n     * Serializes an object instance to JSON string.\n     */\n    ObjectMapper.serialize = function (obj) {\n        var stack = [];\n        var struct = {\n            id: undefined,\n            type: Array.isArray(obj) === true ? Constants.ARRAY_TYPE : Constants.OBJECT_TYPE,\n            instance: obj,\n            parentIndex: undefined,\n            values: [],\n            key: undefined,\n            visited: false\n        };\n        stack.push(struct);\n        do {\n            var instanceStruct = stack[stack.length - 1];\n            var parentStruct = stack[stack.length > 1 ? instanceStruct.parentIndex : 0];\n            if (instanceStruct.visited) {\n                mergeObjectOrArrayValuesAndCopyToParents(instanceStruct, parentStruct);\n                stack.pop();\n            }\n            else {\n                var moreStructures = serializeFunctions[instanceStruct.type](parentStruct, instanceStruct, stack.length - 1);\n                if (moreStructures.length > 0) {\n                    var index = moreStructures.length;\n                    while (--index >= 0) {\n                        stack.push(moreStructures[index]);\n                    }\n                }\n                else {\n                    if (stack.length > 1) {\n                        mergeObjectOrArrayValuesAndCopyToParents(instanceStruct, parentStruct);\n                    }\n                    stack.pop();\n                }\n            }\n        } while (stack.length > 1);\n        mergeObjectOrArrayValues(struct);\n        return struct.values[0];\n    };\n})(exports.ObjectMapper || (exports.ObjectMapper = {}));\n\nexports.JsonProperty = JsonProperty;\nexports.JsonConverstionError = JsonConverstionError;\nexports.CacheKey = CacheKey;\nexports.JsonIgnore = JsonIgnore;\nexports.DateSerializer = DateSerializer;\n//# sourceMappingURL=ObjectMapper.js.map\n","//////////////////////////////////////////////////////////////////////////////////\n///                                                                            ///\n///            reflect-metadata v0.1.13 @license Apache-2.0                    ///\n///                                                                            ///\n//////////////////////////////////////////////////////////////////////////////////\nimport \"reflect-metadata\";\n\n//////////////////////////////////////////////////////////////////////////////////\n///                                                                            ///\n///              json-object-mapper v1.7.1 @license MIT                        ///\n///                                                                            ///\n//////////////////////////////////////////////////////////////////////////////////\n\nexport { ObjectMapper, JsonIgnore } from \"json-object-mapper\";\n\n//////////////////////////////////////////////////////////////////////////////////\n///                                                                            ///\n///                     Riot v6.1.2, @license MIT                              ///\n///                                                                            ///\n//////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Convert a string from camel case to dash-case\n * @param   {string} string - probably a component tag name\n * @returns {string} component name normalized\n */\nfunction camelToDashCase(string) {\n  return string.replace(/([a-z])([A-Z])/g, \"$1-$2\").toLowerCase();\n}\n/**\n * Convert a string containing dashes to camel case\n * @param   {string} string - input string\n * @returns {string} my-string -> myString\n */\n\nfunction dashToCamelCase(string) {\n  return string.replace(/-(\\w)/g, (_, c) => c.toUpperCase());\n}\n/**\n * Get all the element attributes as object\n * @param   {HTMLElement} element - DOM node we want to parse\n * @returns {Object} all the attributes found as a key value pairs\n */\n\nfunction DOMattributesToObject(element) {\n  return Array.from(element.attributes).reduce((acc, attribute) => {\n    acc[dashToCamelCase(attribute.name)] = attribute.value;\n    return acc;\n  }, {});\n}\n/**\n * Move all the child nodes from a source tag to another\n * @param   {HTMLElement} source - source node\n * @param   {HTMLElement} target - target node\n * @returns {undefined} it's a void method \\_()_/\n */\n// Ignore this helper because it's needed only for svg tags\n\nfunction moveChildren(source, target) {\n  if (source.firstChild) {\n    target.appendChild(source.firstChild);\n    moveChildren(source, target);\n  }\n}\n/**\n * Remove the child nodes from any DOM node\n * @param   {HTMLElement} node - target node\n * @returns {undefined}\n */\n\nfunction cleanNode(node) {\n  clearChildren(node.childNodes);\n}\n/**\n * Clear multiple children in a node\n * @param   {HTMLElement[]} children - direct children nodes\n * @returns {undefined}\n */\n\nfunction clearChildren(children) {\n  Array.from(children).forEach(removeChild);\n}\n/**\n * Remove a node\n * @param {HTMLElement}node - node to remove\n * @returns {undefined}\n */\n\nconst removeChild = (node) =>\n  node && node.parentNode && node.parentNode.removeChild(node);\n/**\n * Insert before a node\n * @param {HTMLElement} newNode - node to insert\n * @param {HTMLElement} refNode - ref child\n * @returns {undefined}\n */\n\nconst insertBefore = (newNode, refNode) =>\n  refNode &&\n  refNode.parentNode &&\n  refNode.parentNode.insertBefore(newNode, refNode);\n/**\n * Replace a node\n * @param {HTMLElement} newNode - new node to add to the DOM\n * @param {HTMLElement} replaced - node to replace\n * @returns {undefined}\n */\n\nconst replaceChild = (newNode, replaced) =>\n  replaced &&\n  replaced.parentNode &&\n  replaced.parentNode.replaceChild(newNode, replaced); // Riot.js constants that can be used across more modules\n\nconst COMPONENTS_IMPLEMENTATION_MAP$1 = new Map(),\n  DOM_COMPONENT_INSTANCE_PROPERTY$1 = Symbol(\"riot-component\"),\n  PLUGINS_SET$1 = new Set(),\n  IS_DIRECTIVE = \"is\",\n  MOUNT_METHOD_KEY = \"mount\",\n  UPDATE_METHOD_KEY = \"update\",\n  UNMOUNT_METHOD_KEY = \"unmount\",\n  SHOULD_UPDATE_KEY = \"shouldUpdate\",\n  ON_BEFORE_MOUNT_KEY = \"onBeforeMount\",\n  ON_MOUNTED_KEY = \"onMounted\",\n  ON_BEFORE_UPDATE_KEY = \"onBeforeUpdate\",\n  ON_UPDATED_KEY = \"onUpdated\",\n  ON_BEFORE_UNMOUNT_KEY = \"onBeforeUnmount\",\n  ON_UNMOUNTED_KEY = \"onUnmounted\",\n  PROPS_KEY = \"props\",\n  STATE_KEY = \"state\",\n  SLOTS_KEY = \"slots\",\n  ROOT_KEY = \"root\",\n  IS_PURE_SYMBOL = Symbol(\"pure\"),\n  IS_COMPONENT_UPDATING = Symbol(\"is_updating\"),\n  PARENT_KEY_SYMBOL = Symbol(\"parent\"),\n  ATTRIBUTES_KEY_SYMBOL = Symbol(\"attributes\"),\n  TEMPLATE_KEY_SYMBOL = Symbol(\"template\");\nconst EACH = 0;\nconst IF = 1;\nconst SIMPLE = 2;\nconst TAG = 3;\nconst SLOT = 4;\nvar bindingTypes = {\n  EACH,\n  IF,\n  SIMPLE,\n  TAG,\n  SLOT,\n};\nconst ATTRIBUTE = 0;\nconst EVENT = 1;\nconst TEXT = 2;\nconst VALUE = 3;\nvar expressionTypes = {\n  ATTRIBUTE,\n  EVENT,\n  TEXT,\n  VALUE,\n};\nconst HEAD_SYMBOL = Symbol(\"head\");\nconst TAIL_SYMBOL = Symbol(\"tail\");\n/**\n * Create the <template> fragments text nodes\n * @return {Object} {{head: Text, tail: Text}}\n */\n\nfunction createHeadTailPlaceholders() {\n  const head = document.createTextNode(\"\");\n  const tail = document.createTextNode(\"\");\n  head[HEAD_SYMBOL] = true;\n  tail[TAIL_SYMBOL] = true;\n  return {\n    head,\n    tail,\n  };\n}\n/**\n * Create the template meta object in case of <template> fragments\n * @param   {TemplateChunk} componentTemplate - template chunk object\n * @returns {Object} the meta property that will be passed to the mount function of the TemplateChunk\n */\n\nfunction createTemplateMeta(componentTemplate) {\n  const fragment = componentTemplate.dom.cloneNode(true);\n  const { head, tail } = createHeadTailPlaceholders();\n  return {\n    avoidDOMInjection: true,\n    fragment,\n    head,\n    tail,\n    children: [head, ...Array.from(fragment.childNodes), tail],\n  };\n}\n/**\n * Helper function to set an immutable property\n * @param   {Object} source - object where the new property will be set\n * @param   {string} key - object key where the new property will be stored\n * @param   {*} value - value of the new property\n * @param   {Object} options - set the property overriding the default options\n * @returns {Object} - the original object modified\n */\n\nfunction defineProperty(source, key, value, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  /* eslint-disable fp/no-mutating-methods */\n\n  Object.defineProperty(\n    source,\n    key,\n    Object.assign(\n      {\n        value,\n        enumerable: false,\n        writable: false,\n        configurable: true,\n      },\n      options\n    )\n  );\n  /* eslint-enable fp/no-mutating-methods */\n\n  return source;\n}\n/**\n * Define multiple properties on a target object\n * @param   {Object} source - object where the new properties will be set\n * @param   {Object} properties - object containing as key pair the key + value properties\n * @param   {Object} options - set the property overriding the default options\n * @returns {Object} the original object modified\n */\n\nfunction defineProperties(source, properties, options) {\n  Object.entries(properties).forEach((_ref) => {\n    let [key, value] = _ref;\n    defineProperty(source, key, value, options);\n  });\n  return source;\n}\n/**\n * Define default properties if they don't exist on the source object\n * @param   {Object} source - object that will receive the default properties\n * @param   {Object} defaults - object containing additional optional keys\n * @returns {Object} the original object received enhanced\n */\n\nfunction defineDefaults(source, defaults) {\n  Object.entries(defaults).forEach((_ref2) => {\n    let [key, value] = _ref2;\n    if (!source[key]) source[key] = value;\n  });\n  return source;\n}\n/**\n * Quick type checking\n * @param   {*} element - anything\n * @param   {string} type - type definition\n * @returns {boolean} true if the type corresponds\n */\n\nfunction checkType(element, type) {\n  return typeof element === type;\n}\n/**\n * Check if an element is part of an svg\n * @param   {HTMLElement}  el - element to check\n * @returns {boolean} true if we are in an svg context\n */\n\nfunction isSvg(el) {\n  const owner = el.ownerSVGElement;\n  return !!owner || owner === null;\n}\n/**\n * Check if an element is a template tag\n * @param   {HTMLElement}  el - element to check\n * @returns {boolean} true if it's a <template>\n */\n\nfunction isTemplate(el) {\n  return el.tagName.toLowerCase() === \"template\";\n}\n/**\n * Check that will be passed if its argument is a function\n * @param   {*} value - value to check\n * @returns {boolean} - true if the value is a function\n */\n\nfunction isFunction(value) {\n  return checkType(value, \"function\");\n}\n/**\n * Check if a value is a Boolean\n * @param   {*}  value - anything\n * @returns {boolean} true only for the value is a boolean\n */\n\nfunction isBoolean(value) {\n  return checkType(value, \"boolean\");\n}\n/**\n * Check if a value is an Object\n * @param   {*}  value - anything\n * @returns {boolean} true only for the value is an object\n */\n\nfunction isObject(value) {\n  return !isNil(value) && value.constructor === Object;\n}\n/**\n * Check if a value is null or undefined\n * @param   {*}  value - anything\n * @returns {boolean} true only for the 'undefined' and 'null' types\n */\n\nfunction isNil(value) {\n  return value === null || value === undefined;\n}\n/**\n * ISC License\n *\n * Copyright (c) 2020, Andrea Giammarchi, @WebReflection\n *\n * Permission to use, copy, modify, and/or distribute this software for any\n * purpose with or without fee is hereby granted, provided that the above\n * copyright notice and this permission notice appear in all copies.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\n * REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\n * AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\n * INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\n * LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE\n * OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\n * PERFORMANCE OF THIS SOFTWARE.\n */\n// fork of https://github.com/WebReflection/udomdiff version 1.1.0\n// due to https://github.com/WebReflection/udomdiff/pull/2\n\n/* eslint-disable */\n\n/**\n * @param {Node[]} a The list of current/live children\n * @param {Node[]} b The list of future children\n * @param {(entry: Node, action: number) => Node} get\n * The callback invoked per each entry related DOM operation.\n * @param {Node} [before] The optional node used as anchor to insert before.\n * @returns {Node[]} The same list of future children.\n */\n\nvar udomdiff = (a, b, get, before) => {\n  const bLength = b.length;\n  let aEnd = a.length;\n  let bEnd = bLength;\n  let aStart = 0;\n  let bStart = 0;\n  let map = null;\n\n  while (aStart < aEnd || bStart < bEnd) {\n    // append head, tail, or nodes in between: fast path\n    if (aEnd === aStart) {\n      // we could be in a situation where the rest of nodes that\n      // need to be added are not at the end, and in such case\n      // the node to `insertBefore`, if the index is more than 0\n      // must be retrieved, otherwise it's gonna be the first item.\n      const node =\n        bEnd < bLength\n          ? bStart\n            ? get(b[bStart - 1], -0).nextSibling\n            : get(b[bEnd - bStart], 0)\n          : before;\n\n      while (bStart < bEnd) insertBefore(get(b[bStart++], 1), node);\n    } // remove head or tail: fast path\n    else if (bEnd === bStart) {\n      while (aStart < aEnd) {\n        // remove the node only if it's unknown or not live\n        if (!map || !map.has(a[aStart])) removeChild(get(a[aStart], -1));\n        aStart++;\n      }\n    } // same node: fast path\n    else if (a[aStart] === b[bStart]) {\n      aStart++;\n      bStart++;\n    } // same tail: fast path\n    else if (a[aEnd - 1] === b[bEnd - 1]) {\n      aEnd--;\n      bEnd--;\n    } // The once here single last swap \"fast path\" has been removed in v1.1.0\n    // https://github.com/WebReflection/udomdiff/blob/single-final-swap/esm/index.js#L69-L85\n    // reverse swap: also fast path\n    else if (a[aStart] === b[bEnd - 1] && b[bStart] === a[aEnd - 1]) {\n      // this is a \"shrink\" operation that could happen in these cases:\n      // [1, 2, 3, 4, 5]\n      // [1, 4, 3, 2, 5]\n      // or asymmetric too\n      // [1, 2, 3, 4, 5]\n      // [1, 2, 3, 5, 6, 4]\n      const node = get(a[--aEnd], -1).nextSibling;\n      insertBefore(get(b[bStart++], 1), get(a[aStart++], -1).nextSibling);\n      insertBefore(get(b[--bEnd], 1), node); // mark the future index as identical (yeah, it's dirty, but cheap )\n      // The main reason to do this, is that when a[aEnd] will be reached,\n      // the loop will likely be on the fast path, as identical to b[bEnd].\n      // In the best case scenario, the next loop will skip the tail,\n      // but in the worst one, this node will be considered as already\n      // processed, bailing out pretty quickly from the map index check\n\n      a[aEnd] = b[bEnd];\n    } // map based fallback, \"slow\" path\n    else {\n      // the map requires an O(bEnd - bStart) operation once\n      // to store all future nodes indexes for later purposes.\n      // In the worst case scenario, this is a full O(N) cost,\n      // and such scenario happens at least when all nodes are different,\n      // but also if both first and last items of the lists are different\n      if (!map) {\n        map = new Map();\n        let i = bStart;\n\n        while (i < bEnd) map.set(b[i], i++);\n      } // if it's a future node, hence it needs some handling\n\n      if (map.has(a[aStart])) {\n        // grab the index of such node, 'cause it might have been processed\n        const index = map.get(a[aStart]); // if it's not already processed, look on demand for the next LCS\n\n        if (bStart < index && index < bEnd) {\n          let i = aStart; // counts the amount of nodes that are the same in the future\n\n          let sequence = 1;\n\n          while (++i < aEnd && i < bEnd && map.get(a[i]) === index + sequence)\n            sequence++; // effort decision here: if the sequence is longer than replaces\n          // needed to reach such sequence, which would brings again this loop\n          // to the fast path, prepend the difference before a sequence,\n          // and move only the future list index forward, so that aStart\n          // and bStart will be aligned again, hence on the fast path.\n          // An example considering aStart and bStart are both 0:\n          // a: [1, 2, 3, 4]\n          // b: [7, 1, 2, 3, 6]\n          // this would place 7 before 1 and, from that time on, 1, 2, and 3\n          // will be processed at zero cost\n\n          if (sequence > index - bStart) {\n            const node = get(a[aStart], 0);\n\n            while (bStart < index) insertBefore(get(b[bStart++], 1), node);\n          } // if the effort wasn't good enough, fallback to a replace,\n          // moving both source and target indexes forward, hoping that some\n          // similar node will be found later on, to go back to the fast path\n          else {\n            replaceChild(get(b[bStart++], 1), get(a[aStart++], -1));\n          }\n        } // otherwise move the source forward, 'cause there's nothing to do\n        else aStart++;\n      } // this node has no meaning in the future list, so it's more than safe\n      // to remove it, and check the next live node out instead, meaning\n      // that only the live list index should be forwarded\n      else removeChild(get(a[aStart++], -1));\n    }\n  }\n\n  return b;\n};\n\nconst UNMOUNT_SCOPE = Symbol(\"unmount\");\nconst EachBinding = {\n  // dynamic binding properties\n  // childrenMap: null,\n  // node: null,\n  // root: null,\n  // condition: null,\n  // evaluate: null,\n  // template: null,\n  // isTemplateTag: false,\n  nodes: [],\n\n  // getKey: null,\n  // indexName: null,\n  // itemName: null,\n  // afterPlaceholder: null,\n  // placeholder: null,\n  // API methods\n  mount(scope, parentScope) {\n    return this.update(scope, parentScope);\n  },\n\n  update(scope, parentScope) {\n    const { placeholder, nodes, childrenMap } = this;\n    const collection = scope === UNMOUNT_SCOPE ? null : this.evaluate(scope);\n    const items = collection ? Array.from(collection) : []; // prepare the diffing\n\n    const { newChildrenMap, batches, futureNodes } = createPatch(\n      items,\n      scope,\n      parentScope,\n      this\n    ); // patch the DOM only if there are new nodes\n\n    udomdiff(\n      nodes,\n      futureNodes,\n      patch(Array.from(childrenMap.values()), parentScope),\n      placeholder\n    ); // trigger the mounts and the updates\n\n    batches.forEach((fn) => fn()); // update the children map\n\n    this.childrenMap = newChildrenMap;\n    this.nodes = futureNodes;\n    return this;\n  },\n\n  unmount(scope, parentScope) {\n    this.update(UNMOUNT_SCOPE, parentScope);\n    return this;\n  },\n};\n/**\n * Patch the DOM while diffing\n * @param   {any[]} redundant - list of all the children (template, nodes, context) added via each\n * @param   {*} parentScope - scope of the parent template\n * @returns {Function} patch function used by domdiff\n */\n\nfunction patch(redundant, parentScope) {\n  return (item, info) => {\n    if (info < 0) {\n      // get the last element added to the childrenMap saved previously\n      const element = redundant[redundant.length - 1];\n\n      if (element) {\n        // get the nodes and the template in stored in the last child of the childrenMap\n        const { template, nodes, context } = element; // remove the last node (notice <template> tags might have more children nodes)\n\n        nodes.pop(); // notice that we pass null as last argument because\n        // the root node and its children will be removed by domdiff\n\n        if (!nodes.length) {\n          // we have cleared all the children nodes and we can unmount this template\n          redundant.pop();\n          template.unmount(context, parentScope, null);\n        }\n      }\n    }\n\n    return item;\n  };\n}\n/**\n * Check whether a template must be filtered from a loop\n * @param   {Function} condition - filter function\n * @param   {Object} context - argument passed to the filter function\n * @returns {boolean} true if this item should be skipped\n */\n\nfunction mustFilterItem(condition, context) {\n  return condition ? !condition(context) : false;\n}\n/**\n * Extend the scope of the looped template\n * @param   {Object} scope - current template scope\n * @param   {Object} options - options\n * @param   {string} options.itemName - key to identify the looped item in the new context\n * @param   {string} options.indexName - key to identify the index of the looped item\n * @param   {number} options.index - current index\n * @param   {*} options.item - collection item looped\n * @returns {Object} enhanced scope object\n */\n\nfunction extendScope(scope, _ref) {\n  let { itemName, indexName, index, item } = _ref;\n  defineProperty(scope, itemName, item);\n  if (indexName) defineProperty(scope, indexName, index);\n  return scope;\n}\n/**\n * Loop the current template items\n * @param   {Array} items - expression collection value\n * @param   {*} scope - template scope\n * @param   {*} parentScope - scope of the parent template\n * @param   {EachBinding} binding - each binding object instance\n * @returns {Object} data\n * @returns {Map} data.newChildrenMap - a Map containing the new children template structure\n * @returns {Array} data.batches - array containing the template lifecycle functions to trigger\n * @returns {Array} data.futureNodes - array containing the nodes we need to diff\n */\n\nfunction createPatch(items, scope, parentScope, binding) {\n  const {\n    condition,\n    template,\n    childrenMap,\n    itemName,\n    getKey,\n    indexName,\n    root,\n    isTemplateTag,\n  } = binding;\n  const newChildrenMap = new Map();\n  const batches = [];\n  const futureNodes = [];\n  items.forEach((item, index) => {\n    const context = extendScope(Object.create(scope), {\n      itemName,\n      indexName,\n      index,\n      item,\n    });\n    const key = getKey ? getKey(context) : index;\n    const oldItem = childrenMap.get(key);\n    const nodes = [];\n\n    if (mustFilterItem(condition, context)) {\n      return;\n    }\n\n    const mustMount = !oldItem;\n    const componentTemplate = oldItem ? oldItem.template : template.clone();\n    const el = componentTemplate.el || root.cloneNode();\n    const meta =\n      isTemplateTag && mustMount\n        ? createTemplateMeta(componentTemplate)\n        : componentTemplate.meta;\n\n    if (mustMount) {\n      batches.push(() =>\n        componentTemplate.mount(el, context, parentScope, meta)\n      );\n    } else {\n      batches.push(() => componentTemplate.update(context, parentScope));\n    } // create the collection of nodes to update or to add\n    // in case of template tags we need to add all its children nodes\n\n    if (isTemplateTag) {\n      nodes.push(...meta.children);\n    } else {\n      nodes.push(el);\n    } // delete the old item from the children map\n\n    childrenMap.delete(key);\n    futureNodes.push(...nodes); // update the children map\n\n    newChildrenMap.set(key, {\n      nodes,\n      template: componentTemplate,\n      context,\n      index,\n    });\n  });\n  return {\n    newChildrenMap,\n    batches,\n    futureNodes,\n  };\n}\n\nfunction create$6(node, _ref2) {\n  let { evaluate, condition, itemName, indexName, getKey, template } = _ref2;\n  const placeholder = document.createTextNode(\"\");\n  const root = node.cloneNode();\n  insertBefore(placeholder, node);\n  removeChild(node);\n  return Object.assign({}, EachBinding, {\n    childrenMap: new Map(),\n    node,\n    root,\n    condition,\n    evaluate,\n    isTemplateTag: isTemplate(root),\n    template: template.createDOM(node),\n    getKey,\n    indexName,\n    itemName,\n    placeholder,\n  });\n}\n/**\n * Binding responsible for the `if` directive\n */\n\nconst IfBinding = {\n  // dynamic binding properties\n  // node: null,\n  // evaluate: null,\n  // isTemplateTag: false,\n  // placeholder: null,\n  // template: null,\n  // API methods\n  mount(scope, parentScope) {\n    return this.update(scope, parentScope);\n  },\n\n  update(scope, parentScope) {\n    const value = !!this.evaluate(scope);\n    const mustMount = !this.value && value;\n    const mustUnmount = this.value && !value;\n\n    const mount = () => {\n      const pristine = this.node.cloneNode();\n      insertBefore(pristine, this.placeholder);\n      this.template = this.template.clone();\n      this.template.mount(pristine, scope, parentScope);\n    };\n\n    switch (true) {\n      case mustMount:\n        mount();\n        break;\n\n      case mustUnmount:\n        this.unmount(scope);\n        break;\n\n      default:\n        if (value) this.template.update(scope, parentScope);\n    }\n\n    this.value = value;\n    return this;\n  },\n\n  unmount(scope, parentScope) {\n    this.template.unmount(scope, parentScope, true);\n    return this;\n  },\n};\n\nfunction create$5(node, _ref) {\n  let { evaluate, template } = _ref;\n  const placeholder = document.createTextNode(\"\");\n  insertBefore(placeholder, node);\n  removeChild(node);\n  return Object.assign({}, IfBinding, {\n    node,\n    evaluate,\n    placeholder,\n    template: template.createDOM(node),\n  });\n}\n/**\n * Throw an error with a descriptive message\n * @param   { string } message - error message\n * @returns { undefined } hoppla.. at this point the program should stop working\n */\n\nfunction panic(message) {\n  throw new Error(message);\n}\n/**\n * Returns the memoized (cached) function.\n * // borrowed from https://www.30secondsofcode.org/js/s/memoize\n * @param {Function} fn - function to memoize\n * @returns {Function} memoize function\n */\n\nfunction memoize(fn) {\n  const cache = new Map();\n\n  const cached = (val) => {\n    return cache.has(val)\n      ? cache.get(val)\n      : cache.set(val, fn.call(this, val)) && cache.get(val);\n  };\n\n  cached.cache = cache;\n  return cached;\n}\n/**\n * Evaluate a list of attribute expressions\n * @param   {Array} attributes - attribute expressions generated by the riot compiler\n * @returns {Object} key value pairs with the result of the computation\n */\n\nfunction evaluateAttributeExpressions(attributes) {\n  return attributes.reduce((acc, attribute) => {\n    const { value, type } = attribute;\n\n    switch (true) {\n      // spread attribute\n      case !attribute.name && type === ATTRIBUTE:\n        return Object.assign({}, acc, value);\n      // value attribute\n\n      case type === VALUE:\n        acc.value = attribute.value;\n        break;\n      // normal attributes\n\n      default:\n        acc[dashToCamelCase(attribute.name)] = attribute.value;\n    }\n\n    return acc;\n  }, {});\n}\n\nconst ElementProto = typeof Element === \"undefined\" ? {} : Element.prototype;\nconst isNativeHtmlProperty = memoize((name) =>\n  ElementProto.hasOwnProperty(name)\n); // eslint-disable-line\n\n/**\n * Add all the attributes provided\n * @param   {HTMLElement} node - target node\n * @param   {Object} attributes - object containing the attributes names and values\n * @returns {undefined} sorry it's a void function :(\n */\n\nfunction setAllAttributes(node, attributes) {\n  Object.entries(attributes).forEach((_ref) => {\n    let [name, value] = _ref;\n    return attributeExpression(\n      node,\n      {\n        name,\n      },\n      value\n    );\n  });\n}\n/**\n * Remove all the attributes provided\n * @param   {HTMLElement} node - target node\n * @param   {Object} newAttributes - object containing all the new attribute names\n * @param   {Object} oldAttributes - object containing all the old attribute names\n * @returns {undefined} sorry it's a void function :(\n */\n\nfunction removeAllAttributes(node, newAttributes, oldAttributes) {\n  const newKeys = newAttributes ? Object.keys(newAttributes) : [];\n  Object.keys(oldAttributes)\n    .filter((name) => !newKeys.includes(name))\n    .forEach((attribute) => node.removeAttribute(attribute));\n}\n/**\n * Check whether the attribute value can be rendered\n * @param {*} value - expression value\n * @returns {boolean} true if we can render this attribute value\n */\n\nfunction canRenderAttribute(value) {\n  return value === true || [\"string\", \"number\"].includes(typeof value);\n}\n/**\n * Check whether the attribute should be removed\n * @param {*} value - expression value\n * @returns {boolean} boolean - true if the attribute can be removed}\n */\n\nfunction shouldRemoveAttribute(value) {\n  return !value && value !== 0;\n}\n/**\n * This methods handles the DOM attributes updates\n * @param   {HTMLElement} node - target node\n * @param   {Object} expression - expression object\n * @param   {string} expression.name - attribute name\n * @param   {*} value - new expression value\n * @param   {*} oldValue - the old expression cached value\n * @returns {undefined}\n */\n\nfunction attributeExpression(node, _ref2, value, oldValue) {\n  let { name } = _ref2; // is it a spread operator? {...attributes}\n\n  if (!name) {\n    if (oldValue) {\n      // remove all the old attributes\n      removeAllAttributes(node, value, oldValue);\n    } // is the value still truthy?\n\n    if (value) {\n      setAllAttributes(node, value);\n    }\n\n    return;\n  } // handle boolean attributes\n\n  if (\n    !isNativeHtmlProperty(name) &&\n    (isBoolean(value) || isObject(value) || isFunction(value))\n  ) {\n    node[name] = value;\n  }\n\n  if (shouldRemoveAttribute(value)) {\n    node.removeAttribute(name);\n  } else if (canRenderAttribute(value)) {\n    node.setAttribute(name, normalizeValue(name, value));\n  }\n}\n/**\n * Get the value as string\n * @param   {string} name - attribute name\n * @param   {*} value - user input value\n * @returns {string} input value as string\n */\n\nfunction normalizeValue(name, value) {\n  // be sure that expressions like selected={ true } will be always rendered as selected='selected'\n  return value === true ? name : value;\n}\n\nconst RE_EVENTS_PREFIX = /^on/;\n\nconst getCallbackAndOptions = (value) =>\n  Array.isArray(value) ? value : [value, false]; // see also https://medium.com/@WebReflection/dom-handleevent-a-cross-platform-standard-since-year-2000-5bf17287fd38\n\nconst EventListener = {\n  handleEvent(event) {\n    this[event.type](event);\n  },\n};\nconst ListenersWeakMap = new WeakMap();\n\nconst createListener = (node) => {\n  const listener = Object.create(EventListener);\n  ListenersWeakMap.set(node, listener);\n  return listener;\n};\n/**\n * Set a new event listener\n * @param   {HTMLElement} node - target node\n * @param   {Object} expression - expression object\n * @param   {string} expression.name - event name\n * @param   {*} value - new expression value\n * @returns {value} the callback just received\n */\n\nfunction eventExpression(node, _ref, value) {\n  let { name } = _ref;\n  const normalizedEventName = name.replace(RE_EVENTS_PREFIX, \"\");\n  const eventListener = ListenersWeakMap.get(node) || createListener(node);\n  const [callback, options] = getCallbackAndOptions(value);\n  const handler = eventListener[normalizedEventName];\n  const mustRemoveEvent = handler && !callback;\n  const mustAddEvent = callback && !handler;\n\n  if (mustRemoveEvent) {\n    node.removeEventListener(normalizedEventName, eventListener);\n  }\n\n  if (mustAddEvent) {\n    node.addEventListener(normalizedEventName, eventListener, options);\n  }\n\n  eventListener[normalizedEventName] = callback;\n}\n/**\n * Normalize the user value in order to render a empty string in case of falsy values\n * @param   {*} value - user input value\n * @returns {string} hopefully a string\n */\n\nfunction normalizeStringValue(value) {\n  return isNil(value) ? \"\" : value;\n}\n/**\n * Get the the target text node to update or create one from of a comment node\n * @param   {HTMLElement} node - any html element containing childNodes\n * @param   {number} childNodeIndex - index of the text node in the childNodes list\n * @returns {Text} the text node to update\n */\n\nconst getTextNode = (node, childNodeIndex) => {\n  const target = node.childNodes[childNodeIndex];\n\n  if (target.nodeType === Node.COMMENT_NODE) {\n    const textNode = document.createTextNode(\"\");\n    node.replaceChild(textNode, target);\n    return textNode;\n  }\n\n  return target;\n};\n/**\n * This methods handles a simple text expression update\n * @param   {HTMLElement} node - target node\n * @param   {Object} data - expression object\n * @param   {*} value - new expression value\n * @returns {undefined}\n */\n\nfunction textExpression(node, data, value) {\n  node.data = normalizeStringValue(value);\n}\n/**\n * This methods handles the input fileds value updates\n * @param   {HTMLElement} node - target node\n * @param   {Object} expression - expression object\n * @param   {*} value - new expression value\n * @returns {undefined}\n */\n\nfunction valueExpression(node, expression, value) {\n  node.value = normalizeStringValue(value);\n}\n\nvar expressions = {\n  [ATTRIBUTE]: attributeExpression,\n  [EVENT]: eventExpression,\n  [TEXT]: textExpression,\n  [VALUE]: valueExpression,\n};\nconst Expression = {\n  // Static props\n  // node: null,\n  // value: null,\n  // API methods\n\n  /**\n   * Mount the expression evaluating its initial value\n   * @param   {*} scope - argument passed to the expression to evaluate its current values\n   * @returns {Expression} self\n   */\n  mount(scope) {\n    // hopefully a pure function\n    this.value = this.evaluate(scope); // IO() DOM updates\n\n    apply(this, this.value);\n    return this;\n  },\n\n  /**\n   * Update the expression if its value changed\n   * @param   {*} scope - argument passed to the expression to evaluate its current values\n   * @returns {Expression} self\n   */\n  update(scope) {\n    // pure function\n    const value = this.evaluate(scope);\n\n    if (this.value !== value) {\n      // IO() DOM updates\n      apply(this, value);\n      this.value = value;\n    }\n\n    return this;\n  },\n\n  /**\n   * Expression teardown method\n   * @returns {Expression} self\n   */\n  unmount() {\n    // unmount only the event handling expressions\n    if (this.type === EVENT) apply(this, null);\n    return this;\n  },\n};\n/**\n * IO() function to handle the DOM updates\n * @param {Expression} expression - expression object\n * @param {*} value - current expression value\n * @returns {undefined}\n */\n\nfunction apply(expression, value) {\n  return expressions[expression.type](\n    expression.node,\n    expression,\n    value,\n    expression.value\n  );\n}\n\nfunction create$4(node, data) {\n  return Object.assign({}, Expression, data, {\n    node: data.type === TEXT ? getTextNode(node, data.childNodeIndex) : node,\n  });\n}\n/**\n * Create a flat object having as keys a list of methods that if dispatched will propagate\n * on the whole collection\n * @param   {Array} collection - collection to iterate\n * @param   {Array<string>} methods - methods to execute on each item of the collection\n * @param   {*} context - context returned by the new methods created\n * @returns {Object} a new object to simplify the the nested methods dispatching\n */\n\nfunction flattenCollectionMethods(collection, methods, context) {\n  return methods.reduce((acc, method) => {\n    return Object.assign({}, acc, {\n      [method]: (scope) => {\n        return collection.map((item) => item[method](scope)) && context;\n      },\n    });\n  }, {});\n}\n\nfunction create$3(node, _ref) {\n  let { expressions } = _ref;\n  return Object.assign(\n    {},\n    flattenCollectionMethods(\n      expressions.map((expression) => create$4(node, expression)),\n      [\"mount\", \"update\", \"unmount\"]\n    )\n  );\n}\n\nfunction extendParentScope(attributes, scope, parentScope) {\n  if (!attributes || !attributes.length) return parentScope;\n  const expressions = attributes.map((attr) =>\n    Object.assign({}, attr, {\n      value: attr.evaluate(scope),\n    })\n  );\n  return Object.assign(\n    Object.create(parentScope || null),\n    evaluateAttributeExpressions(expressions)\n  );\n} // this function is only meant to fix an edge case\n// https://github.com/riot/riot/issues/2842\n\nconst getRealParent = (scope, parentScope) =>\n  scope[PARENT_KEY_SYMBOL] || parentScope;\n\nconst SlotBinding = {\n  // dynamic binding properties\n  // node: null,\n  // name: null,\n  attributes: [],\n\n  // template: null,\n  getTemplateScope(scope, parentScope) {\n    return extendParentScope(this.attributes, scope, parentScope);\n  },\n\n  // API methods\n  mount(scope, parentScope) {\n    const templateData = scope.slots\n      ? scope.slots.find((_ref) => {\n          let { id } = _ref;\n          return id === this.name;\n        })\n      : false;\n    const { parentNode } = this.node;\n    const realParent = getRealParent(scope, parentScope);\n    this.template =\n      templateData &&\n      create(templateData.html, templateData.bindings).createDOM(parentNode);\n\n    if (this.template) {\n      cleanNode(this.node);\n      this.template.mount(\n        this.node,\n        this.getTemplateScope(scope, realParent),\n        realParent\n      );\n      this.template.children = Array.from(this.node.childNodes);\n    }\n\n    moveSlotInnerContent(this.node);\n    removeChild(this.node);\n    return this;\n  },\n\n  update(scope, parentScope) {\n    if (this.template) {\n      const realParent = getRealParent(scope, parentScope);\n      this.template.update(\n        this.getTemplateScope(scope, realParent),\n        realParent\n      );\n    }\n\n    return this;\n  },\n\n  unmount(scope, parentScope, mustRemoveRoot) {\n    if (this.template) {\n      this.template.unmount(\n        this.getTemplateScope(scope, parentScope),\n        null,\n        mustRemoveRoot\n      );\n    }\n\n    return this;\n  },\n};\n/**\n * Move the inner content of the slots outside of them\n * @param   {HTMLElement} slot - slot node\n * @returns {undefined} it's a void method \\_()_/\n */\n\nfunction moveSlotInnerContent(slot) {\n  const child = slot && slot.firstChild;\n  if (!child) return;\n  insertBefore(child, slot);\n  moveSlotInnerContent(slot);\n}\n/**\n * Create a single slot binding\n * @param   {HTMLElement} node - slot node\n * @param   {string} name - slot id\n * @param   {AttributeExpressionData[]} attributes - slot attributes\n * @returns {Object} Slot binding object\n */\n\nfunction createSlot(node, _ref2) {\n  let { name, attributes } = _ref2;\n  return Object.assign({}, SlotBinding, {\n    attributes,\n    node,\n    name,\n  });\n}\n/**\n * Create a new tag object if it was registered before, otherwise fallback to the simple\n * template chunk\n * @param   {Function} component - component factory function\n * @param   {Array<Object>} slots - array containing the slots markup\n * @param   {Array} attributes - dynamic attributes that will be received by the tag element\n * @returns {TagImplementation|TemplateChunk} a tag implementation or a template chunk as fallback\n */\n\nfunction getTag(component, slots, attributes) {\n  if (slots === void 0) {\n    slots = [];\n  }\n\n  if (attributes === void 0) {\n    attributes = [];\n  } // if this tag was registered before we will return its implementation\n\n  if (component) {\n    return component({\n      slots,\n      attributes,\n    });\n  } // otherwise we return a template chunk\n\n  return create(slotsToMarkup(slots), [\n    ...slotBindings(slots),\n    {\n      // the attributes should be registered as binding\n      // if we fallback to a normal template chunk\n      expressions: attributes.map((attr) => {\n        return Object.assign(\n          {\n            type: ATTRIBUTE,\n          },\n          attr\n        );\n      }),\n    },\n  ]);\n}\n/**\n * Merge all the slots bindings into a single array\n * @param   {Array<Object>} slots - slots collection\n * @returns {Array<Bindings>} flatten bindings array\n */\n\nfunction slotBindings(slots) {\n  return slots.reduce((acc, _ref) => {\n    let { bindings } = _ref;\n    return acc.concat(bindings);\n  }, []);\n}\n/**\n * Merge all the slots together in a single markup string\n * @param   {Array<Object>} slots - slots collection\n * @returns {string} markup of all the slots in a single string\n */\n\nfunction slotsToMarkup(slots) {\n  return slots.reduce((acc, slot) => {\n    return acc + slot.html;\n  }, \"\");\n}\n\nconst TagBinding = {\n  // dynamic binding properties\n  // node: null,\n  // evaluate: null,\n  // name: null,\n  // slots: null,\n  // tag: null,\n  // attributes: null,\n  // getComponent: null,\n  mount(scope) {\n    return this.update(scope);\n  },\n\n  update(scope, parentScope) {\n    const name = this.evaluate(scope); // simple update\n\n    if (name && name === this.name) {\n      this.tag.update(scope);\n    } else {\n      // unmount the old tag if it exists\n      this.unmount(scope, parentScope, true); // mount the new tag\n\n      this.name = name;\n      this.tag = getTag(this.getComponent(name), this.slots, this.attributes);\n      this.tag.mount(this.node, scope);\n    }\n\n    return this;\n  },\n\n  unmount(scope, parentScope, keepRootTag) {\n    if (this.tag) {\n      // keep the root tag\n      this.tag.unmount(keepRootTag);\n    }\n\n    return this;\n  },\n};\n\nfunction create$2(node, _ref2) {\n  let { evaluate, getComponent, slots, attributes } = _ref2;\n  return Object.assign({}, TagBinding, {\n    node,\n    evaluate,\n    slots,\n    attributes,\n    getComponent,\n  });\n}\n\nvar bindings = {\n  [IF]: create$5,\n  [SIMPLE]: create$3,\n  [EACH]: create$6,\n  [TAG]: create$2,\n  [SLOT]: createSlot,\n};\n/**\n * Text expressions in a template tag will get childNodeIndex value normalized\n * depending on the position of the <template> tag offset\n * @param   {Expression[]} expressions - riot expressions array\n * @param   {number} textExpressionsOffset - offset of the <template> tag\n * @returns {Expression[]} expressions containing the text expressions normalized\n */\n\nfunction fixTextExpressionsOffset(expressions, textExpressionsOffset) {\n  return expressions.map((e) =>\n    e.type === TEXT\n      ? Object.assign({}, e, {\n          childNodeIndex: e.childNodeIndex + textExpressionsOffset,\n        })\n      : e\n  );\n}\n/**\n * Bind a new expression object to a DOM node\n * @param   {HTMLElement} root - DOM node where to bind the expression\n * @param   {TagBindingData} binding - binding data\n * @param   {number|null} templateTagOffset - if it's defined we need to fix the text expressions childNodeIndex offset\n * @returns {Binding} Binding object\n */\n\nfunction create$1(root, binding, templateTagOffset) {\n  const { selector, type, redundantAttribute, expressions } = binding; // find the node to apply the bindings\n\n  const node = selector ? root.querySelector(selector) : root; // remove eventually additional attributes created only to select this node\n\n  if (redundantAttribute) node.removeAttribute(redundantAttribute);\n  const bindingExpressions = expressions || []; // init the binding\n\n  return (bindings[type] || bindings[SIMPLE])(\n    node,\n    Object.assign({}, binding, {\n      expressions:\n        templateTagOffset && !selector\n          ? fixTextExpressionsOffset(bindingExpressions, templateTagOffset)\n          : bindingExpressions,\n    })\n  );\n}\n\nfunction createHTMLTree(html, root) {\n  const template = isTemplate(root) ? root : document.createElement(\"template\");\n  template.innerHTML = html;\n  return template.content;\n} // for svg nodes we need a bit more work\n\nfunction createSVGTree(html, container) {\n  // create the SVGNode\n  const svgNode = container.ownerDocument.importNode(\n    new window.DOMParser().parseFromString(\n      `<svg xmlns=\"http://www.w3.org/2000/svg\">${html}</svg>`,\n      \"application/xml\"\n    ).documentElement,\n    true\n  );\n  return svgNode;\n}\n/**\n * Create the DOM that will be injected\n * @param {Object} root - DOM node to find out the context where the fragment will be created\n * @param   {string} html - DOM to create as string\n * @returns {HTMLDocumentFragment|HTMLElement} a new html fragment\n */\n\nfunction createDOMTree(root, html) {\n  if (isSvg(root)) return createSVGTree(html, root);\n  return createHTMLTree(html, root);\n}\n/**\n * Inject the DOM tree into a target node\n * @param   {HTMLElement} el - target element\n * @param   {DocumentFragment|SVGElement} dom - dom tree to inject\n * @returns {undefined}\n */\n\nfunction injectDOM(el, dom) {\n  switch (true) {\n    case isSvg(el):\n      moveChildren(dom, el);\n      break;\n\n    case isTemplate(el):\n      el.parentNode.replaceChild(dom, el);\n      break;\n\n    default:\n      el.appendChild(dom);\n  }\n}\n/**\n * Create the Template DOM skeleton\n * @param   {HTMLElement} el - root node where the DOM will be injected\n * @param   {string|HTMLElement} html - HTML markup or HTMLElement that will be injected into the root node\n * @returns {?DocumentFragment} fragment that will be injected into the root node\n */\n\nfunction createTemplateDOM(el, html) {\n  return html && (typeof html === \"string\" ? createDOMTree(el, html) : html);\n}\n/**\n * Get the offset of the <template> tag\n * @param {HTMLElement} parentNode - template tag parent node\n * @param {HTMLElement} el - the template tag we want to render\n * @param   {Object} meta - meta properties needed to handle the <template> tags in loops\n * @returns {number} offset of the <template> tag calculated from its siblings DOM nodes\n */\n\nfunction getTemplateTagOffset(parentNode, el, meta) {\n  const siblings = Array.from(parentNode.childNodes);\n  return Math.max(siblings.indexOf(el), siblings.indexOf(meta.head) + 1, 0);\n}\n/**\n * Template Chunk model\n * @type {Object}\n */\n\nconst TemplateChunk = Object.freeze({\n  // Static props\n  // bindings: null,\n  // bindingsData: null,\n  // html: null,\n  // isTemplateTag: false,\n  // fragment: null,\n  // children: null,\n  // dom: null,\n  // el: null,\n\n  /**\n   * Create the template DOM structure that will be cloned on each mount\n   * @param   {HTMLElement} el - the root node\n   * @returns {TemplateChunk} self\n   */\n  createDOM(el) {\n    // make sure that the DOM gets created before cloning the template\n    this.dom =\n      this.dom ||\n      createTemplateDOM(el, this.html) ||\n      document.createDocumentFragment();\n    return this;\n  },\n\n  // API methods\n\n  /**\n   * Attach the template to a DOM node\n   * @param   {HTMLElement} el - target DOM node\n   * @param   {*} scope - template data\n   * @param   {*} parentScope - scope of the parent template tag\n   * @param   {Object} meta - meta properties needed to handle the <template> tags in loops\n   * @returns {TemplateChunk} self\n   */\n  mount(el, scope, parentScope, meta) {\n    if (meta === void 0) {\n      meta = {};\n    }\n\n    if (!el)\n      throw new Error(\n        \"Please provide DOM node to mount properly your template\"\n      );\n    if (this.el) this.unmount(scope); // <template> tags require a bit more work\n    // the template fragment might be already created via meta outside of this call\n\n    const { fragment, children, avoidDOMInjection } = meta; // <template> bindings of course can not have a root element\n    // so we check the parent node to set the query selector bindings\n\n    const { parentNode } = children ? children[0] : el;\n    const isTemplateTag = isTemplate(el);\n    const templateTagOffset = isTemplateTag\n      ? getTemplateTagOffset(parentNode, el, meta)\n      : null; // create the DOM if it wasn't created before\n\n    this.createDOM(el); // create the DOM of this template cloning the original DOM structure stored in this instance\n    // notice that if a documentFragment was passed (via meta) we will use it instead\n\n    const cloneNode = fragment || this.dom.cloneNode(true); // store root node\n    // notice that for template tags the root note will be the parent tag\n\n    this.el = isTemplateTag ? parentNode : el; // create the children array only for the <template> fragments\n\n    this.children = isTemplateTag\n      ? children || Array.from(cloneNode.childNodes)\n      : null; // inject the DOM into the el only if a fragment is available\n\n    if (!avoidDOMInjection && cloneNode) injectDOM(el, cloneNode); // create the bindings\n\n    this.bindings = this.bindingsData.map((binding) =>\n      create$1(this.el, binding, templateTagOffset)\n    );\n    this.bindings.forEach((b) => b.mount(scope, parentScope)); // store the template meta properties\n\n    this.meta = meta;\n    return this;\n  },\n\n  /**\n   * Update the template with fresh data\n   * @param   {*} scope - template data\n   * @param   {*} parentScope - scope of the parent template tag\n   * @returns {TemplateChunk} self\n   */\n  update(scope, parentScope) {\n    this.bindings.forEach((b) => b.update(scope, parentScope));\n    return this;\n  },\n\n  /**\n   * Remove the template from the node where it was initially mounted\n   * @param   {*} scope - template data\n   * @param   {*} parentScope - scope of the parent template tag\n   * @param   {boolean|null} mustRemoveRoot - if true remove the root element,\n   * if false or undefined clean the root tag content, if null don't touch the DOM\n   * @returns {TemplateChunk} self\n   */\n  unmount(scope, parentScope, mustRemoveRoot) {\n    if (mustRemoveRoot === void 0) {\n      mustRemoveRoot = false;\n    }\n\n    const el = this.el;\n\n    if (!el) {\n      return this;\n    }\n\n    this.bindings.forEach((b) => b.unmount(scope, parentScope, mustRemoveRoot));\n\n    switch (true) {\n      // pure components should handle the DOM unmount updates by themselves\n      // for mustRemoveRoot === null don't touch the DOM\n      case el[IS_PURE_SYMBOL] || mustRemoveRoot === null:\n        break;\n      // if children are declared, clear them\n      // applicable for <template> and <slot/> bindings\n\n      case Array.isArray(this.children):\n        clearChildren(this.children);\n        break;\n      // clean the node children only\n\n      case !mustRemoveRoot:\n        cleanNode(el);\n        break;\n      // remove the root node only if the mustRemoveRoot is truly\n\n      case !!mustRemoveRoot:\n        removeChild(el);\n        break;\n    }\n\n    this.el = null;\n    return this;\n  },\n\n  /**\n   * Clone the template chunk\n   * @returns {TemplateChunk} a clone of this object resetting the this.el property\n   */\n  clone() {\n    return Object.assign({}, this, {\n      meta: {},\n      el: null,\n    });\n  },\n});\n/**\n * Create a template chunk wiring also the bindings\n * @param   {string|HTMLElement} html - template string\n * @param   {BindingData[]} bindings - bindings collection\n * @returns {TemplateChunk} a new TemplateChunk copy\n */\n\nfunction create(html, bindings) {\n  if (bindings === void 0) {\n    bindings = [];\n  }\n\n  return Object.assign({}, TemplateChunk, {\n    html,\n    bindingsData: bindings,\n  });\n}\n\nfunction noop() {\n  return this;\n}\n/**\n * Autobind the methods of a source object to itself\n * @param   {Object} source - probably a riot tag instance\n * @param   {Array<string>} methods - list of the methods to autobind\n * @returns {Object} the original object received\n */\n\nfunction autobindMethods(source, methods) {\n  methods.forEach((method) => {\n    source[method] = source[method].bind(source);\n  });\n  return source;\n}\n/**\n * Call the first argument received only if it's a function otherwise return it as it is\n * @param   {*} source - anything\n * @returns {*} anything\n */\n\nfunction callOrAssign(source) {\n  return isFunction(source)\n    ? source.prototype && source.prototype.constructor\n      ? new source()\n      : source()\n    : source;\n}\n/**\n * Converts any DOM node/s to a loopable array\n * @param   { HTMLElement|NodeList } els - single html element or a node list\n * @returns { Array } always a loopable object\n */\n\nfunction domToArray(els) {\n  // can this object be already looped?\n  if (!Array.isArray(els)) {\n    // is it a node list?\n    if (\n      /^\\[object (HTMLCollection|NodeList|Object)\\]$/.test(\n        Object.prototype.toString.call(els)\n      ) &&\n      typeof els.length === \"number\"\n    )\n      return Array.from(els); // if it's a single node\n    // it will be returned as \"array\" with one single entry\n    else return [els];\n  } // this object could be looped out of the box\n\n  return els;\n}\n/**\n * Simple helper to find DOM nodes returning them as array like loopable object\n * @param   { string|DOMNodeList } selector - either the query or the DOM nodes to arraify\n * @param   { HTMLElement }        ctx      - context defining where the query will search for the DOM nodes\n * @returns { Array } DOM nodes found as array\n */\n\nfunction $(selector, ctx) {\n  return domToArray(\n    typeof selector === \"string\"\n      ? // ? (ctx || document).querySelectorAll(selector) // <-- ALTERED\n        (ctx || vendor.getHostNode()).querySelectorAll(selector)\n      : selector\n  );\n}\n/**\n * Normalize the return values, in case of a single value we avoid to return an array\n * @param   { Array } values - list of values we want to return\n * @returns { Array|string|boolean } either the whole list of values or the single one found\n * @private\n */\n\nconst normalize = (values) => (values.length === 1 ? values[0] : values);\n/**\n * Parse all the nodes received to get/remove/check their attributes\n * @param   { HTMLElement|NodeList|Array } els    - DOM node/s to parse\n * @param   { string|Array }               name   - name or list of attributes\n * @param   { string }                     method - method that will be used to parse the attributes\n * @returns { Array|string } result of the parsing in a list or a single value\n * @private\n */\n\nfunction parseNodes(els, name, method) {\n  const names = typeof name === \"string\" ? [name] : name;\n  return normalize(\n    domToArray(els).map((el) => {\n      return normalize(names.map((n) => el[method](n)));\n    })\n  );\n}\n/**\n * Set any attribute on a single or a list of DOM nodes\n * @param   { HTMLElement|NodeList|Array } els   - DOM node/s to parse\n * @param   { string|Object }              name  - either the name of the attribute to set\n *                                                 or a list of properties as object key - value\n * @param   { string }                     value - the new value of the attribute (optional)\n * @returns { HTMLElement|NodeList|Array } the original array of elements passed to this function\n *\n * @example\n *\n * import { set } from 'bianco.attr'\n *\n * const img = document.createElement('img')\n *\n * set(img, 'width', 100)\n *\n * // or also\n * set(img, {\n *   width: 300,\n *   height: 300\n * })\n *\n */\n\nfunction set(els, name, value) {\n  const attrs =\n    typeof name === \"object\"\n      ? name\n      : {\n          [name]: value,\n        };\n  const props = Object.keys(attrs);\n  domToArray(els).forEach((el) => {\n    props.forEach((prop) => el.setAttribute(prop, attrs[prop]));\n  });\n  return els;\n}\n/**\n * Get any attribute from a single or a list of DOM nodes\n * @param   { HTMLElement|NodeList|Array } els   - DOM node/s to parse\n * @param   { string|Array }               name  - name or list of attributes to get\n * @returns { Array|string } list of the attributes found\n *\n * @example\n *\n * import { get } from 'bianco.attr'\n *\n * const img = document.createElement('img')\n *\n * get(img, 'width') // => '200'\n *\n * // or also\n * get(img, ['width', 'height']) // => ['200', '300']\n *\n * // or also\n * get([img1, img2], ['width', 'height']) // => [['200', '300'], ['500', '200']]\n */\n\nfunction get(els, name) {\n  return parseNodes(els, name, \"getAttribute\");\n}\n\nconst CSS_BY_NAME = new Map();\nconst STYLE_NODE_SELECTOR = \"style[riot]\"; // memoized curried function\n\nconst getStyleNode = ((style) => {\n  return () => {\n    // lazy evaluation:\n    // if this function was already called before\n    // we return its cached result\n    if (style) return style; // create a new style element or use an existing one\n    // and cache it internally\n\n    style = $(STYLE_NODE_SELECTOR)[0] || document.createElement(\"style\");\n    set(style, \"type\", \"text/css\");\n    /* istanbul ignore next */\n\n    // if (!style.parentNode) document.head.appendChild(style); // <-- ALTERED\n    if (!style.parentNode) {\n      const _styles = vendor.getHostNode().querySelectorAll(\"style\");\n      const _lastStyle = _styles[_styles.length - 1];\n      _lastStyle.after(style);\n    }\n    return style;\n  };\n})();\n/**\n * Object that will be used to inject and manage the css of every tag instance\n */\n\nvar cssManager = {\n  CSS_BY_NAME,\n\n  /**\n   * Save a tag style to be later injected into DOM\n   * @param { string } name - if it's passed we will map the css to a tagname\n   * @param { string } css - css string\n   * @returns {Object} self\n   */\n  add(name, css) {\n    if (!CSS_BY_NAME.has(name)) {\n      CSS_BY_NAME.set(name, css);\n      this.inject();\n    }\n\n    return this;\n  },\n\n  /**\n   * Inject all previously saved tag styles into DOM\n   * innerHTML seems slow: http://jsperf.com/riot-insert-style\n   * @returns {Object} self\n   */\n  inject() {\n    getStyleNode().innerHTML = [...CSS_BY_NAME.values()].join(\"\\n\");\n    return this;\n  },\n\n  /**\n   * Remove a tag style from the DOM\n   * @param {string} name a registered tagname\n   * @returns {Object} self\n   */\n  remove(name) {\n    if (CSS_BY_NAME.has(name)) {\n      CSS_BY_NAME.delete(name);\n      this.inject();\n    }\n\n    return this;\n  },\n};\n/**\n * Function to curry any javascript method\n * @param   {Function}  fn - the target function we want to curry\n * @param   {...[args]} acc - initial arguments\n * @returns {Function|*} it will return a function until the target function\n *                       will receive all of its arguments\n */\n\nfunction curry(fn) {\n  for (\n    var _len = arguments.length,\n      acc = new Array(_len > 1 ? _len - 1 : 0),\n      _key = 1;\n    _key < _len;\n    _key++\n  ) {\n    acc[_key - 1] = arguments[_key];\n  }\n\n  return function () {\n    for (\n      var _len2 = arguments.length, args = new Array(_len2), _key2 = 0;\n      _key2 < _len2;\n      _key2++\n    ) {\n      args[_key2] = arguments[_key2];\n    }\n\n    args = [...acc, ...args];\n    return args.length < fn.length ? curry(fn, ...args) : fn(...args);\n  };\n}\n/**\n * Get the tag name of any DOM node\n * @param   {HTMLElement} element - DOM node we want to inspect\n * @returns {string} name to identify this dom node in riot\n */\n\nfunction getName(element) {\n  return get(element, IS_DIRECTIVE) || element.tagName.toLowerCase();\n}\n\nconst COMPONENT_CORE_HELPERS = Object.freeze({\n  // component helpers\n  $(selector) {\n    return $(selector, this.root)[0];\n  },\n\n  $$(selector) {\n    return $(selector, this.root);\n  },\n});\nconst PURE_COMPONENT_API = Object.freeze({\n  [MOUNT_METHOD_KEY]: noop,\n  [UPDATE_METHOD_KEY]: noop,\n  [UNMOUNT_METHOD_KEY]: noop,\n});\nconst COMPONENT_LIFECYCLE_METHODS = Object.freeze({\n  [SHOULD_UPDATE_KEY]: noop,\n  [ON_BEFORE_MOUNT_KEY]: noop,\n  [ON_MOUNTED_KEY]: noop,\n  [ON_BEFORE_UPDATE_KEY]: noop,\n  [ON_UPDATED_KEY]: noop,\n  [ON_BEFORE_UNMOUNT_KEY]: noop,\n  [ON_UNMOUNTED_KEY]: noop,\n});\nconst MOCKED_TEMPLATE_INTERFACE = Object.assign({}, PURE_COMPONENT_API, {\n  clone: noop,\n  createDOM: noop,\n});\n/**\n * Performance optimization for the recursive components\n * @param  {RiotComponentWrapper} componentWrapper - riot compiler generated object\n * @returns {Object} component like interface\n */\n\nconst memoizedCreateComponent = memoize(createComponent);\n/**\n * Evaluate the component properties either from its real attributes or from its initial user properties\n * @param   {HTMLElement} element - component root\n * @param   {Object}  initialProps - initial props\n * @returns {Object} component props key value pairs\n */\n\nfunction evaluateInitialProps(element, initialProps) {\n  if (initialProps === void 0) {\n    initialProps = {};\n  }\n\n  return Object.assign(\n    {},\n    DOMattributesToObject(element),\n    callOrAssign(initialProps)\n  );\n}\n/**\n * Bind a DOM node to its component object\n * @param   {HTMLElement} node - html node mounted\n * @param   {Object} component - Riot.js component object\n * @returns {Object} the component object received as second argument\n */\n\nconst bindDOMNodeToComponentObject = (node, component) =>\n  (node[DOM_COMPONENT_INSTANCE_PROPERTY$1] = component);\n/**\n * Wrap the Riot.js core API methods using a mapping function\n * @param   {Function} mapFunction - lifting function\n * @returns {Object} an object having the { mount, update, unmount } functions\n */\n\nfunction createCoreAPIMethods(mapFunction) {\n  return [MOUNT_METHOD_KEY, UPDATE_METHOD_KEY, UNMOUNT_METHOD_KEY].reduce(\n    (acc, method) => {\n      acc[method] = mapFunction(method);\n      return acc;\n    },\n    {}\n  );\n}\n/**\n * Factory function to create the component templates only once\n * @param   {Function} template - component template creation function\n * @param   {RiotComponentWrapper} componentWrapper - riot compiler generated object\n * @returns {TemplateChunk} template chunk object\n */\n\nfunction componentTemplateFactory(template, componentWrapper) {\n  const components = createSubcomponents(\n    componentWrapper.exports ? componentWrapper.exports.components : {}\n  );\n  return template(create, expressionTypes, bindingTypes, (name) => {\n    // improve support for recursive components\n    if (name === componentWrapper.name)\n      return memoizedCreateComponent(componentWrapper); // return the registered components\n\n    return components[name] || COMPONENTS_IMPLEMENTATION_MAP$1.get(name);\n  });\n}\n/**\n * Create a pure component\n * @param   {Function} pureFactoryFunction - pure component factory function\n * @param   {Array} options.slots - component slots\n * @param   {Array} options.attributes - component attributes\n * @param   {Array} options.template - template factory function\n * @param   {Array} options.template - template factory function\n * @param   {any} options.props - initial component properties\n * @returns {Object} pure component object\n */\n\nfunction createPureComponent(pureFactoryFunction, _ref) {\n  let { slots, attributes, props, css, template } = _ref;\n  if (template) panic(\"Pure components can not have html\");\n  if (css) panic(\"Pure components do not have css\");\n  const component = defineDefaults(\n    pureFactoryFunction({\n      slots,\n      attributes,\n      props,\n    }),\n    PURE_COMPONENT_API\n  );\n  return createCoreAPIMethods(\n    (method) =>\n      function () {\n        for (\n          var _len = arguments.length, args = new Array(_len), _key = 0;\n          _key < _len;\n          _key++\n        ) {\n          args[_key] = arguments[_key];\n        } // intercept the mount calls to bind the DOM node to the pure object created\n        // see also https://github.com/riot/riot/issues/2806\n\n        if (method === MOUNT_METHOD_KEY) {\n          const [element] = args; // mark this node as pure element\n\n          defineProperty(element, IS_PURE_SYMBOL, true);\n          bindDOMNodeToComponentObject(element, component);\n        }\n\n        component[method](...args);\n        return component;\n      }\n  );\n}\n/**\n * Create the component interface needed for the @riotjs/dom-bindings tag bindings\n * @param   {RiotComponentWrapper} componentWrapper - riot compiler generated object\n * @param   {string} componentWrapper.css - component css\n * @param   {Function} componentWrapper.template - function that will return the dom-bindings template function\n * @param   {Object} componentWrapper.exports - component interface\n * @param   {string} componentWrapper.name - component name\n * @returns {Object} component like interface\n */\n\nfunction createComponent(componentWrapper) {\n  const { css, template, exports, name } = componentWrapper;\n  const templateFn = template\n    ? componentTemplateFactory(template, componentWrapper)\n    : MOCKED_TEMPLATE_INTERFACE;\n  return (_ref2) => {\n    let { slots, attributes, props } = _ref2; // pure components rendering will be managed by the end user\n\n    if (exports && exports[IS_PURE_SYMBOL])\n      return createPureComponent(exports, {\n        slots,\n        attributes,\n        props,\n        css,\n        template,\n      });\n    const componentAPI = callOrAssign(exports) || {};\n    const component = defineComponent({\n      css,\n      template: templateFn,\n      componentAPI,\n      name,\n    })({\n      slots,\n      attributes,\n      props,\n    }); // notice that for the components create via tag binding\n    // we need to invert the mount (state/parentScope) arguments\n    // the template bindings will only forward the parentScope updates\n    // and never deal with the component state\n\n    return {\n      mount(element, parentScope, state) {\n        return component.mount(element, state, parentScope);\n      },\n\n      update(parentScope, state) {\n        return component.update(state, parentScope);\n      },\n\n      unmount(preserveRoot) {\n        return component.unmount(preserveRoot);\n      },\n    };\n  };\n}\n/**\n * Component definition function\n * @param   {Object} implementation - the component implementation will be generated via compiler\n * @param   {Object} component - the component initial properties\n * @returns {Object} a new component implementation object\n */\n\nfunction defineComponent(_ref3) {\n  let { css, template, componentAPI, name } = _ref3; // add the component css into the DOM\n\n  if (css && name) cssManager.add(name, css);\n  return curry(enhanceComponentAPI)(\n    defineProperties(\n      // set the component defaults without overriding the original component API\n      defineDefaults(\n        componentAPI,\n        Object.assign({}, COMPONENT_LIFECYCLE_METHODS, {\n          [PROPS_KEY]: {},\n          [STATE_KEY]: {},\n        })\n      ),\n      Object.assign(\n        {\n          // defined during the component creation\n          [SLOTS_KEY]: null,\n          [ROOT_KEY]: null,\n        },\n        COMPONENT_CORE_HELPERS,\n        {\n          name,\n          css,\n          template,\n        }\n      )\n    )\n  );\n}\n/**\n * Create the bindings to update the component attributes\n * @param   {HTMLElement} node - node where we will bind the expressions\n * @param   {Array} attributes - list of attribute bindings\n * @returns {TemplateChunk} - template bindings object\n */\n\nfunction createAttributeBindings(node, attributes) {\n  if (attributes === void 0) {\n    attributes = [];\n  }\n\n  const expressions = attributes.map((a) => create$4(node, a));\n  const binding = {};\n  return Object.assign(\n    binding,\n    Object.assign(\n      {\n        expressions,\n      },\n      createCoreAPIMethods((method) => (scope) => {\n        expressions.forEach((e) => e[method](scope));\n        return binding;\n      })\n    )\n  );\n}\n/**\n * Create the subcomponents that can be included inside a tag in runtime\n * @param   {Object} components - components imported in runtime\n * @returns {Object} all the components transformed into Riot.Component factory functions\n */\n\nfunction createSubcomponents(components) {\n  if (components === void 0) {\n    components = {};\n  }\n\n  return Object.entries(callOrAssign(components)).reduce((acc, _ref4) => {\n    let [key, value] = _ref4;\n    acc[camelToDashCase(key)] = createComponent(value);\n    return acc;\n  }, {});\n}\n/**\n * Run the component instance through all the plugins set by the user\n * @param   {Object} component - component instance\n * @returns {Object} the component enhanced by the plugins\n */\n\nfunction runPlugins(component) {\n  return [...PLUGINS_SET$1].reduce((c, fn) => fn(c) || c, component);\n}\n/**\n * Compute the component current state merging it with its previous state\n * @param   {Object} oldState - previous state object\n * @param   {Object} newState - new state given to the `update` call\n * @returns {Object} new object state\n */\n\nfunction computeState(oldState, newState) {\n  return Object.assign({}, oldState, callOrAssign(newState));\n}\n/**\n * Add eventually the \"is\" attribute to link this DOM node to its css\n * @param {HTMLElement} element - target root node\n * @param {string} name - name of the component mounted\n * @returns {undefined} it's a void function\n */\n\nfunction addCssHook(element, name) {\n  if (getName(element) !== name) {\n    set(element, IS_DIRECTIVE, name);\n  }\n}\n/**\n * Component creation factory function that will enhance the user provided API\n * @param   {Object} component - a component implementation previously defined\n * @param   {Array} options.slots - component slots generated via riot compiler\n * @param   {Array} options.attributes - attribute expressions generated via riot compiler\n * @returns {Riot.Component} a riot component instance\n */\n\nfunction enhanceComponentAPI(component, _ref5) {\n  let { slots, attributes, props } = _ref5;\n  return autobindMethods(\n    runPlugins(\n      defineProperties(\n        isObject(component) ? Object.create(component) : component,\n        {\n          mount(element, state, parentScope) {\n            if (state === void 0) {\n              state = {};\n            } // any element mounted passing through this function can't be a pure component\n\n            defineProperty(element, IS_PURE_SYMBOL, false);\n            this[PARENT_KEY_SYMBOL] = parentScope;\n            this[ATTRIBUTES_KEY_SYMBOL] = createAttributeBindings(\n              element,\n              attributes\n            ).mount(parentScope);\n            defineProperty(\n              this,\n              PROPS_KEY,\n              Object.freeze(\n                Object.assign(\n                  {},\n                  evaluateInitialProps(element, props),\n                  evaluateAttributeExpressions(\n                    this[ATTRIBUTES_KEY_SYMBOL].expressions\n                  )\n                )\n              )\n            );\n            this[STATE_KEY] = computeState(this[STATE_KEY], state);\n            this[TEMPLATE_KEY_SYMBOL] = this.template\n              .createDOM(element)\n              .clone(); // link this object to the DOM node\n\n            bindDOMNodeToComponentObject(element, this); // add eventually the 'is' attribute\n\n            component.name && addCssHook(element, component.name); // define the root element\n\n            defineProperty(this, ROOT_KEY, element); // define the slots array\n\n            defineProperty(this, SLOTS_KEY, slots); // before mount lifecycle event\n\n            this[ON_BEFORE_MOUNT_KEY](this[PROPS_KEY], this[STATE_KEY]); // mount the template\n\n            this[TEMPLATE_KEY_SYMBOL].mount(element, this, parentScope);\n            this[ON_MOUNTED_KEY](this[PROPS_KEY], this[STATE_KEY]);\n            return this;\n          },\n\n          update(state, parentScope) {\n            if (state === void 0) {\n              state = {};\n            }\n\n            if (parentScope) {\n              this[PARENT_KEY_SYMBOL] = parentScope;\n              this[ATTRIBUTES_KEY_SYMBOL].update(parentScope);\n            }\n\n            const newProps = evaluateAttributeExpressions(\n              this[ATTRIBUTES_KEY_SYMBOL].expressions\n            );\n            if (this[SHOULD_UPDATE_KEY](newProps, this[PROPS_KEY]) === false)\n              return;\n            defineProperty(\n              this,\n              PROPS_KEY,\n              Object.freeze(Object.assign({}, this[PROPS_KEY], newProps))\n            );\n            this[STATE_KEY] = computeState(this[STATE_KEY], state);\n            this[ON_BEFORE_UPDATE_KEY](this[PROPS_KEY], this[STATE_KEY]); // avoiding recursive updates\n            // see also https://github.com/riot/riot/issues/2895\n\n            if (!this[IS_COMPONENT_UPDATING]) {\n              this[IS_COMPONENT_UPDATING] = true;\n              this[TEMPLATE_KEY_SYMBOL].update(this, this[PARENT_KEY_SYMBOL]);\n            }\n\n            this[ON_UPDATED_KEY](this[PROPS_KEY], this[STATE_KEY]);\n            this[IS_COMPONENT_UPDATING] = false;\n            return this;\n          },\n\n          unmount(preserveRoot) {\n            this[ON_BEFORE_UNMOUNT_KEY](this[PROPS_KEY], this[STATE_KEY]);\n            this[ATTRIBUTES_KEY_SYMBOL].unmount(); // if the preserveRoot is null the template html will be left untouched\n            // in that case the DOM cleanup will happen differently from a parent node\n\n            this[TEMPLATE_KEY_SYMBOL].unmount(\n              this,\n              this[PARENT_KEY_SYMBOL],\n              preserveRoot === null ? null : !preserveRoot\n            );\n            this[ON_UNMOUNTED_KEY](this[PROPS_KEY], this[STATE_KEY]);\n            return this;\n          },\n        }\n      )\n    ),\n    Object.keys(component).filter((prop) => isFunction(component[prop]))\n  );\n}\n/**\n * Similar to compose but performs from left-to-right function composition.<br/>\n * {@link https://30secondsofcode.org/function#composeright see also}\n * @param   {...[function]} fns) - list of unary function\n * @returns {*} result of the computation\n */\n\n/**\n * Performs right-to-left function composition.<br/>\n * Use Array.prototype.reduce() to perform right-to-left function composition.<br/>\n * The last (rightmost) function can accept one or more arguments; the remaining functions must be unary.<br/>\n * {@link https://30secondsofcode.org/function#compose original source code}\n * @param   {...[function]} fns) - list of unary function\n * @returns {*} result of the computation\n */\n\nfunction compose() {\n  for (\n    var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0;\n    _key2 < _len2;\n    _key2++\n  ) {\n    fns[_key2] = arguments[_key2];\n  }\n\n  return fns.reduce(\n    (f, g) =>\n      function () {\n        return f(g(...arguments));\n      }\n  );\n}\n/**\n * Helper method to create component without relying on the registered ones\n * @param   {Object} implementation - component implementation\n * @returns {Function} function that will allow you to mount a riot component on a DOM node\n */\n\nfunction component(implementation) {\n  debugger; // REMOVE\n  return function (el, props, _temp) {\n    let { slots, attributes, parentScope } = _temp === void 0 ? {} : _temp;\n    return compose(\n      (c) => c.mount(el, parentScope),\n      (c) =>\n        c({\n          props,\n          slots,\n          attributes,\n        }),\n      createComponent\n    )(implementation);\n  };\n}\n\n// entry point for riot compiler\nexport { component };\n\n//////////////////////////////////////////////////////////////////////////////////\n///                                                                            ///\n///                               EXTERNALS                                    ///\n///                                                                            ///\n//////////////////////////////////////////////////////////////////////////////////\n/**\n * Set external dependents needed by vendors.\n */\nexport const vendor = {\n  SHADOW_ROOT: null,\n\n  /**\n   * Assign the shadow root ref to vendor.SHADOW_ROOT\n   *\n   * @param {ShadowRoot} shadowRoot\n   */\n  bind(shadowRoot) {\n    this.SHADOW_ROOT = shadowRoot;\n  },\n\n  /**\n   * Gets the Dom tree's host by first looking for the IVE shadow\n   * if that is undefined it returns the Document object itself.\n   *\n   * @returns {shadowRoot | Document}\n   */\n  getHostNode() {\n    return this.SHADOW_ROOT ? this.SHADOW_ROOT : document;\n  },\n};\n","import type { Config } from \"../model/Config\";\nimport type { Runner } from \"../model/Runner\";\nimport { vendor } from \"../util/vendor\";\nimport { E } from \"../util/constant\";\n\ninterface IBaseProps {\n  _detail: any;\n  _config: Config;\n  _configs: Config[];\n  _runner: Runner;\n  _runners: Runner[];\n  _root: ShadowRoot;\n}\n\nexport class Base extends HTMLElement {\n  private _root: IBaseProps[\"_root\"];\n  private _detail: IBaseProps[\"_detail\"];\n  private _config: IBaseProps[\"_config\"];\n  private _configs: IBaseProps[\"_configs\"];\n  private _runner: IBaseProps[\"_runner\"];\n  private _runners: IBaseProps[\"_runners\"];\n\n  constructor({}: Partial<IBaseProps> = {}) {\n    super();\n    if (!this.hasAttribute(\"run\")) this.setAttribute(\"run\", \"0\");\n    if (!this.hasAttribute(\"conf\")) this.setAttribute(\"conf\", \"0\");\n    this.root = this.attachShadow({ mode: \"closed\" });\n    // LOGGER\n    console.log(\n      \"%c\\n__________\\n\\n  I V E      \\n__________\\n\",\n      `font-size: 25px; ${E.IVE_FONT_LOGO_STYLE}`\n    );\n  }\n  static get observedAttributes() {\n    return [\"css\", \"script\", \"data\", \"run\", \"conf\"];\n  }\n\n  get run() {\n    return parseInt(this.getAttribute(\"run\"));\n  }\n  get conf() {\n    return parseInt(this.getAttribute(\"conf\"));\n  }\n  get css() {\n    return this.getAttribute(\"css\");\n  }\n  get script() {\n    return this.getAttribute(\"script\");\n  }\n  get data() {\n    return this.getAttribute(\"data\");\n  }\n\n  get detail() {\n    return this._detail;\n  }\n\n  set detail(obj: IBaseProps[\"_detail\"]) {\n    this._detail = obj;\n  }\n\n  get runner() {\n    return this._runner;\n  }\n\n  set runner(inst: IBaseProps[\"_runner\"]) {\n    if (this._runner) this._runner.unbind();\n    this._runner = inst;\n    this._runner.bind(this.root);\n  }\n\n  get runners() {\n    return this._runners;\n  }\n\n  set runners(inst: IBaseProps[\"_runners\"]) {\n    this._runners = inst;\n  }\n\n  get configs() {\n    return this._configs;\n  }\n\n  set configs(inst: IBaseProps[\"_configs\"]) {\n    this._configs = inst;\n  }\n\n  get config() {\n    return this._config;\n  }\n\n  set config(inst: IBaseProps[\"_config\"]) {\n    if (this._config) this._config.unbind();\n    this._config = inst;\n    this._config.bind(this.root);\n  }\n\n  get root() {\n    return this._root;\n  }\n\n  set root(inst: IBaseProps[\"_root\"]) {\n    this._root = inst;\n    vendor.bind(this._root);\n  }\n\n  protected _extendElementPrototype() {\n    Element.prototype[\"showMe\"] = function () {\n      this.classList.remove(E.CSS_CLS_HIDDEN);\n    };\n\n    Element.prototype[\"hideMe\"] = function () {\n      this.classList.add(E.CSS_CLS_HIDDEN);\n    };\n\n    Element.prototype[\"showFocusMe\"] = function () {\n      this.classList.remove(E.CSS_CLS_HIDDEN);\n      this.focus();\n    };\n\n    Element.prototype[\"toggleMe\"] = function () {\n      this.classList.toggle(E.CSS_CLS_HIDDEN);\n    };\n  }\n\n  protected _shrinkElementPrototype() {\n    delete Element.prototype[\"showMe\"];\n    delete Element.prototype[\"hideMe\"];\n    delete Element.prototype[\"showFocusMe\"];\n    delete Element.prototype[\"toggleMe\"];\n  }\n}\n","import { Base } from \"./Base\";\nimport { A, E, T } from \"../util/constant\";\n\ninterface IHandleProps {}\n\nexport class Handle extends Base {\n  // get and setter available with a trailing _ property name\n  private _isBuffering = false;\n  private _isFilmLoadError = false;\n  private _isAudioLoadError = false;\n  private _filmBuffered = 0;\n  private _audioBuffered = 0;\n  private _filmLoadProgress = 0;\n  private _audioLoadProgress = 0;\n\n  // No and setter available\n  _isExperiencePaused_ = false;\n  _isRunnerFilmPaused_ = false;\n  _isRunnerAudioPlaying_ = false;\n  _isRunnerVisualShowing_ = false;\n  _visualElements_ = {};\n\n  constructor({}: Partial<IHandleProps> = {}) {\n    super();\n  }\n\n  //////////////////////////////////////////////////////////////////////////////////\n  ///                                                                            ///\n  ///                    EXPERIENCE    HANDLERS                                  ///\n  ///                                                                            ///\n  //////////////////////////////////////////////////////////////////////////////////\n\n  [A.PLAY_FILM]() {\n    const video = this.root.getElementById(\n      E.CSS_VIDEO_ELEMENT\n    ) as HTMLVideoElement;\n    video\n      .play()\n      .then(() => {\n        this._isRunnerFilmPaused_ = false;\n      })\n      .catch((error) => {\n        this._isFilmLoadError_ = true;\n        console.warn(`PlayVideoError:\\n[A.PLAY_FILM] call\\n\\n${error}`);\n      });\n  }\n\n  [A.PAUSE_FILM]() {\n    const video = this.root.getElementById(\n      E.CSS_VIDEO_ELEMENT\n    ) as HTMLVideoElement;\n    video.pause();\n    this._isRunnerFilmPaused_ = true;\n  }\n\n  [A.SEEK_FILM](value: number) {\n    const video = this.root.getElementById(\n      E.CSS_VIDEO_ELEMENT\n    ) as HTMLVideoElement;\n    video.currentTime = value;\n  }\n\n  [A.PLAY_AUDIO]() {\n    const audio = this.root.getElementById(\n      E.CSS_AUDIO_ELEMENT\n    ) as HTMLAudioElement;\n    audio\n      .play()\n      .then(() => {\n        this._isRunnerAudioPlaying_ = true;\n      })\n      .catch((error) => {\n        this._isAudioLoadError_ = true;\n        console.warn(`PlayAudioError:\\n[A.PLAY_AUDIO] call\\n\\n${error}`);\n      });\n  }\n\n  [A.PAUSE_AUDIO]() {\n    const audio = this.root.getElementById(\n      E.CSS_AUDIO_ELEMENT\n    ) as HTMLAudioElement;\n    audio.pause();\n    audio.currentTime = 0;\n    this._isRunnerAudioPlaying_ = false;\n  }\n\n  [A.SEEK_AUDIO](value: number) {\n    const audio = this.root.getElementById(\n      E.CSS_AUDIO_ELEMENT\n    ) as HTMLAudioElement;\n    audio.currentTime = value;\n  }\n\n  [A.SHOW_VISUAL]() {\n    const visual = this.root.getElementById(E.CSS_VISUAL_CONTAINER) as any;\n    visual.showMe();\n    this._isRunnerVisualShowing_ = true;\n  }\n\n  [A.HIDE_VISUAL]() {\n    const visual = this.root.getElementById(E.CSS_VISUAL_CONTAINER) as any;\n    visual.hideMe();\n    this._isRunnerVisualShowing_ = false;\n  }\n\n  [A.LOAD_VISUAL](value: number) {\n    if (value < this.config.visuals.length) {\n      const visual = this.root.getElementById(E.CSS_VISUAL_CONTAINER) as any;\n      visual.load(value);\n    }\n  }\n\n  //////////////////////////////////////////////////////////////////////////////////\n  ///                                                                            ///\n  ///                         HELPER    HANDLERS                                 ///\n  ///                                                                            ///\n  //////////////////////////////////////////////////////////////////////////////////\n\n  // this.dispatchEvent(new CustomEvent(E.EVENT_ENGINE_EXPERIENCE_LOADING));\n\n  set _isBuffering_(value: boolean) {\n    this._isBuffering = value;\n    this.dispatchEvent(new CustomEvent(E.EVENT_ENGINE_EXPERIENCE_LOADING));\n  }\n  get _isBuffering_() {\n    return this._isBuffering;\n  }\n\n  set _isFilmLoadError_(value: boolean) {\n    this._isFilmLoadError = value;\n    this.dispatchEvent(new CustomEvent(E.EVENT_ENGINE_EXPERIENCE_LOADING));\n  }\n  get _isFilmLoadError_() {\n    return this._isFilmLoadError;\n  }\n\n  set _isAudioLoadError_(value: boolean) {\n    this._isAudioLoadError = value;\n    this.dispatchEvent(new CustomEvent(E.EVENT_ENGINE_EXPERIENCE_LOADING));\n  }\n  get _isAudioLoadError_() {\n    return this._isAudioLoadError;\n  }\n\n  set _filmBuffered_(value: number) {\n    this._filmBuffered = value;\n    this.dispatchEvent(new CustomEvent(E.EVENT_ENGINE_EXPERIENCE_LOADING));\n  }\n  get _filmBuffered_() {\n    return this._filmBuffered;\n  }\n\n  set _audioBuffered_(value: number) {\n    this._audioBuffered = value;\n    this.dispatchEvent(new CustomEvent(E.EVENT_ENGINE_EXPERIENCE_LOADING));\n  }\n  get _audioBuffered_() {\n    return this._audioBuffered;\n  }\n\n  set _filmLoadProgress_(value: number) {\n    this._filmLoadProgress = value;\n    this.dispatchEvent(new CustomEvent(E.EVENT_ENGINE_EXPERIENCE_LOADING));\n  }\n  get _filmLoadProgress_() {\n    return this._filmLoadProgress;\n  }\n\n  set _audioLoadProgress_(value: number) {\n    this._audioLoadProgress = value;\n    this.dispatchEvent(new CustomEvent(E.EVENT_ENGINE_EXPERIENCE_LOADING));\n  }\n  get _audioLoadProgress_() {\n    return this._audioLoadProgress;\n  }\n\n  /**\n   * Current timestamp of experience.\n   */\n  get _currentTime_() {\n    const video = this.root.getElementById(\n      E.CSS_VIDEO_ELEMENT\n    ) as HTMLVideoElement;\n    return video.currentTime;\n  }\n\n  /**\n   * Duration of experience.\n   */\n  get _duration_() {\n    const video = this.root.getElementById(\n      E.CSS_VIDEO_ELEMENT\n    ) as HTMLVideoElement;\n    return video.duration;\n  }\n\n  /**\n   * Speed of playback.\n   */\n  get _playbackRate_() {\n    const video = this.root.getElementById(\n      E.CSS_VIDEO_ELEMENT\n    ) as HTMLVideoElement;\n    return video.playbackRate;\n  }\n\n  /**\n   * Current time / duration\n   * presented as string.\n   */\n  get _timePerDuration_() {\n    const video = this.root.getElementById(\n      E.CSS_VIDEO_ELEMENT\n    ) as HTMLVideoElement;\n    return video.currentTime\n      ? `${new Date(video.currentTime * 1000)\n          .toISOString()\n          .substring(11, 19)\n          .replace(/00:/, \"\")} / ${new Date(video.duration * 1000)\n          .toISOString()\n          .substring(11, 19)\n          .replace(/00:/, \"\")}`\n      : \"--:--:--/--:--:--\";\n  }\n\n  /**\n   * Dismisses the initial call to action group of elements.\n   *\n   * 1. This is needed to prepare the User agent\n   *    to play video due to browser restrictions requiring users to\n   *    interact with a page first before media can be played.\n   * 2. Again many defaults are setup here.\n   *\n   */\n  _initExperience_() {\n    const video = this.root.getElementById(\n      E.CSS_VIDEO_ELEMENT\n    ) as HTMLVideoElement;\n    const audio = this.root.getElementById(\n      E.CSS_AUDIO_ELEMENT\n    ) as HTMLAudioElement;\n    const welcomeGroup = this.root.getElementById(\n      E.CSS_LOADER_WELCOME_GROUP\n    ) as any;\n    const control = this.root.getElementById(E.CSS_CONTROL_CONTAINER) as any;\n    // --- Handles IOS restriction around programmatic audio play without user interaction --- //\n    audio\n      .play()\n      .then(() => {\n        audio.pause();\n        audio.muted = false;\n        audio.currentTime = 0;\n      })\n      .catch((error) => {\n        this._isAudioLoadError_ = true;\n        console.warn(`PlayAudioError:\\ninitExperience call\\n\\n${error}`);\n      });\n    video\n      .play()\n      .then(() => {\n        video.muted = false;\n        this._changeVolume_(null, 0.5);\n        this._changePlaybackRate_(null, 1);\n        this._changeCaption_(null, E.CC_OFF);\n        control.showMe();\n        welcomeGroup.hideMe();\n      })\n      .catch((error) => {\n        this._isFilmLoadError_ = true;\n        console.warn(`PlayVideoError:\\ninitExperience call\\n\\n${error}`);\n      });\n  }\n\n  /**\n   * Handles skipping between experiences.\n   *\n   * This can be called in two ways:\n   * 1. Programmatically which will supply an Event as a first arg.\n   * 2. Directly, caller must supply the new value as a second arg,\n   *    passing null for first arg.\n   * @param event\n   * @param value\n   * @returns void\n   */\n  _changeExperience_(event: Event, value: number = null) {\n    // let _value = value;\n    // const currentTarget = event.currentTarget as any;\n    // const currentIdx = parseInt(this.getAttribute(\"conf\"));\n    // const video = this.root.getElementById(\n    //   E.CSS_VIDEO_ELEMENT\n    // ) as HTMLVideoElement;\n    // const audio = this.root.getElementById(\n    //   E.CSS_AUDIO_ELEMENT\n    // ) as HTMLVideoElement;\n    // if (currentTarget.id === E.CSS_CONTROL_PREVIOUS_BTN) {\n    //   _value = currentIdx - 1;\n    // } else if (currentTarget.id === E.CSS_CONTROL_NEXT_BTN) {\n    //   _value = currentIdx + 1;\n    // }\n    // this._isExperiencePaused_ = true;\n    // this._filmBuffered_ = 0;\n    // this._audioBuffered_ = 0;\n    // this._filmLoadProgress_ = 0;\n    // this._audioLoadProgress_ = 0;\n    // video.pause();\n    // audio.pause();\n    // this.setAttribute(\"conf\", _value.toString());\n    // this._changeVolume_(null, 0.5);\n    // this._changePlaybackRate_(null, 1);\n    // this._changeCurrentTime_(null, 0);\n    // this._changeCaption_(null, E.CC_OFF);\n  }\n\n  /**\n   * Adjusts the video play head to a specified time.\n   * This can be called in two ways:\n   * 1. Programmatically which will supply an Event as a first arg.\n   * 2. Directly, caller must supply the new time as a second arg,\n   *    passing null for first arg.\n   *\n   * NB: event arg takes precedence if both provided.\n   *\n   * @param event\n   * @param value\n   * @returns void\n   */\n  _changeCurrentTime_(event?: Event, value: number = null) {\n    const video = this.root.getElementById(\n      E.CSS_VIDEO_ELEMENT\n    ) as HTMLVideoElement;\n    const _value = event\n      ? parseFloat((<HTMLInputElement>event.currentTarget).value) *\n        this._duration_\n      : value;\n    video.currentTime = _value;\n    this[A.PLAY_FILM]();\n    this[A.PAUSE_AUDIO]();\n    this[A.HIDE_VISUAL]();\n    this.runner.seek();\n  }\n\n  /**\n   * Adjusts the volume of the entire experience.\n   *\n   * This can be called in two ways:\n   * 1. Programmatically which will supply an Event as a first arg.\n   * 2. Directly, caller must supply the new value as a second arg,\n   *    passing null for first arg.\n   *\n   * NB: event arg takes precedence if both provided.\n   *\n   * @param event\n   * @param value\n   */\n  _changeVolume_(event?: Event, value: number = null) {\n    const volumeInput = this.root.getElementById(\n      E.CSS_CONTROL_VOLUME_RANGE_INPUT\n    ) as HTMLInputElement;\n    const video = this.root.getElementById(\n      E.CSS_VIDEO_ELEMENT\n    ) as HTMLVideoElement;\n    const audio = this.root.getElementById(\n      E.CSS_AUDIO_ELEMENT\n    ) as HTMLVideoElement;\n    const btn = this.root.getElementById(E.CSS_CONTROL_VOLUME_BTN);\n    const cls = [\n      E.CSS_CLS_ICON_VOLUME_BG,\n      E.CSS_CLS_ICON_VOLUME_LOW_BG,\n      E.CSS_CLS_ICON_MUTE_BG,\n    ] as const;\n    const _value = event\n      ? parseFloat((<HTMLInputElement>event.currentTarget).value)\n      : value;\n    video.volume = _value;\n    audio.volume = _value;\n    if (value !== null) volumeInput.value = _value.toString();\n    if (video.volume == 0) {\n      btn.classList.remove(...cls);\n      btn.classList.add(E.CSS_CLS_ICON_MUTE_BG);\n    } else if (video.volume > 0 && video.volume < 0.5) {\n      btn.classList.remove(...cls);\n      btn.classList.add(E.CSS_CLS_ICON_VOLUME_LOW_BG);\n    } else {\n      btn.classList.remove(...cls);\n      btn.classList.add(E.CSS_CLS_ICON_VOLUME_BG);\n    }\n  }\n\n  /**\n   * Controls the selection of captions.\n   *\n   * This can be called in two ways:\n   * 1. Programmatically which will supply an Event as a first arg.\n   * 2. Directly, caller must supply the new value as a second arg,\n   *    passing null for first arg.\n   *\n   * NB: event arg takes precedence if both provided.\n   *\n   * @param event\n   * @param value\n   */\n  _changeCaption_(event: Event, value: string = null) {\n    const video = this.root.getElementById(\n      E.CSS_VIDEO_ELEMENT\n    ) as HTMLVideoElement;\n    const audio = this.root.getElementById(\n      E.CSS_AUDIO_ELEMENT\n    ) as HTMLVideoElement;\n    const videoCCContainer = this.root.getElementById(\n      E.CSS_LOADER_VIDEO_CAPTION_CONTAINER\n    ) as any;\n    const audioCCContainer = this.root.getElementById(\n      E.CSS_LOADER_AUDIO_CAPTION_CONTAINER\n    ) as any;\n    const associateBtn = this.root.getElementById(\n      E.CSS_CONTROL_CAPTION_BTN\n    ) as HTMLButtonElement;\n    const _value = event ? (<any>event.currentTarget).innerText : value;\n    associateBtn.dataset.selectedValue = _value;\n    for (let i = 0; i < video.textTracks.length; i++) {\n      const videoTrack = video.textTracks[i];\n      const videoCues = videoTrack.cues;\n      videoTrack.mode = \"hidden\";\n      if (videoTrack.label === _value) {\n        for (let j = 0; j < videoCues.length; j++) {\n          videoCues[j].onenter = (e) => {\n            const inner = document.createElement(\"span\");\n            const { text } = (e.currentTarget as VTTCue) || {};\n            inner.innerHTML = text;\n            videoCCContainer.appendChild(inner);\n            videoCCContainer.showMe();\n          };\n          videoCues[j].onexit = () => {\n            videoCCContainer.innerHTML = \"\";\n            videoCCContainer.hideMe();\n          };\n        }\n      } else if (videoCues) {\n        for (let k = 0; k < videoCues.length; k++) {\n          videoCues[k].onenter = () => void 0;\n          videoCues[k].onexit = () => void 0;\n        }\n      }\n      if (_value === E.CC_OFF) {\n        videoCCContainer.innerHTML = \"\";\n        videoCCContainer.hideMe();\n      }\n    }\n    for (let l = 0; l < audio.textTracks.length; l++) {\n      const audioTrack = audio.textTracks[l];\n      const audioCues = audioTrack.cues;\n      audioTrack.mode = \"hidden\";\n      if (audioTrack.label === _value) {\n        for (let m = 0; m < audioCues.length; m++) {\n          audioCues[m].onenter = (e) => {\n            const inner = document.createElement(\"span\");\n            const { text } = (e.currentTarget as VTTCue) || {};\n            inner.innerHTML = text;\n            audioCCContainer.appendChild(inner);\n            audioCCContainer.showMe();\n          };\n          audioCues[m].onexit = () => {\n            audioCCContainer.innerHTML = \"\";\n            audioCCContainer.hideMe();\n          };\n        }\n      } else if (audioCues) {\n        for (let n = 0; n < audioCues.length; n++) {\n          audioCues[n].onenter = () => void 0;\n          audioCues[n].onexit = () => void 0;\n        }\n      }\n      if (_value === E.CC_OFF) {\n        audioCCContainer.innerHTML = \"\";\n        audioCCContainer.hideMe();\n      }\n    }\n  }\n\n  /**\n   * Controls the speed of playback for entire experience.\n   *\n   * This can be called in two ways:\n   * 1. Programmatically which will supply an Event as a first arg.\n   * 2. Directly, caller must supply the new value as a second arg,\n   *    passing null for first arg.\n   *\n   * NB: event arg takes precedence if both provided.\n   *\n   * @param event\n   * @param value\n   */\n  _changePlaybackRate_(event: Event, value: number = null) {\n    const video = this.root.getElementById(\n      E.CSS_VIDEO_ELEMENT\n    ) as HTMLVideoElement;\n    const audio = this.root.getElementById(\n      E.CSS_AUDIO_ELEMENT\n    ) as HTMLAudioElement;\n    const associateBtn = this.root.getElementById(\n      E.CSS_CONTROL_PLAYBACK_RATE_BTN\n    );\n    const _value = event\n      ? parseFloat((<any>event.currentTarget).innerText)\n      : value;\n    const _valueToFix2 = _value.toFixed(2);\n    associateBtn.dataset.selectedValue = _valueToFix2;\n    associateBtn.innerText = `${_valueToFix2.replace(/(^0|.00$|0$)/g, \"\")}x`;\n    video.playbackRate = parseFloat(_valueToFix2);\n    audio.playbackRate = parseFloat(_valueToFix2);\n  }\n\n  /**\n   * Toggle the visibility of the controls.\n   * Restricted to being called by a touch event ONLY.\n   *\n   * @param event\n   */\n  _toggleControlVisibilityOnTouchDevice_(event: Event) {\n    const rootContainer = this.root.getElementById(E.CSS_ENGINE_CONTAINER);\n    if (event.type == T.TOUCH_END) {\n      rootContainer.classList.toggle(E.CSS_CLS_CONTROL_SHOW);\n    }\n  }\n\n  /**\n   * Toggles fullscreen on and off.\n   */\n  _toggleFullscreen_() {\n    const element = this.root.host as any;\n    if (\n      document.fullscreenElement ||\n      (<any>document).mozFullScreenElement ||\n      (<any>document).webkitFullscreenElement ||\n      (<any>document).msFullscreenElement\n    ) {\n      if (document.exitFullscreen) {\n        document.exitFullscreen();\n      } else if ((document as any).mozCancelFullScreen) {\n        (document as any).mozCancelFullScreen();\n      } else if ((document as any).webkitExitFullscreen) {\n        (document as any).webkitExitFullscreen();\n      }\n    } else {\n      if (element.requestFullscreen) {\n        element.requestFullscreen();\n      } else if (element.mozRequestFullScreen) {\n        element.mozRequestFullScreen();\n      } else if (element.webkitRequestFullscreen) {\n        element.webkitRequestFullscreen();\n      } else if (element.msRequestFullscreen) {\n        element.msRequestFullscreen();\n      }\n    }\n  }\n\n  /**\n   * Mutes and unmute the entire experience volume.\n   */\n  _toggleMute_() {\n    const volumeInput = this.root.getElementById(\n      E.CSS_CONTROL_VOLUME_RANGE_INPUT\n    ) as HTMLInputElement;\n    if (parseFloat(volumeInput.value) > 0) {\n      this._changeVolume_(null, 0);\n    } else {\n      this._changeVolume_(null, 0.5);\n    }\n  }\n\n  /**\n   * Toggles the play or pause state of the entire\n   * experience.\n   *\n   * @returns promise\n   */\n  _toggleExperiencePlay_() {\n    const video = this.root.getElementById(\n      E.CSS_VIDEO_ELEMENT\n    ) as HTMLVideoElement;\n    const audio = this.root.getElementById(\n      E.CSS_AUDIO_ELEMENT\n    ) as HTMLVideoElement;\n    const visual = this.root.getElementById(E.CSS_VISUAL_CONTAINER) as any;\n    const resumeBtn = this.root.getElementById(\n      E.CSS_LOADER_RESUME_PLAY_BTN\n    ) as any;\n    const control = this.root.getElementById(E.CSS_CONTROL_CONTAINER) as any;\n    if (this._isExperiencePaused_) {\n      if (!this._isRunnerFilmPaused_) {\n        video.play().catch((error) => {\n          console.warn(\n            `PlayVideoError:\\ntoggleExperiencePlay call\\n\\n${error}`\n          );\n        });\n      }\n      if (this._isRunnerAudioPlaying_) {\n        audio.play().catch((error) => {\n          console.warn(\n            `PlayAudioError:\\ntoggleExperiencePlay call\\n\\n${error}`\n          );\n        });\n      }\n      if (this._isRunnerVisualShowing_) {\n        visual.showMe();\n      }\n      control.showMe();\n      resumeBtn.hideMe();\n      this.runner.resume();\n      this._isExperiencePaused_ = false;\n    } else {\n      this.runner.pause().then(() => {\n        video.pause();\n        audio.pause();\n        visual.hideMe();\n        control.hideMe();\n        resumeBtn.showFocusMe();\n        this._isExperiencePaused_ = true;\n      });\n    }\n  }\n}\n","import { C, E } from \"../util/constant\";\nimport { ObjectMapper, JsonIgnore } from \"../util/vendor\";\n\nexport interface IHostProps {\n  ORM: E.ORM_CONFIGS | E.ORM_RUNNERS | E.ORM_SESSIONS;\n  uid: string;\n}\n\ninterface IFetchProps {\n  body: String;\n  endpoint: string;\n  method: \"POST\" | \"GET\" | \"PUT\" | \"DELETE\";\n}\n\nexport class Host {\n  // @JsonIgnore()\n  protected mem;\n  protected ORM: IHostProps[\"ORM\"];\n  protected uid: IHostProps[\"uid\"];\n\n  constructor(uid?: IHostProps[\"uid\"]) {\n    this.uid = uid || Math.random().toString(16).slice(2);\n  }\n\n  protected deserializeArray<T>(dtoList: Object[]) {\n    return ObjectMapper.deserializeArray<T>(this.constructor as any, dtoList);\n  }\n\n  protected deserialize<T>(dto: Object) {\n    return ObjectMapper.deserialize<T>(this.constructor as any, dto);\n  }\n\n  protected serialize(cls: Object) {\n    return ObjectMapper.serialize(cls);\n  }\n\n  protected parseQuery(arg = {}) {\n    return new URLSearchParams({ ...arg });\n  }\n\n  protected fetch(arg: Partial<IFetchProps>) {\n    switch (C.DEFAULT_HOST_TYPE) {\n      case E.HOST_TYPE_EXTERNAL:\n        return this._external(arg);\n      case E.HOST_TYPE_INTERNAL:\n        return this._internal(arg);\n      default:\n        return Promise.reject(\n          \"NOT FOUND:\\nHost type not found. Please set DEFAULT_HOST_TYPE to correct value\"\n        );\n    }\n  }\n\n  private _external(arg) {\n    const { body, endpoint, method } = arg || {};\n    return new Promise<any>((resolve, reject) => {\n      fetch(endpoint, {\n        method,\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        ...(body ? { body } : {}),\n      })\n        .then((response) => response.json())\n        .then((data) => resolve(data))\n        .catch((error) => reject(error));\n    });\n  }\n\n  private _internal(arg) {\n    const { body, endpoint } = arg || {};\n    let pointer = [];\n    const { pathname, searchParams } = new URL(`${C.HOST_BASE_URL}${endpoint}`);\n    const dbTable = searchParams.get(\"table\");\n    for (const [key, value] of searchParams) {\n      if (key != \"table\") {\n        pointer = [key, value];\n      }\n    }\n    return new Promise<any>((resolve, reject) => {\n      switch (pathname + \"?\") {\n        case C.HOST_ENDPOINT_GET_ALL:\n          resolve(C.DB[dbTable]);\n          break;\n\n        case C.HOST_ENDPOINT_GET:\n          resolve(\n            C.DB[dbTable].filter((entry) => entry[pointer[0]] === pointer[1])[0]\n          );\n          break;\n\n        case C.HOST_ENDPOINT_POST:\n          C.DB[dbTable].push(JSON.parse(body));\n          resolve(JSON.parse(body));\n          break;\n\n        case C.HOST_ENDPOINT_PUT:\n          let res;\n          C.DB[dbTable] = C.DB[dbTable].map((entry) => {\n            if (entry[pointer[0]] === pointer[1]) {\n              res = { ...entry, ...JSON.parse(body) };\n              return res;\n            } else {\n              return entry;\n            }\n          });\n          resolve(res);\n          break;\n\n        case C.HOST_ENDPOINT_DELETE:\n          C.DB[dbTable] = C.DB[dbTable].filter(\n            (entry) => entry[pointer[0]] !== pointer[1]\n          );\n          resolve(\"{status: SUCCESSFUL}\");\n          break;\n\n        default:\n          reject(`Unknown api endpoint ${pathname}`);\n          break;\n      }\n    });\n  }\n}\n","import { Host } from \"./Host\";\nimport { C } from \"../util/constant\";\n\ninterface IPointer {\n  [key: string]: string;\n}\n\nexport class Manage extends Host {\n  constructor(uid: string) {\n    super(uid);\n  }\n\n  protected post<T>() {\n    return new Promise<T>((resolve, reject) => {\n      this.fetch({\n        body: this.serialize(this),\n        endpoint: C.HOST_ENDPOINT_POST + this.parseQuery({ table: this.ORM }),\n        method: \"POST\",\n      })\n        .then((dto) => resolve(this.deserialize<T>(dto)))\n        .catch((error) => reject(error));\n    });\n  }\n\n  protected put<T>(pointer: IPointer) {\n    return new Promise<T>((resolve, reject) => {\n      this.fetch({\n        body: this.serialize(this),\n        endpoint:\n          C.HOST_ENDPOINT_PUT +\n          this.parseQuery({ ...pointer, table: this.ORM }),\n        method: \"PUT\",\n      })\n        .then((dto) => resolve(this.deserialize<T>(dto)))\n        .catch((error) => reject(error));\n    });\n  }\n\n  get<T>(pointer: IPointer) {\n    return new Promise<T>((resolve, reject) => {\n      this.fetch({\n        endpoint:\n          C.HOST_ENDPOINT_GET +\n          this.parseQuery({ ...pointer, table: this.ORM }),\n        method: \"GET\",\n      })\n        .then((dto) => resolve(this.deserialize<T>(dto)))\n        .catch((error) => reject(error));\n    });\n  }\n\n  delete(pointer: IPointer) {\n    return new Promise<boolean>((resolve, reject) => {\n      this.fetch({\n        endpoint:\n          C.HOST_ENDPOINT_DELETE +\n          this.parseQuery({ ...pointer, table: this.ORM }),\n        method: \"DELETE\",\n      })\n        .then(() => resolve(true))\n        .catch((error) => reject(error));\n    });\n  }\n}\n","/**\n * Makes a deep copy of an object.\n *\n * @param obj\n * @returns copy of the object\n */\nexport function deepClone<T = any>(obj: object) {\n  return JSON.parse(JSON.stringify(obj)) as T;\n}\n\n/**\n * Applies only the tail call to a function\n * after multiple repeated calls.\n *\n * @param func\n * @param wait\n * @returns callable function\n */\nexport function debounce(func: Function, wait: number = 0) {\n  let timeout;\n  return function (...args) {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => {\n      func.apply(this, args);\n    }, wait);\n  };\n}\n\nconst _sleep_ = {\n  _wait: 0,\n  _timerRef: null,\n  _resolve: null,\n  _reject: null,\n  _prom() {\n    return new Promise<void>((resolve, reject) => {\n      this._resolve = resolve;\n      this._reject = reject;\n    });\n  },\n  now() {\n    const prom = this._prom();\n    this._timerRef = setTimeout(() => this._resolve(), this._wait);\n    return prom;\n  },\n  abort() {\n    clearTimeout(this._timerRef);\n    if (this._reject) {\n      this._reject(\"Kill signal received\");\n    }\n  },\n};\nexport type TSleep = typeof _sleep_;\n/**\n * When called the returned values allows for two method calls:\n *  - `now` which starts the wait time passed and\n *    returns a promise which resolves when time is exhausted\n *  - `abort` which cancels any previously called wait time and\n *    causes the `now` promise to be rejected\n *\n * @param  wait time in milliseconds\n * @returns this\n * @example\n * const stop = sleep(5000)\n * stop.now().then(doSomethingOnSuccess).catch(doSomethingOnAbortTrigger)\n * // if we wanted to cancel stop from any where in the code\n * stop.abort()\n */\nexport function sleep(wait: number): typeof _sleep_ {\n  const inst = Object.create(_sleep_) as typeof _sleep_;\n  inst._wait = wait;\n  return inst;\n}\n","import { Host, IHostProps } from \"./Host\";\nimport { Config } from \"../model/Config\";\nimport { Runner } from \"../model/Runner\";\nimport { Session } from \"../model/Session\";\nimport { E, C } from \"../util/constant\";\n\nconst CLS = {\n  [E.ORM_CONFIGS]: Config,\n  [E.ORM_RUNNERS]: Runner,\n  [E.ORM_SESSIONS]: Session,\n};\n\nexport class Collection extends Host {\n  constructor(dbTable: IHostProps[\"ORM\"]) {\n    super();\n    this.ORM = dbTable;\n    this.constructor = CLS[dbTable];\n  }\n\n  then<T>(func: (arg: T[]) => void) {\n    return new Promise<void>((resolve, reject) => {\n      this.fetch({\n        endpoint:\n          C.HOST_ENDPOINT_GET_ALL + this.parseQuery({ table: this.ORM }),\n        method: \"GET\",\n      })\n        .then((dtoList) => this.deserializeArray<T>(dtoList))\n        .then((list) => resolve(func(list)))\n        .catch((error) => reject(error));\n    });\n  }\n}\n","import { Manage } from \"../controller/Manage\";\nimport { E } from \"../util/constant\";\n\ninterface IConfigMem {\n  /**\n   * Holds an instance of the engine's shadow root element\n   */\n  host: ShadowRoot[\"host\"];\n}\n\ninterface IConfigFilm {\n  src: string;\n  type: string;\n  poster: string;\n  tracks: { label: string; src: string }[];\n  chapters: number[];\n}\n\ninterface IConfigAudio {\n  src: string;\n  type: string;\n  tracks: { label: string; src: string }[];\n}\n\ninterface IConfigVisual {\n  uid: string;\n  elements: {\n    tag: keyof HTMLElementTagNameMap;\n    id: string;\n    text: string;\n    classList: string[];\n    attribute: { [key: string]: string };\n    event: { [key: string]: string };\n    children: IConfigVisual[];\n  }[];\n  riots: { tag: string; id: string }[];\n}\n\ninterface IConfigProps {\n  uid: string;\n  film: IConfigFilm;\n  audio: IConfigAudio;\n  visuals: IConfigVisual[];\n  mem: IConfigMem;\n}\nexport class Config extends Manage {\n  protected mem: IConfigProps[\"mem\"] = null;\n  public film: IConfigProps[\"film\"];\n  public audio: IConfigProps[\"audio\"];\n  public visuals: IConfigProps[\"visuals\"];\n\n  constructor({ film, audio, visuals, uid }: Partial<IConfigProps> = {}) {\n    super(uid);\n    this.film = film;\n    this.audio = audio;\n    this.visuals = visuals;\n    this.ORM = E.ORM_CONFIGS;\n    this._handleSourceLoad = this._handleSourceLoad.bind(this);\n  }\n\n  modify({ film, audio, visuals }: Partial<IConfigProps> = {}) {\n    this.film = film || this.film;\n    this.audio = audio || this.audio;\n    this.visuals = visuals || this.visuals;\n    return this.put<Config>({ uid: this.uid });\n  }\n\n  register() {\n    return this.post<Config>();\n  }\n\n  getAllMem() {\n    return this.mem;\n  }\n\n  getMem<T = any>(key: keyof IConfigProps[\"mem\"]) {\n    return this.mem[key] as unknown as T;\n  }\n\n  setMem(value: Partial<IConfigProps[\"mem\"]>) {\n    this.mem = { ...this.mem, ...value };\n  }\n\n  bind(shadowRoot: ShadowRoot) {\n    this.setMem({\n      host: shadowRoot.host,\n    });\n    this.getMem(\"host\").addEventListener(\n      E.EVENT_ENGINE_ATTACH_VIDEO_SRC,\n      this._handleSourceLoad\n    );\n    this.getMem(\"host\").addEventListener(\n      E.EVENT_ENGINE_ATTACH_AUDIO_SRC,\n      this._handleSourceLoad\n    );\n    return this;\n  }\n\n  unbind() {\n    this.getMem(\"host\").removeEventListener(\n      E.EVENT_ENGINE_ATTACH_VIDEO_SRC,\n      this._handleSourceLoad\n    );\n    this.getMem(\"host\").removeEventListener(\n      E.EVENT_ENGINE_ATTACH_AUDIO_SRC,\n      this._handleSourceLoad\n    );\n    return this;\n  }\n\n  /**\n   * Handles attaching src data to video/audio element.\n   * Attempts to use Media source extension strategy as default\n   * and falls back to HTML5 standard with a URL blob object as src.\n   *\n   * @param event\n   */\n  private _handleSourceLoad({ detail }: CustomEventInit) {\n    const { member, element } = detail || {};\n    const mimeTypeXCodecs = this[member].type;\n    const [mimeType, _codecs] = mimeTypeXCodecs.split(\";\");\n    URL.revokeObjectURL(element.src);\n    if (\n      \"MediaSource\" in window &&\n      MediaSource.isTypeSupported(mimeTypeXCodecs)\n    ) {\n      const source = new MediaSource();\n      element.src = URL.createObjectURL(source);\n      source.onsourceopen = () => {\n        const buffer = source.addSourceBuffer(mimeTypeXCodecs);\n        this._fetch(member)\n          .then((arraybuffer) => {\n            buffer.onupdateend = () => {\n              try {\n                source.endOfStream();\n              } catch (error) {\n                URL.revokeObjectURL(element.src);\n                element.src = URL.createObjectURL(\n                  new Blob([arraybuffer], { type: mimeType })\n                );\n                console.warn(\n                  `Unknown:\\nPossibly unsupported media type codecs or un-fragmented video source\\n\\n${error}`\n                );\n              }\n            };\n            return arraybuffer;\n          })\n          .then((arraybuffer) => {\n            buffer.appendBuffer(arraybuffer);\n          })\n          .catch((error) => {\n            URL.revokeObjectURL(element.src);\n            element.src = this[member].src;\n            console.warn(error);\n          })\n          .finally(() => {\n            element.load();\n          });\n      };\n    } else {\n      element.src = this[member].src;\n      element.load();\n      console.warn(\n        `Unsupported:\\n${this[member].type} mime type\\nMedia source extension is not available in browser\\nfalling back to HTML5 standard src url.`\n      );\n    }\n  }\n\n  /**\n   * Handle XMLHttpRequest to get media data from server.\n   *\n   * @param member string identifying field i.e. (film | audio)\n   * @returns promise which resolves to an buffer\n   */\n  private _fetch(member: string) {\n    let isTooLarge = false;\n    return new Promise<BufferSource>((resolve, reject) => {\n      const req = new XMLHttpRequest();\n      req.responseType = \"arraybuffer\";\n      req.open(\"GET\", this[member].src);\n      req.onprogress = (event) => {\n        if (isTooLarge) {\n          req.abort();\n          reject(\n            `Memory:\\n${member} size exceeds 250mb\\nabandoned using blob src`\n          );\n        }\n        if (event.lengthComputable) {\n          isTooLarge = event.total > 262144000;\n          this.getMem(\"host\")[`_${member}LoadProgress_`] =\n            (event.loaded / event.total) * 0.75;\n        }\n      };\n      req.onload = () => resolve(req.response);\n      req.onerror = () =>\n        reject(\"Network:\\nsomething went wrong during xmlHttpRequest.\");\n      req.send();\n    });\n  }\n}\n","import { Manage } from \"../controller/Manage\";\nimport { debounce, deepClone, sleep, TSleep } from \"../util/lib\";\nimport { A, E, T } from \"../util/constant\";\n\ninterface IRunnerMem {\n  /**\n   * Holds current state of the runner.\n   */\n  state: E.RUNNER_STATE_BUSY | E.RUNNER_STATE_IDLE;\n  /**\n   * Instance of sleep function currently triggered.\n   */\n  delayActionRef: TSleep;\n  /**\n   * Holds timestamp in milliseconds of current\n   * running DELAY_BY action.\n   */\n  delayStart: number;\n  /**\n   * Holds timestamp in milliseconds of when pause\n   * was triggered.\n   */\n  pauseStart: number;\n  /**\n   * Holds a copy of the top to allow mutations.\n   */\n  cloneTop: IRunnerTop;\n  /**\n   * Holds a copy of the stack to allow mutations.\n   */\n  cloneStack: IRunnerTop[];\n  /**\n   * Holds an instance of the engine's shadow root element.\n   */\n  host: ShadowRoot[\"host\"];\n}\n\ninterface IRunnerTop {\n  type:\n    | E.RUNNER_TYPE_TIMER\n    | E.RUNNER_TYPE_INTERACTION\n    | E.RUNNER_TYPE_IMMEDIATE;\n  detail: number | keyof typeof T;\n  actions: [keyof typeof A];\n}\n\ninterface IRunnerProps {\n  uid: string;\n  stack: IRunnerTop[];\n  aside: IRunnerTop[];\n  mem: IRunnerMem;\n}\n\nexport class Runner extends Manage {\n  protected mem: IRunnerProps[\"mem\"] = null;\n  private stack: IRunnerProps[\"stack\"];\n  private aside: IRunnerProps[\"aside\"];\n\n  constructor({ stack, aside, uid }: Partial<IRunnerProps> = {}) {\n    super(uid);\n    this.stack = stack || [];\n    this.aside = aside || [];\n    this.ORM = E.ORM_RUNNERS;\n    this._handleExec = this._handleExec.bind(this);\n    this.seek = debounce(this.seek, 500);\n  }\n\n  modify({ stack, aside }: Partial<IRunnerProps> = {}) {\n    this.stack = stack || this.stack;\n    this.aside = aside || this.aside;\n    return this.put<Runner>({ uid: this.uid });\n  }\n\n  register() {\n    return this.post<Runner>();\n  }\n\n  getAllMem() {\n    return this.mem;\n  }\n\n  getMem<T = any>(key: keyof IRunnerMem) {\n    return this.mem[key] as unknown as T;\n  }\n\n  setMem(value: Partial<IRunnerMem>) {\n    this.mem = { ...this.mem, ...value };\n  }\n\n  bind(shadowRoot: ShadowRoot) {\n    const cloneStack = deepClone<IRunnerTop[]>(this.stack);\n    const cloneTop = cloneStack.pop();\n    this.setMem({\n      state: E.RUNNER_STATE_IDLE,\n      cloneTop,\n      cloneStack,\n      host: shadowRoot.host,\n    });\n    this.getMem(\"host\").addEventListener(\n      E.EVENT_ENGINE_TIMEUPDATE,\n      this._handleExec\n    );\n    this.getMem(\"host\").addEventListener(\n      E.EVENT_ENGINE_VISUAL_INTERACTION,\n      this._handleExec\n    );\n    return this;\n  }\n\n  unbind() {\n    this.getMem(\"host\").removeEventListener(\n      E.EVENT_ENGINE_TIMEUPDATE,\n      this._handleExec\n    );\n    this.getMem(\"host\").removeEventListener(\n      E.EVENT_ENGINE_VISUAL_INTERACTION,\n      this._handleExec\n    );\n    return this;\n  }\n\n  /**\n   * Adjusts the execution stack according to\n   * the `currentTime` of the engine\n   */\n  seek() {\n    this.pause().then(() => {\n      const currentTime = this.getMem(\"host\")._currentTime_;\n      const filteredStack = this.stack.filter(\n        (item) => typeof item.detail === \"number\" && item.detail >= currentTime\n      );\n      const cloneStack = deepClone<IRunnerTop[]>(filteredStack);\n      this.setMem({ cloneStack, pauseStart: null });\n      this._setTop();\n    });\n  }\n\n  /**\n   * Stops the execution of actions\n   * and saves the state to allow for\n   * resuming.\n   */\n  pause() {\n    return new Promise<void>((resolve) => {\n      if (this.getMem(\"delayActionRef\")) {\n        this.getMem<TSleep>(\"delayActionRef\").abort();\n      }\n      this.setMem({ pauseStart: Date.now() });\n      resolve();\n    });\n  }\n\n  /**\n   * Resumes execution of the stack after an engine\n   * pause event was called\n   *\n   */\n  resume() {\n    if (this.getMem(\"cloneTop\")) {\n      const remainingDelay =\n        this.getMem(\"pauseStart\") - this.getMem(\"delayStart\");\n      const topActions = this.getMem<IRunnerTop>(\"cloneTop\").actions;\n      const lastExecTopAction = topActions[topActions.length - 1];\n      this.setMem({ pauseStart: null });\n      if (lastExecTopAction === A.DELAY_BY) {\n        topActions[topActions.length - 1] =\n          `${A.DELAY_BY}::${remainingDelay}` as any;\n      }\n      if (this.getMem(\"state\") === E.RUNNER_STATE_BUSY) {\n        this._exec();\n      }\n    } else {\n      this.setMem({ pauseStart: null });\n    }\n  }\n\n  /**\n   * Handles matching calls to execute a stack item to the current\n   * top item if the top item's detail field's value matches any\n   * of the callers `CustomEvent.detail` entries, `_exec` function\n   * is run.\n   *\n   * @param CustomEvent Custom event object having a `detail` property\n   */\n  private _handleExec({ detail }: CustomEvent) {\n    if (\n      !this.getMem(\"host\")._isExperiencePaused_ &&\n      this.getMem(\"cloneTop\") &&\n      this.getMem(\"state\") === E.RUNNER_STATE_IDLE\n    ) {\n      const { currentTime, eventType, asideIndex } = detail || {\n        currentTime: this.getMem(\"host\")._currentTime_,\n      };\n      switch (this.getMem(\"cloneTop\").type) {\n        case E.RUNNER_TYPE_IMMEDIATE:\n          this._exec();\n          break;\n        case E.RUNNER_TYPE_TIMER:\n          if (\n            this.getMem(\"cloneTop\").detail === Math.floor(currentTime as number)\n          ) {\n            this._exec();\n          }\n          break;\n        case E.RUNNER_TYPE_INTERACTION:\n          if (T[this.getMem(\"cloneTop\").detail] === eventType) {\n            this._exec(asideIndex);\n          }\n          break;\n        default:\n          console.warn(\n            `Undefined:\\n${this.getMem(\"cloneTop\").type} is not known`\n          );\n          break;\n      }\n    }\n  }\n\n  /**\n   * Set the top item after the current one's actions are exhausted\n   * Also put the runner in an idle state to allow it receive new\n   * calls.\n   */\n  private _setTop() {\n    const cloneTop = this.getMem(\"cloneStack\").pop();\n    this.setMem({\n      cloneTop,\n      state: cloneTop ? E.RUNNER_STATE_IDLE : E.RUNNER_STATE_BUSY,\n    });\n    if (cloneTop && this.getMem(\"cloneTop\").type === E.RUNNER_TYPE_IMMEDIATE) {\n      const topCondition = this.getMem(\"cloneTop\")\n        .detail as IRunnerTop[\"detail\"];\n      const detail =\n        typeof topCondition === \"number\"\n          ? topCondition\n          : T[this.getMem(\"cloneTop\").detail];\n      this._handleExec(\n        new CustomEvent(null, {\n          detail: { detail },\n        })\n      );\n    }\n  }\n\n  /**\n   * Runs all instructions in the top.actions stack.\n   * The execution is stop when there is a pause signal\n   * from the engine.\n   *\n   * @param asideIndex\n   * @returns void\n   */\n  private async _exec(asideIndex?: number) {\n    this.setMem({ state: E.RUNNER_STATE_BUSY });\n    const topActions = this.getMem<IRunnerTop>(\"cloneTop\").actions;\n    while (topActions.length) {\n      const [namespace, arg = null] =\n        topActions[topActions.length - 1].split(\"::\");\n      const name = A[namespace];\n      switch (name) {\n        case A.DELAY_BY:\n          this.setMem({\n            delayActionRef: sleep(\n              (1000 * parseInt(arg)) / this.getMem(\"host\")._playbackRate_\n            ),\n            delayStart: Date.now(),\n          });\n          try {\n            await this.getMem<TSleep>(\"delayActionRef\").now();\n          } catch (error) {\n            console.warn(`Interruption:\\n${error} for ${namespace}`);\n          }\n          break;\n        case A.PUSH_ASIDE:\n          const idx = arg || asideIndex;\n          if (this.aside[idx]) {\n            this.getMem(\"cloneStack\").push(\n              deepClone<IRunnerTop>(this.aside[idx])\n            );\n          } else {\n            console.warn(`Undefined:\\naside index ${idx} is out of bounds`);\n          }\n          break;\n        default:\n          if (this.getMem(\"host\")[name]) {\n            this.getMem(\"host\")[name](arg);\n          } else {\n            console.warn(`Undefined:\\n${name} is NOT a valid action`);\n          }\n          break;\n      }\n      if (this.getMem(\"pauseStart\")) return;\n      topActions.pop();\n    }\n    this._setTop();\n  }\n}\n","import { Manage } from \"../controller/Manage\";\nimport { E } from \"../util/constant\";\n\ninterface ISessionProps {\n  uid: string;\n}\n\nexport class Session extends Manage {\n  constructor({ uid }: Partial<ISessionProps> = {}) {\n    super(uid);\n\n    this.ORM = E.ORM_SESSIONS;\n  }\n\n  modify({}: Partial<ISessionProps> = {}) {\n    return this.put<Session>({ uid: this.uid });\n  }\n\n  register() {\n    return this.post<Session>();\n  }\n}\n","import type { Config } from \"../model/Config\";\nimport type { Runner } from \"../model/Runner\";\nimport { Handle } from \"./Handle\";\nimport { Collection } from \"../controller/Collection\";\nimport { C, E } from \"../util/constant\";\n\ninterface ICoreProps {}\n\nexport class Core extends Handle {\n  constructor({}: Partial<ICoreProps> = {}) {\n    super();\n  }\n\n  protected onEngineReady(callback: Function) {\n    this._loadDataSrc().then(() => {\n      callback.apply(this);\n      this._extendElementPrototype();\n      this.dispatchEvent(new CustomEvent(E.EVENT_ENGINE_READY));\n    });\n  }\n\n  protected onDataChange(callback: Function) {\n    if (this.isConnected && this.configs && this.root.childNodes.length) {\n      this._loadDataSrc().then(() => {\n        callback.apply(this);\n      });\n    }\n  }\n\n  protected onEngineDestroyed(callback: Function) {\n    this._shrinkElementPrototype();\n    callback.apply(this);\n  }\n\n  private _loadDataSrc() {\n    return new Promise<void>((resolve, reject) => {\n      fetch(this.data)\n        .then((response) => response.json())\n        .then((data) => C.update(\"DB\", data))\n        .then(() => {\n          new Collection(E.ORM_CONFIGS)\n            .then<Config>((configs) => {\n              this.configs = configs;\n              this.config = this.configs[this.conf];\n            })\n            .then(() => {\n              new Collection(E.ORM_RUNNERS)\n                .then<Runner>((runners) => {\n                  this.runners = runners;\n                  this.runner = this.runners[this.run];\n                  resolve();\n                })\n                .catch((error) => reject(error));\n            })\n            .catch((error) => reject(error));\n        });\n    });\n  }\n}\n","import { Core } from \"./Core\";\nimport { C, E } from \"../util/constant\";\n\ninterface ILoaderProps {}\n\nexport class Loader extends Core {\n  constructor({}: Partial<ILoaderProps> = {}) {\n    super();\n  }\n\n  protected _addLoaderElement() {\n    const loader = this._createLoader();\n    loader.append(\n      this._createWelcomeGroup(), // z-index 2\n      this._createNetworkErrorGroup(), // z-index 2\n      this._createVideoLoadProgressGroup(), // z-index 3\n      this._createEngineBusySpinner(), // z-index 3\n      this._createVideoCaptionContainer(), // z-index 0\n      this._createAudioCaptionContainer(), // z-index 0\n      this._createResumePlayBtn() // z-index 1\n    );\n    this._addLoaderListener(loader);\n    return loader;\n  }\n\n  private _createLoader() {\n    const container = document.createElement(\"div\");\n    container.id = E.CSS_LOADER_CONTAINER;\n    return container;\n  }\n\n  private _createWelcomeGroup() {\n    const wrapper = document.createElement(\"span\");\n    const text = document.createElement(\"span\");\n    const btn = document.createElement(\"button\");\n    wrapper.id = E.CSS_LOADER_WELCOME_GROUP;\n    text.innerHTML = `${C.WELCOME_CTA_MSG}${C.POWERED_BY_IVE_MSG}`;\n    btn.classList.add(E.CSS_CLS_ICON_OK_BG);\n    btn.ariaLabel = \"okay\";\n    btn.disabled = true;\n    btn.onclick = this._initExperience_.bind(this);\n    wrapper.append(text, btn);\n    return wrapper;\n  }\n\n  private _createNetworkErrorGroup() {\n    const wrapper = document.createElement(\"span\");\n    const text = document.createElement(\"span\");\n    const btn = document.createElement(\"button\");\n    wrapper.id = E.CSS_LOADER_NETWORK_ERROR_GROUP;\n    wrapper.classList.add(E.CSS_CLS_HIDDEN);\n    text.innerHTML = `${C.NETWORK_ERROR_CTA_MSG}`;\n    btn.classList.add(E.CSS_CLS_ICON_RELOAD_BG);\n    btn.ariaLabel = \"reload\";\n    btn.onclick = () => location.reload();\n    wrapper.append(text, btn);\n    return wrapper;\n  }\n\n  private _createVideoLoadProgressGroup() {\n    const wrapper = document.createElement(\"span\");\n    const count = document.createTextNode(\"0%\");\n    const progressBar = document.createElement(\"progress\");\n    wrapper.id = E.CSS_LOADER_VIDEO_LOAD_PROGRESS_GROUP;\n    wrapper.classList.add(E.CSS_CLS_HIDDEN);\n    progressBar.ariaLabel = \"video loading\";\n    progressBar.value = 0;\n    progressBar.max = 100;\n    wrapper.append(count, progressBar);\n    return wrapper;\n  }\n\n  private _createEngineBusySpinner() {\n    const node = document.createElement(\"span\");\n    node.id = E.CSS_LOADER_ENGINE_BUSY_GROUP;\n    node.classList.add(E.CSS_CLS_HIDDEN);\n    return node;\n  }\n\n  private _createVideoCaptionContainer() {\n    const node = document.createElement(\"span\");\n    node.id = E.CSS_LOADER_VIDEO_CAPTION_CONTAINER;\n    node.classList.add(E.CSS_CLS_HIDDEN);\n    return node;\n  }\n\n  private _createAudioCaptionContainer() {\n    const node = document.createElement(\"span\");\n    node.id = E.CSS_LOADER_AUDIO_CAPTION_CONTAINER;\n    node.classList.add(E.CSS_CLS_HIDDEN);\n    return node;\n  }\n\n  private _createResumePlayBtn() {\n    const btn = document.createElement(\"button\");\n    btn.id = E.CSS_LOADER_RESUME_PLAY_BTN;\n    btn.ariaLabel = \"resume experience\";\n    btn.classList.add(E.CSS_CLS_HIDDEN, E.CSS_CLS_ICON_RESUME_PLAY_BG);\n    btn.onclick = this._toggleExperiencePlay_.bind(this);\n    return btn;\n  }\n\n  private _addLoaderListener(loader: HTMLElement) {\n    const [welcomeCTAgroup, networkErrorGroup, progressGroup, busySpinner] =\n      loader.childNodes as any;\n    const [, okayBtn] = welcomeCTAgroup.childNodes as any;\n    this.addEventListener(E.EVENT_ENGINE_EXPERIENCE_LOADING, () => {\n      const [count, progress] = progressGroup.childNodes as any;\n      if (this._isFilmLoadError_ || this._isAudioLoadError_) {\n        welcomeCTAgroup.hideMe();\n        progressGroup.hideMe();\n        busySpinner.hideMe();\n        (<any>this.root.getElementById(E.CSS_CONTROL_CONTAINER)).hideMe();\n        networkErrorGroup.showMe();\n        return;\n      }\n      if ((this._filmLoadProgress_ + this._audioLoadProgress_) / 2 < 0.85) {\n        progressGroup.showMe();\n        const percentage = Math.round(\n          ((this._filmLoadProgress_ + this._audioLoadProgress_) / 2) * 100\n        );\n        count.nodeValue = `${percentage}%`;\n        progress.value = percentage;\n        progress.innerHTML = `${percentage}% loaded`;\n      } else {\n        okayBtn.disabled = false;\n        progressGroup.hideMe();\n      }\n      if (this._isBuffering_) {\n        busySpinner.showMe();\n      } else {\n        busySpinner.hideMe();\n      }\n    });\n  }\n}\n","import { Loader } from \"./Loader\";\nimport { E } from \"../util/constant\";\n\ninterface IControlProps {}\n\nexport class Control extends Loader {\n  constructor({}: Partial<IControlProps> = {}) {\n    super();\n  }\n\n  protected _addControlElement() {\n    const control = this._createControl();\n    control.append(\n      this._createControlProgressTimeGroup(),\n      this._createControlCTAGroup()\n    );\n    this._addControlListener(control);\n    return control;\n  }\n\n  private _createControl() {\n    const container = document.createElement(\"aside\");\n    container.id = E.CSS_CONTROL_CONTAINER;\n    container.classList.add(E.CSS_CLS_HIDDEN);\n    return container;\n  }\n\n  private _createControlProgressTimeGroup() {\n    const wrapper = document.createElement(\"span\");\n    const progress = document.createElement(\"span\");\n    const played = document.createElement(\"span\");\n    const buffered = document.createElement(\"span\");\n    const range = document.createElement(\"input\");\n    const text = document.createElement(\"span\");\n    wrapper.id = E.CSS_CONTROL_PROGRESS_TIME_GROUP;\n    text.id = E.CSS_CONTROL_TIME_PER_DURATION;\n    progress.id = E.CSS_CONTROL_PROGRESS_BAR;\n    progress.ariaLabel = \"film progress bar\";\n    progress.tabIndex = 0;\n    progress.setAttribute(\"role\", \"progressbar\");\n    progress.setAttribute(\"aria-valuenow\", \"0\");\n    progress.setAttribute(\"aria-valuemin\", \"0\");\n    progress.setAttribute(\"aria-valuemax\", \"100\");\n    progress.setAttribute(\"aria-valuetext\", \"0% played\");\n    range.type = \"range\";\n    range.name = \"film range\";\n    range.min = \"0\";\n    range.max = \"1\";\n    range.step = \"0.01\";\n    range.value = \"0\";\n    range.ariaLabel = \"film range slider\";\n    range.oninput = this._changeCurrentTime_.bind(this);\n    progress.append(played, buffered, range);\n    wrapper.append(progress, text);\n    return wrapper;\n  }\n\n  private _createControlPreviousBtnWrapper() {\n    const btn = document.createElement(\"button\");\n    btn.ariaLabel = \"previous experience\";\n    btn.id = E.CSS_CONTROL_PREVIOUS_BTN;\n    btn.classList.add(E.CSS_CLS_ICON_PREV_BG);\n    btn.onclick = this._changeExperience_.bind(this);\n    return btn;\n  }\n\n  private _createControlPlayPauseBtnWrapper() {\n    const btn = document.createElement(\"button\");\n    btn.ariaLabel = \"play/pause\";\n    btn.id = E.CSS_CONTROL_PLAY_PAUSE_BTN;\n    btn.classList.add(E.CSS_CLS_ICON_PLAY_BG);\n    btn.onclick = this._toggleExperiencePlay_.bind(this);\n    return btn;\n  }\n\n  private _createControlNextBtnWrapper() {\n    const btn = document.createElement(\"button\");\n    btn.ariaLabel = \"next experience\";\n    btn.id = E.CSS_CONTROL_NEXT_BTN;\n    btn.classList.add(E.CSS_CLS_ICON_NEXT_BG);\n    btn.onclick = this._changeExperience_.bind(this);\n    return btn;\n  }\n\n  private _createControlRewind15secBtnWrapper() {\n    const btn = document.createElement(\"button\");\n    btn.ariaLabel = \"rewind 15 seconds\";\n    btn.id = E.CSS_CONTROL_REWIND_15SEC_BTN;\n    btn.classList.add(E.CSS_CLS_ICON_REWIND_15SEC_BG);\n    btn.onclick = () => this._changeCurrentTime_(null, this._currentTime_ - 15);\n    return btn;\n  }\n\n  private _createControlForward15secBtnWrapper() {\n    const btn = document.createElement(\"button\");\n    btn.ariaLabel = \"forward 15 seconds\";\n    btn.id = E.CSS_CONTROL_FORWARD_15SEC_BTN;\n    btn.classList.add(E.CSS_CLS_ICON_FORWARD_15SEC_BG);\n    btn.onclick = () => this._changeCurrentTime_(null, this._currentTime_ + 15);\n    return btn;\n  }\n\n  private _createControlVolumeGroup() {\n    const wrapper = document.createElement(\"span\");\n    const btn = document.createElement(\"button\");\n    const range = document.createElement(\"input\");\n    wrapper.id = E.CSS_CONTROL_VOLUME_GROUP;\n    range.oninput = this._changeVolume_.bind(this);\n    btn.id = E.CSS_CONTROL_VOLUME_BTN;\n    btn.classList.add(E.CSS_CLS_ICON_VOLUME_BG);\n    btn.ariaLabel = \"show volume slider\";\n    btn.onclick = this._toggleMute_.bind(this);\n    range.id = E.CSS_CONTROL_VOLUME_RANGE_INPUT;\n    range.type = \"range\";\n    range.name = \"volume\";\n    range.min = \"0\";\n    range.max = \"1\";\n    range.step = \"0.1\";\n    range.ariaLabel = \"volume slider\";\n    wrapper.append(btn, range);\n    return wrapper;\n  }\n\n  private _createControlCaptionGroup() {\n    const btn = document.createElement(\"button\");\n    btn.id = E.CSS_CONTROL_CAPTION_BTN;\n    btn.classList.add(E.CSS_CLS_ICON_CAPTION_BG);\n    btn.ariaLabel = \"open caption menu\";\n    btn.setAttribute(\"aria-expanded\", \"false\");\n    btn.setAttribute(\"aria-controls\", E.CSS_CONTROL_POPUP_CONTAINER);\n    btn.onclick = this._togglePopupMenu.bind(this);\n    return btn;\n  }\n  private [E.CSS_CONTROL_CAPTION_BTN]() {\n    const associateBtn = this.root.getElementById(E.CSS_CONTROL_CAPTION_BTN);\n    const ul = document.createElement(\"ul\");\n    ul.id = E.CSS_CONTROL_CAPTION_LIST_GROUP;\n    const list = [E.CC_OFF, ...this.config.film.tracks.map((t) => t.label)].map(\n      (label) => {\n        const li = document.createElement(\"li\");\n        const a = document.createElement(\"a\");\n        const isSelected = associateBtn.dataset.selectedValue === label;\n        a.href = \"javascript:void 0;\";\n        a.innerText = label;\n        a.dataset.selected = isSelected.toString();\n        a.dataset.associateBtnId = associateBtn.id;\n        a.onclick = this._changeCaption_.bind(this);\n        li.appendChild(a);\n        return li;\n      }\n    );\n    ul.append(...list);\n    return ul;\n  }\n\n  private _createControlPlaybackRateGroup() {\n    const btn = document.createElement(\"button\");\n    btn.id = E.CSS_CONTROL_PLAYBACK_RATE_BTN;\n    btn.ariaLabel = \"open playback rate menu\";\n    btn.innerText = \"--\";\n    btn.setAttribute(\"aria-expanded\", \"false\");\n    btn.setAttribute(\"aria-controls\", E.CSS_CONTROL_POPUP_CONTAINER);\n    btn.onclick = this._togglePopupMenu.bind(this);\n    return btn;\n  }\n  private [E.CSS_CONTROL_PLAYBACK_RATE_BTN]() {\n    const associateBtn = this.root.getElementById(\n      E.CSS_CONTROL_PLAYBACK_RATE_BTN\n    );\n    const ul = document.createElement(\"ul\");\n    ul.id = E.CSS_CONTROL_PLAYBACK_RATE_LIST_GROUP;\n    const list = [\n      \"0.25\",\n      \"0.50\",\n      \"0.75\",\n      \"1.00\",\n      \"1.25\",\n      \"1.50\",\n      \"1.75\",\n      \"2.00\",\n    ].map((rate) => {\n      const li = document.createElement(\"li\");\n      const a = document.createElement(\"a\");\n      const isSelected = associateBtn.dataset.selectedValue === rate;\n      a.href = \"javascript:void 0;\";\n      a.innerText = rate;\n      a.dataset.associateBtnId = associateBtn.id;\n      a.dataset.selected = isSelected.toString();\n      a.onclick = this._changePlaybackRate_.bind(this);\n      li.appendChild(a);\n      return li;\n    });\n    ul.append(...list);\n    return ul;\n  }\n\n  private _createControlFullscreenBtnWrapper() {\n    const btn = document.createElement(\"button\");\n    btn.ariaLabel = \"open in fullscreen\";\n    btn.id = E.CSS_CONTROL_FULLSCREEN_BTN;\n    btn.classList.add(E.CSS_CLS_ICON_FULLSCREEN_BG);\n    btn.onclick = this._toggleFullscreen_.bind(this);\n    return btn;\n  }\n\n  private _createControlCTAGroup() {\n    const wrapper = document.createElement(\"span\");\n    const space = document.createElement(\"span\");\n    wrapper.id = E.CSS_CONTROL_CTA_GROUP;\n    space.style.flex = \"1\";\n    space.style.visibility = \"hidden\";\n    wrapper.append(\n      this._createControlPreviousBtnWrapper(),\n      this._createControlPlayPauseBtnWrapper(),\n      this._createControlNextBtnWrapper(),\n      this._createControlRewind15secBtnWrapper(),\n      this._createControlForward15secBtnWrapper(),\n      this._createControlVolumeGroup(),\n      space,\n      this._createControlCaptionGroup(),\n      this._createControlPlaybackRateGroup(),\n      this._createControlFullscreenBtnWrapper()\n    );\n    return wrapper;\n  }\n\n  private _createControlPopupList() {\n    const container = document.createElement(\"span\");\n    const header = document.createElement(\"span\");\n    const content = document.createElement(\"span\");\n    const closeBtn = document.createElement(\"button\");\n    container.id = E.CSS_CONTROL_POPUP_CONTAINER;\n    closeBtn.id = E.CSS_CONTROL_CLOSE_POPUP_BTN;\n    closeBtn.classList.add(E.CSS_CLS_ICON_CLOSE_BG);\n    closeBtn.onclick = this._togglePopupMenu.bind(this);\n    content.onclick = this._togglePopupMenu.bind(this);\n    header.appendChild(closeBtn);\n    container.append(header, content);\n    return [container, closeBtn, content];\n  }\n\n  private _togglePopupMenu(event: Event) {\n    let popup = this.root.getElementById(E.CSS_CONTROL_POPUP_CONTAINER) as any;\n    const associateBtn = this.root.getElementById(\n      (<any>event.currentTarget).dataset.associateBtnId ||\n        (<any>event.currentTarget).id\n    );\n    if (!popup) {\n      const [container, closeBtn, content] = this._createControlPopupList();\n      popup = container;\n      popup.dataset.associateBtnId = associateBtn.id;\n      closeBtn.dataset.associateBtnId = associateBtn.id;\n      content.dataset.associateBtnId = associateBtn.id;\n      content.appendChild(this[associateBtn.id]());\n      associateBtn.setAttribute(\"aria-expanded\", \"true\");\n      associateBtn.after(popup);\n      popup.querySelector(\"a[data-selected='true']\").scrollIntoView();\n      return;\n    }\n    if (popup.dataset.associateBtnId === associateBtn.id) {\n      popup.remove();\n      associateBtn.setAttribute(\"aria-expanded\", \"false\");\n    } else {\n      popup.remove();\n      const prevAssociateBtn = this.root.getElementById(\n        popup.dataset.associateBtnId\n      );\n      const [container, closeBtn, content] = this._createControlPopupList();\n      popup = container;\n      popup.dataset.associateBtnId = associateBtn.id;\n      closeBtn.dataset.associateBtnId = associateBtn.id;\n      content.dataset.associateBtnId = associateBtn.id;\n      content.appendChild(this[associateBtn.id]());\n      associateBtn.setAttribute(\"aria-expanded\", \"true\");\n      prevAssociateBtn.setAttribute(\"aria-expanded\", \"false\");\n      associateBtn.after(popup);\n      popup.querySelector(\"a[data-selected='true']\").scrollIntoView();\n    }\n  }\n\n  /**\n   * Trigger a change in the disabled state\n   * or background of a control button to sync\n   * with current engine state.\n   */\n  private _updateControlBtnState() {\n    const currentIdx = parseInt(this.getAttribute(\"conf\"));\n    const playPauseBtn = this.root.getElementById(\n      E.CSS_CONTROL_PLAY_PAUSE_BTN\n    ) as any;\n    const rewind15SecBtn = this.root.getElementById(\n      E.CSS_CONTROL_REWIND_15SEC_BTN\n    ) as any;\n    const forward15SecBtn = this.root.getElementById(\n      E.CSS_CONTROL_FORWARD_15SEC_BTN\n    ) as any;\n    const prevBtn = this.root.getElementById(E.CSS_CONTROL_PREVIOUS_BTN) as any;\n    const nextBtn = this.root.getElementById(E.CSS_CONTROL_NEXT_BTN) as any;\n    if (this._isExperiencePaused_) {\n      playPauseBtn.classList.remove(E.CSS_CLS_ICON_PAUSE_BG);\n      playPauseBtn.classList.add(E.CSS_CLS_ICON_PLAY_BG);\n    } else {\n      playPauseBtn.classList.remove(E.CSS_CLS_ICON_PLAY_BG);\n      playPauseBtn.classList.add(E.CSS_CLS_ICON_PAUSE_BG);\n    }\n    if (this._currentTime_ > 15) {\n      rewind15SecBtn.disabled = false;\n    } else {\n      rewind15SecBtn.disabled = true;\n    }\n    if (this._currentTime_ > this._duration_ - 15) {\n      forward15SecBtn.disabled = true;\n    } else {\n      forward15SecBtn.disabled = false;\n    }\n    if (currentIdx > 0) {\n      prevBtn.disabled = false;\n    } else {\n      prevBtn.disabled = true;\n    }\n    if (currentIdx < this.configs.length - 1) {\n      nextBtn.disabled = false;\n    } else {\n      nextBtn.disabled = true;\n    }\n  }\n\n  private _updateControlChapterJump() {\n    if (this._currentTime_ > 1 && this._currentTime_ < 3) {\n      const progressBar = this.root.getElementById(\n        E.CSS_CONTROL_PROGRESS_BAR\n      ) as HTMLSpanElement;\n      const existingNodes = progressBar.querySelectorAll(\n        `.${E.CSS_CLS_CHAPTER_LINK}`\n      );\n      existingNodes.forEach((node) => node.remove());\n      const nodeList: HTMLSpanElement[] = [];\n      for (const chapter of this.config.film.chapters) {\n        const a = document.createElement(\"a\");\n        a.classList.add(E.CSS_CLS_CHAPTER_LINK);\n        a.href = \"javascript:void 0;\";\n        a.style.left = `${(chapter / this._duration_) * 100}%`;\n        a.onclick = () => this._changeCurrentTime_(null, chapter);\n        nodeList.push(a);\n      }\n      progressBar.append(...nodeList);\n    }\n  }\n\n  /**\n   * Sets needed listeners on the container element\n   * and reacts as needed.\n   *\n   * @param element\n   */\n  private _addControlListener(control: HTMLElement) {\n    const [progressGroup] = control.childNodes as any;\n    const [progressBar, timePerDuration] = progressGroup.childNodes as any;\n    const [played, buffered] = progressBar.childNodes as any;\n    this.addEventListener(E.EVENT_ENGINE_EXPERIENCE_LOADING, () => {\n      timePerDuration.innerText = this._timePerDuration_;\n      played.style.width = `${progressBar.getAttribute(\"aria-valuenow\")}%`;\n      buffered.style.width = `${this._filmBuffered_ * 100}%`;\n    });\n    this.addEventListener(E.EVENT_ENGINE_TIMEUPDATE, () => {\n      const playedAmount = (this._currentTime_ / this._duration_) * 100;\n      timePerDuration.innerText = this._timePerDuration_;\n      progressBar.setAttribute(\"aria-valuenow\", playedAmount.toString());\n      progressBar.setAttribute(\"aria-valuetext\", `${playedAmount}% played`);\n      played.style.width = `${progressBar.getAttribute(\"aria-valuenow\")}%`;\n      buffered.style.width = `${this._filmBuffered_ * 100}%`;\n      this._updateControlBtnState();\n      this._updateControlChapterJump();\n    });\n    this.addEventListener(\n      E.EVENT_ENGINE_VISUAL_PRESENTED_TIMEUPDATE,\n      ({ detail }: CustomEventInit) => {\n        if (detail.currentTime) {\n          progressGroup.classList.add(E.CSS_CLS_VISUAL_SHOWING);\n        } else {\n          progressGroup.classList.remove(E.CSS_CLS_VISUAL_SHOWING);\n        }\n      }\n    );\n  }\n}\n","import { Control } from \"./Control\";\nimport { component } from \"../util/vendor\";\nimport { E, T } from \"../util/constant\";\n\ndeclare var _ive_script_;\n\ninterface IVisualProps {}\n\nexport class Visual extends Control {\n  constructor({}: Partial<IVisualProps> = {}) {\n    super();\n  }\n\n  protected _addVisualElement() {\n    const visual = this._createVisual();\n    this._addVisualListener(visual);\n    return visual;\n  }\n\n  private _createVisual() {\n    const container = document.createElement(\"main\");\n    container.id = E.CSS_VISUAL_CONTAINER;\n    container.classList.add(E.CSS_CLS_HIDDEN);\n    container.ontouchend =\n      this._toggleControlVisibilityOnTouchDevice_.bind(this);\n    container[\"load\"] = (idx: number) => {\n      const content = this._createLazyVisualContent(idx);\n      try {\n        container.replaceChildren(...content);\n      } catch (error) {\n        container.innerHTML = \"\";\n        container.append(...content);\n        console.warn(\n          `Compatibility:\\nreplaceChildren not supported by browser\\n\\n${error}`\n        );\n      }\n    };\n    return container;\n  }\n\n  /**\n   * Gets the visual content creation instruction (at index passed as arg) from the data json\n   * and renders them. Each element is lazily rendered once only when it is needed.\n   * Then once rendered it is kept in memory so that the state will be preserved\n   * and when necessary to rerender same element the existing reference in memory\n   * will be called and displayed.\n   *\n   * @param idx\n   */\n  private _createLazyVisualContent(idx: number) {\n    if (!this._visualElements_[idx]) {\n      this._visualElements_[idx] = [\n        ...this._renderElements(this.config.visuals[idx].elements || []),\n        ...this._renderRiots(this.config.visuals[idx].riots || []),\n      ];\n    }\n    return this._visualElements_[idx];\n  }\n\n  private _renderElements(\n    data: typeof this.config.visuals[number][\"elements\"]\n  ) {\n    const elements: HTMLElement[] = [];\n    for (const {\n      tag,\n      id,\n      text,\n      classList,\n      attribute,\n      event,\n      children,\n    } of data) {\n      const elem = document.createElement(tag);\n      elem.ontouchstart = (e) => e.stopImmediatePropagation();\n      elem.ontouchend = (e) => e.stopImmediatePropagation();\n      elem.onclick = (e) => e.stopImmediatePropagation();\n      if (id) elem.id = id;\n      if (text) elem.innerText = text;\n      elem.classList.add(...classList);\n      for (const key in attribute) {\n        elem.setAttribute(key, attribute[key]);\n      }\n      for (const key in event) {\n        elem[key] = (e: Event) => {\n          e.stopImmediatePropagation();\n          if (_ive_script_ && _ive_script_.hasOwnProperty(event[key])) {\n            _ive_script_[event[key]].call(this, e).then((asideIndex: number) =>\n              this.dispatchEvent(\n                new CustomEvent(E.EVENT_ENGINE_VISUAL_INTERACTION, {\n                  detail: { eventType: e.type, asideIndex },\n                })\n              )\n            );\n          } else {\n            console.warn(\n              `Undefined:\\n${event[key]} is not a member of _ive_script_`\n            );\n          }\n        };\n      }\n      // repeat recursively for children\n      if (children) {\n        elem.append(...this._renderElements(children as any));\n      }\n      elements.push(elem);\n    }\n    return elements;\n  }\n\n  private _renderRiots(data: typeof this.config.visuals[number][\"riots\"]) {\n    const elements: HTMLElement[] = [];\n    for (const { tag, id } of data) {\n      if (_ive_script_ && _ive_script_.hasOwnProperty(tag)) {\n        const elem = document.createElement(\"div\");\n        elem.ontouchstart = (e) => e.stopImmediatePropagation();\n        elem.ontouchend = (e) => e.stopImmediatePropagation();\n        elem.onclick = (e) => e.stopImmediatePropagation();\n        elem.id = id;\n        component(_ive_script_[tag])(elem);\n        _ive_script_[tag][\"exports\"][\"onInteraction\"] = (asideIndex: number) =>\n          this.dispatchEvent(\n            new CustomEvent(E.EVENT_ENGINE_VISUAL_INTERACTION, {\n              detail: { eventType: T.RIOT_INTERACTION, asideIndex },\n            })\n          );\n        elements.push(elem);\n      } else {\n        console.warn(`Undefined:\\n${tag} is not a member of _ive_script_`);\n      }\n    }\n    return elements;\n  }\n\n  /**\n   * Sets needed listeners on the container element\n   * and reacts as needed.\n   *\n   * @param visual\n   */\n  private _addVisualListener(visual: HTMLElement) {\n    let timerRef;\n    let isShowing = false;\n    let currentTime = 0;\n    let totalTime = 0;\n    const config = { attributes: true };\n    const observer = new MutationObserver((mutationsList) => {\n      for (const mutation of mutationsList) {\n        if (mutation.type === \"attributes\") {\n          const currentTarget = <HTMLElement>mutation.target;\n          isShowing = !currentTarget.classList.contains(E.CSS_CLS_HIDDEN);\n          if (isShowing) {\n            currentTime = 0;\n            timerRef = setInterval(() => {\n              currentTime++;\n              this.dispatchEvent(\n                new CustomEvent(E.EVENT_ENGINE_VISUAL_PRESENTED_TIMEUPDATE, {\n                  detail: { currentTime, totalTime: totalTime || currentTime },\n                })\n              );\n            }, 1000);\n          } else {\n            totalTime = totalTime + currentTime;\n            currentTime = 0;\n            clearInterval(timerRef);\n          }\n          this.dispatchEvent(\n            new CustomEvent(E.EVENT_ENGINE_VISUAL_PRESENTED_TIMEUPDATE, {\n              detail: { currentTime, totalTime },\n            })\n          );\n        }\n      }\n    });\n    observer.observe(visual, config);\n    // observer.disconnect(); // <-- TODO: find best place to clean up\n  }\n}\n","import { Visual } from \"./Visual\";\nimport { E } from \"../util/constant\";\n\ninterface IAudioProps {}\n\nexport class Audio extends Visual {\n  constructor({}: Partial<IAudioProps> = {}) {\n    super();\n  }\n\n  protected _addAudioElement() {\n    const audio = this._createAudio();\n    audio.append(...this._createAudioTrack(), this._createNoAudioSupport());\n    this._addAudioEventListener(audio);\n    this._addAudioSrc(audio);\n    return audio;\n  }\n\n  protected _addAudioSrc(audio?: HTMLAudioElement) {\n    const element =\n      audio ||\n      (this.root.getElementById(E.CSS_AUDIO_ELEMENT) as HTMLAudioElement);\n    this.dispatchEvent(\n      new CustomEvent(E.EVENT_ENGINE_ATTACH_AUDIO_SRC, {\n        detail: { element, member: \"audio\" },\n      })\n    );\n  }\n\n  private _createAudio() {\n    const audio = document.createElement(\"audio\");\n    audio.id = E.CSS_AUDIO_ELEMENT;\n    audio.autoplay = false;\n    audio.controls = false;\n    audio.loop = false;\n    audio.muted = true;\n    audio.preload = \"metadata\";\n    return audio;\n  }\n\n  private _createAudioTrack() {\n    const nodes: HTMLTrackElement[] = [];\n    for (const { label, src } of this.config.audio.tracks) {\n      const trackElement = document.createElement(\"track\");\n      trackElement.kind = \"captions\";\n      trackElement.label = label;\n      trackElement.src = src;\n      trackElement.default = false;\n      trackElement.srclang = label.substring(0, 2).toLowerCase();\n      trackElement.classList.add(E.CSS_CLS_HIDDEN);\n      nodes.push(trackElement);\n    }\n    return nodes;\n  }\n\n  private _createNoAudioSupport() {\n    return document.createTextNode(\"HTML5 audio not supported by browser\");\n  }\n\n  /**\n   * Sets needed listeners on HTML audio element\n   * and reacts as needed.\n   *\n   * @param audio\n   */\n  private _addAudioEventListener(audio: HTMLAudioElement) {\n    audio.onprogress = (_event) => {\n      const duration = audio.duration;\n      const buffer = audio.buffered;\n      for (let i = 1; i <= buffer.length; i++) {\n        const start = buffer.start(buffer.length - i);\n        const end = buffer.end(buffer.length - i);\n        if (start < audio.currentTime) {\n          this._audioBuffered_ = end / duration;\n          break;\n        }\n      }\n      if (this._audioBuffered_ > 0.75) {\n        this._audioLoadProgress_ = 1;\n      } else {\n        this._audioLoadProgress_ =\n          this._audioLoadProgress_ + (1 - this._audioLoadProgress_) * 0.1;\n      }\n    };\n    audio.oncanplaythrough = () => {\n      this._audioLoadProgress_ = 1;\n      this._audioBuffered_ = 1;\n    };\n    audio.onwaiting = () => {\n      this._isBuffering_ = true;\n    };\n    audio.onwaiting = () => {\n      this._isBuffering_ = false;\n    };\n    audio.onerror = (error) => {\n      this._isAudioLoadError_ = true;\n      console.warn(`PlayAudioError:\\naudio.onerror call\\n\\n${error}`);\n    };\n  }\n}\n","import { Audio } from \"./Audio\";\nimport { E } from \"../util/constant\";\n\ninterface IVideoProps {}\n\nexport class Video extends Audio {\n  constructor({}: Partial<IVideoProps> = {}) {\n    super();\n  }\n\n  protected _addVideoElement() {\n    const video = this._createVideo();\n    video.append(...this._createVideoTrack(), this._createNoVideoSupport());\n    this._addVideoEventListener(video);\n    this._addVideoSrc(video);\n    return video;\n  }\n\n  protected _addVideoSrc(video?: HTMLVideoElement) {\n    const element =\n      video ||\n      (this.root.getElementById(E.CSS_VIDEO_ELEMENT) as HTMLVideoElement);\n    element.poster = this.config.film.poster;\n    this.dispatchEvent(\n      new CustomEvent(E.EVENT_ENGINE_ATTACH_VIDEO_SRC, {\n        detail: { element, member: \"film\" },\n      })\n    );\n  }\n\n  private _createVideo() {\n    const video = document.createElement(\"video\");\n    video.id = E.CSS_VIDEO_ELEMENT;\n    video.disablePictureInPicture = true;\n    video.disableRemotePlayback = true;\n    video.playsInline = true;\n    video.autoplay = false;\n    video.controls = false;\n    video.muted = true;\n    video.loop = false;\n    video.preload = \"metadata\";\n    video.ontouchend = this._toggleControlVisibilityOnTouchDevice_.bind(this);\n    return video;\n  }\n\n  private _createVideoTrack() {\n    const nodes: HTMLTrackElement[] = [];\n    for (const { label, src } of this.config.film.tracks) {\n      const trackElement = document.createElement(\"track\");\n      trackElement.kind = \"captions\";\n      trackElement.label = label;\n      trackElement.src = src;\n      trackElement.default = false;\n      trackElement.srclang = label.substring(0, 2).toLowerCase();\n      trackElement.classList.add(E.CSS_CLS_HIDDEN);\n      nodes.push(trackElement);\n    }\n    return nodes;\n  }\n\n  private _createNoVideoSupport() {\n    return document.createTextNode(\"HTML5 video not supported by browser\");\n  }\n\n  /**\n   * Sets needed listeners on HTML video element\n   * and reacts as needed.\n   *\n   * @param video\n   */\n  private _addVideoEventListener(video: HTMLVideoElement) {\n    video.onprogress = (_event) => {\n      const duration = video.duration;\n      const buffer = video.buffered;\n      for (let i = 1; i <= buffer.length; i++) {\n        const start = buffer.start(buffer.length - i);\n        const end = buffer.end(buffer.length - i);\n        if (start < video.currentTime) {\n          this._filmBuffered_ = end / duration;\n          break;\n        }\n      }\n      if (this._filmBuffered_ > 0.75) {\n        this._filmLoadProgress_ = 1;\n      } else {\n        this._filmLoadProgress_ =\n          this._filmLoadProgress_ + (1 - this._filmLoadProgress_) * 0.1;\n      }\n    };\n    video.oncanplaythrough = () => {\n      this._filmLoadProgress_ = 1;\n      this._filmBuffered_ = 1;\n    };\n    video.onwaiting = () => {\n      this._isBuffering_ = true;\n    };\n    video.onplaying = () => {\n      this._isBuffering_ = false;\n    };\n    video.onerror = (error) => {\n      this._isFilmLoadError_ = true;\n      console.warn(`PlayVideoError:\\naudio.onerror call\\n\\n${error}`);\n    };\n    video.ontimeupdate = (_event) => {\n      this.dispatchEvent(new CustomEvent(E.EVENT_ENGINE_TIMEUPDATE));\n    };\n  }\n}\n","import { E } from \"./constant\";\n\nexport const rootStyles = `\n:host {\n    --color-white: #fff;\n    --color-black: #000;\n    --color-off-white: #e8e8e8;\n    --color-royal-blue: #4169e1;\n    --color-melon-yellow: #ff9900;\n    --color-control-container-bg: #1e1e1e;\n    --color-overlay-bg: rgba(0, 0, 0, 0.6);\n    --color-caption-bg: rgba(0, 0, 0, 0.75);\n    --color-control-btn-bg: rgba(0, 0, 0, 0.6);\n    --color-off-white-0: rgba(232, 232, 232, 0.8);\n    --color-off-white-1: rgba(232, 232, 232, 0.6);\n    --color-off-white-2: rgba(232, 232, 232, 0.15);\n    --color-control-btn-hover-bg: rgba(0, 0, 0, 0.8);\n    --color-loader-container-bg: rgba(37, 37, 37, 0.8);\n\n    --dimension-control-container-height: 65px;\n    --dimension-control-btn-size: 27.5px;\n\n    --spacing-col-element: 10px;\n\n    position: relative;\n    display: block;\n    color: white;\n    margin: auto;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    background-color: var(--color-black);\n}\n\n:host * {\n    box-sizing: border-box;\n    scrollbar-width: thin;\n    scrollbar-color: var(--color-black) transparent;\n}\n:host *::-webkit-scrollbar {\n    width: 15px;\n}\n:host *::-webkit-scrollbar-track {\n    background: transparent;\n}\n:host *::-webkit-scrollbar-thumb {\n    background-color: var(--color-black);\n    border-radius: 15px;\n    border: 3px solid var(--color-control-container-bg);\n}\n\n#${E.CSS_AUDIO_ELEMENT} {\n    display: block;\n}\n\n#${E.CSS_VIDEO_ELEMENT} {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    z-index: 0;\n}\n\n#${E.CSS_VISUAL_CONTAINER} {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: var(--color-overlay-bg);\n    z-index: 1;\n    -webkit-transition: height .25s ease-in;\n    -moz-transition: height .25s ease-in;\n    -o-transition: height .25s ease-in;\n    -ms-transition: height .25s ease-in;\n    transition: height .25s ease-in;\n}\n\n#${E.CSS_CONTROL_CONTAINER} {\n    display: block;\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    padding: 0 7.5px;\n    width: 100%;\n    color: var(--color-off-white-0);\n    height: var(--dimension-control-container-height);\n    background-color: var(--color-control-container-bg);\n    -moz-transform: translate(0, 65%);\n    -ms-transform: translate(0, 65%);\n    -o-transform: translate(0, 65%);\n    -webkit-transform: translate(0, 65%);\n    transform: translate(0, 65%);\n    -webkit-transition: transform .25s ease-in;\n    -moz-transition: transform .25s ease-in;\n    -o-transition: transform .25s ease-in;\n    -ms-transition: transform .25s ease-in;\n    transition: transform .25s ease-in;\n    z-index: 1;\n}\n#${E.CSS_CONTROL_PROGRESS_TIME_GROUP} {\n    display: flex;\n    align-items: center;\n    margin: 5px 0;\n}\n#${E.CSS_CONTROL_PROGRESS_BAR} {\n    position: relative;\n    display: inline-flex;\n    align-items: center;\n    flex: 1;\n    height: 4.5px;\n    border-radius: 2.5px;\n    overflow: hidden;\n    background-color: var(--color-black);\n    -webkit-transition: height .25s ease-in;\n    -moz-transition: height .25s ease-in;\n    -o-transition: height .25s ease-in;\n    -ms-transition: height .25s ease-in;\n    transition: height .25s ease-in;\n}\n#${E.CSS_CONTROL_PROGRESS_BAR}:hover {\n    height: 8px;\n    border-radius: 4px;\n    -webkit-transition: height .25s ease-in, border-radius .25s ease-in;\n    -moz-transition: height .25s ease-in, border-radius .25s ease-in;\n    -o-transition: height .25s ease-in, border-radius .25s ease-in;\n    -ms-transition: height .25s ease-in, border-radius .25s ease-in;\n    transition: height .25s ease-in, border-radius .25s ease-in;\n}\n#${E.CSS_CONTROL_PROGRESS_BAR}:hover .${E.CSS_CLS_CHAPTER_LINK} {\n    width: 8px;\n    height: 8px;\n    border-radius: 50%;\n    -webkit-transition: width .25s ease-in, height .25s ease-in, border-radius .25s ease-in;\n    -moz-transition: width .25s ease-in, height .25s ease-in, border-radius .25s ease-in;\n    -o-transition: width .25s ease-in, height .25s ease-in, border-radius .25s ease-in;\n    -ms-transition: width .25s ease-in, height .25s ease-in, border-radius .25s ease-in;\n    transition: width .25s ease-in, height .25s ease-in, border-radius .25s ease-in;\n}\n#${E.CSS_CONTROL_PROGRESS_BAR}:hover > span:nth-child(1) {\n    background-color: var(--color-off-white);\n    -webkit-transition: background .25s ease-in;\n    -moz-transition: background .25s ease-in;\n    -o-transition: background .25s ease-in;\n    -ms-transition: background .25s ease-in;\n    transition: background .25s ease-in;\n}\n#${E.CSS_CONTROL_PROGRESS_BAR}:hover > span:nth-child(1),\n#${E.CSS_CONTROL_PROGRESS_BAR}:hover > span:nth-child(2) {\n    border-radius: 4px;\n    -webkit-transition: border-radius .25s ease-in;\n    -moz-transition: border-radius .25s ease-in;\n    -o-transition: border-radius .25s ease-in;\n    -ms-transition: border-radius .25s ease-in;\n    transition: border-radius .25s ease-in;\n}\n#${E.CSS_CONTROL_PROGRESS_BAR} > span:nth-child(1) {\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 100%;\n    border-radius: 2.5px;\n    background-color: var(--color-off-white-1);\n}\n#${E.CSS_CONTROL_PROGRESS_BAR} > span:nth-child(2) {\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 100%;\n    border-radius: 2.5px;\n    background-color: var(--color-off-white-2);\n}\n#${E.CSS_CONTROL_PROGRESS_BAR} > input[type=range] {\n    -webkit-appearance: none;\n    appearance: none;\n    cursor: pointer;\n    background: transparent;\n    margin: 0;\n    position: absolute;\n    top: 50%;\n    left: 0;\n    transform: translate(0, -50%);\n    width: 100%;\n    opacity: 0;\n}\n#${E.CSS_CONTROL_PROGRESS_BAR} input[type=range]::-webkit-slider-runnable-track {\n    height: 100%;\n    border-radius: 0;\n    background-color: transparent;\n}\n#${E.CSS_CONTROL_PROGRESS_BAR} input[type=range]::-moz-range-track {\n    height: 100%;\n    border-radius: 0;\n    background-color: transparent;\n}\n#${E.CSS_CONTROL_PROGRESS_BAR} input[type=\"range\"]::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    appearance: none;\n    margin-top: -4px;\n    border-radius: 13px;\n    width: 13px;\n    height: 13px;\n    background-color: transparent;\n}\n#${E.CSS_CONTROL_PROGRESS_BAR} input[type=\"range\"]::-moz-range-thumb {\n    border: none;\n    border-radius: 13px;\n    width: 13px;\n    height: 13px;\n    background-color: transparent;\n}\n\n#${E.CSS_CONTROL_TIME_PER_DURATION} {\n    position: relative;\n    display: inline-block;\n    width: 90px;\n    font-size: 70%;\n    text-align: right;\n    white-space: nowrap;\n}\n#${E.CSS_CONTROL_CTA_GROUP} {\n    display: flex;\n    align-items: flex-start;\n}\n#${E.CSS_CONTROL_CTA_GROUP} button {\n    display: inline-block;\n    cursor: pointer;\n    color: inherit;\n    border: none;\n    padding: 0;\n    font: inherit;\n    font-size: 70%;\n    font-weight: 400;\n    width: var(--dimension-control-btn-size);\n    height: var(--dimension-control-btn-size);\n    margin: 0 2.5px;\n    border-radius: 2.5px;\n    background-color: var(--color-control-btn-bg);\n}\n#${E.CSS_CONTROL_CTA_GROUP} button:hover,\n#${E.CSS_CONTROL_CTA_GROUP} a:hover,\n#${E.CSS_CONTROL_CTA_GROUP} a[data-selected=\"true\"] {\n    background-color: var(--color-control-btn-hover-bg);\n}\n#${E.CSS_CONTROL_CTA_GROUP} button:disabled {\n    cursor: not-allowed;\n    opacity: 0.35;\n}\n#${E.CSS_CONTROL_VOLUME_GROUP} {\n    position: relative;\n    display: flex;\n    align-items: center;\n    overflow: hidden;\n}\n#${E.CSS_CONTROL_VOLUME_GROUP} input[type=range]:focus,\n#${E.CSS_CONTROL_VOLUME_GROUP}:hover input[type=range],\n#${E.CSS_CONTROL_VOLUME_GROUP} > button:focus ~ input[type=range] {\n    opacity: 1;\n}\n#${E.CSS_CONTROL_VOLUME_GROUP} input[type=range] {\n    -webkit-appearance: none;\n    appearance: none;\n    background: transparent;\n    cursor: pointer;\n    width: 90px;\n    margin: 0 5px;\n    opacity: 0;\n}\n#${E.CSS_CONTROL_VOLUME_GROUP} input[type=range]::-webkit-slider-runnable-track {\n    height: 4.5px;\n    border-radius: 2.5px;\n    background-color: var(--color-off-white-1);\n}\n#${E.CSS_CONTROL_VOLUME_GROUP} input[type=range]::-moz-range-track {\n    height: 4.5px;\n    border-radius: 2.5px;\n    background-color: var(--color-off-white-1);\n}\n#${E.CSS_CONTROL_VOLUME_GROUP} input[type=\"range\"]::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    appearance: none;\n    margin-top: -4px;\n    border-radius: 13px;\n    width: 13px;\n    height: 13px;\n    background-color: var(--color-white);\n}\n#${E.CSS_CONTROL_VOLUME_GROUP} input[type=\"range\"]::-moz-range-thumb {\n    border: none;\n    border-radius: 13px;\n    width: 13px;\n    height: 13px;\n    background-color: var(--color-white);\n}\n#${E.CSS_CONTROL_POPUP_CONTAINER} {\n    display: inline-block;\n    position: absolute;\n    bottom: calc(var(--dimension-control-container-height) + var(--spacing-col-element));\n    right: calc(var(--spacing-col-element));\n    border-radius: 2.5px;\n    font-size: 0.85em;\n    padding: calc(var(--spacing-col-element) / 1.25);\n    background-color: var(--color-control-container-bg);\n}\n#${E.CSS_CONTROL_POPUP_CONTAINER} span:first-child button {\n    width: calc(var(--dimension-control-btn-size) / 1.25);\n    height: calc(var(--dimension-control-btn-size) / 1.25);\n}\n#${E.CSS_CONTROL_POPUP_CONTAINER} span:first-child {\n    display: flex;\n    justify-content: flex-end;\n    border-bottom: solid 1px var(--color-off-white-2);\n    padding-bottom: calc(var(--spacing-col-element) / 2);\n    margin-bottom: calc(var(--spacing-col-element) / 2);\n}\n#${E.CSS_CONTROL_POPUP_CONTAINER} span:last-child {\n    display: block;\n    min-width: min(50vw, 140px);\n    max-height: min(50vh, 200px);\n    overflow: auto;\n}\n#${E.CSS_CONTROL_POPUP_CONTAINER} ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n}\n#${E.CSS_CONTROL_POPUP_CONTAINER} li {\n    margin: 0;\n    padding: 0;\n}\n#${E.CSS_CONTROL_POPUP_CONTAINER} a {\n    display: inline-block;\n    text-decoration: none;\n    color: inherit;\n    width: 100%;\n    border-radius: 2.5px;\n    padding: calc(var(--spacing-col-element)/1.25);\n}\n\n#${E.CSS_LOADER_CONTAINER} {\n    display: block;\n}\n#${E.CSS_LOADER_CONTAINER} button:disabled {\n    cursor: not-allowed;\n    opacity: 0.35;\n}\n#${E.CSS_LOADER_WELCOME_GROUP},\n#${E.CSS_LOADER_NETWORK_ERROR_GROUP} {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n    text-align: center;\n    width: 100%;\n    height: 100%;\n    background-color: var(--color-loader-container-bg);\n    z-index: 2;\n}\n#${E.CSS_LOADER_WELCOME_GROUP} button,\n#${E.CSS_LOADER_NETWORK_ERROR_GROUP} button {\n    cursor: pointer;\n    color: inherit;\n    border: none;\n    padding: 0;\n    font: inherit;\n    font-size: 70%;\n    font-weight: 400;\n    width: var(--dimension-control-btn-size);\n    height: var(--dimension-control-btn-size);\n    border-radius: 2.5px;\n    margin: var(--spacing-col-element) 0;\n    background-color: var(--color-control-btn-bg);\n}\n#${E.CSS_LOADER_VIDEO_LOAD_PROGRESS_GROUP} {\n    position: absolute;\n    bottom: calc(var(--dimension-control-container-height) + 2.5%);\n    left: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n    text-align: center;\n    width: 100%;\n    font-size: 0.5rem;\n    color: var(--color-off-white-1);\n    z-index: 3;\n}\n#${E.CSS_LOADER_VIDEO_LOAD_PROGRESS_GROUP} progress {\n    border: none;\n    border-radius: 2.5px;\n    width: 25%;\n    height: 2.5px;\n    margin: var(--spacing-col-element) 0;\n}\n#${E.CSS_LOADER_VIDEO_LOAD_PROGRESS_GROUP} progress::-webkit-progress-bar {\n    border-radius: 2.5px;\n    background-color: var(--color-off-white-1);\n}\n#${E.CSS_LOADER_VIDEO_LOAD_PROGRESS_GROUP} progress::-webkit-progress-value {\n    border-radius: 2.5px;\n    background-color: var(--color-black);\n}\n#${E.CSS_LOADER_VIDEO_LOAD_PROGRESS_GROUP} progress::-moz-progress-bar {\n    background-color: var(--color-black);\n}\n#${E.CSS_LOADER_ENGINE_BUSY_GROUP} {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 20px;\n    height: 20px;\n    margin-top: -10px;\n    margin-left: -10px;\n    border-radius: 50%;\n    border: 2px solid var(--color-black);\n    border-top-color: var(--color-white);\n    -webkit-animation-name: ive-busy-spinner;\n    -webkit-animation-duration: .6s;\n    -webkit-animation-timing-function: linear;\n    -webkit-animation-iteration-count: infinite;\n    z-index: 3;\n}\n#${E.CSS_LOADER_VIDEO_CAPTION_CONTAINER} span,\n#${E.CSS_LOADER_AUDIO_CAPTION_CONTAINER} span {\n    display: inline-block;\n    font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;\n    font-size: 20pt;\n    border-radius: 2.5px;\n    background-color: var(--color-caption-bg);\n    padding: calc(var(--spacing-col-element) / 1.5);\n}\n#${E.CSS_LOADER_VIDEO_CAPTION_CONTAINER},\n#${E.CSS_LOADER_AUDIO_CAPTION_CONTAINER} {\n    position: absolute;\n    left: 50%;\n    max-width: 85%;\n    text-align: left;\n    -moz-transform: translate(-50%, 0);\n    -ms-transform: translate(-50%, 0);\n    -o-transform: translate(-50%, 0);\n    -webkit-transform: translate(-50%, 0);\n    transform: translate(-50%, 0);\n    z-index: 0;\n}\n#${E.CSS_LOADER_VIDEO_CAPTION_CONTAINER} {\n    bottom: calc(var(--dimension-control-container-height) + var(--spacing-col-element));\n}\n#${E.CSS_LOADER_AUDIO_CAPTION_CONTAINER} {\n    top: 5%;\n}\n#${E.CSS_LOADER_RESUME_PLAY_BTN} {\n    background-size: 50px !important;\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n    text-align: center;\n    width: 100%;\n    height: 100%;\n    cursor: pointer;\n    color: inherit;\n    font: inherit;\n    margin: 0;\n    padding: 0;\n    border: none;\n    border-radius: 0;\n    background-color: var(--color-loader-container-bg);\n    z-index: 1;\n}\n\n.${E.CSS_CLS_ICON_RESUME_PLAY_BG} {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAAEpElEQVRoge2az29VRRTHv1Ma+7Ao9MGDohuJRMUflYULFTHRBC0Wf+6K4goCMUEI4t6NK+OGWCNb/A+MhCARrFZC+VH8FUoruOFHhGhMEGorwsfFnMubprfv3TvvvlANZ3Nz75zz/Z5zZ+bMmblXuiUzS1xRQEBZ0tOSVkh6UNK9khZKajeVK5IuSPpF0glJA5K+ds79UZQP0QKUgHXAF8A18ss/wF7gDaCtEV+iegSYLektSe9IWmyPJyQdlHRA0o+SRiT9Kumytc+R1Cnpfkldkp6R9ISkJIDzkj6U9LFzbjzGr7xB9ACng7d6BFgPzI3AmgdsAI4GeKeA1c3wPSEtAZ8EhMeA5wrE7waOB/h9QKko/ISk0xwHuAJsBmYVSuJ5ZgFbgLGgtxcVBb7EuhtgGHi4EODanF3AiHH+DCxpFLASAB4GFhTkaxbuDmDAuE8DnbFApWA4HQTa61sVK0A7cCgYZvnnTDCxh/GL3U0RYH4wKvryGvcEE7vpcyKDP11BAujOajSb6jqxOQfZu8Bt0d7Wx98aTP76QwzYbgbH8qRYsxmhSYsZ0Ap8Zzxb6ym3AedMeVVOolD2Acsa8jyd4wXDP1+zV/DFG8CRCJJELtl1HHi/yGwHOKqZdG0txX2mtD6CJJHFwE6q1fA54E2gkC0DsNFw90ynUMaX1ePEFYAABPdPBm8PoB/oaiCGBLcDmACupvoJvGqEX0YSTArEnrVYb1yw5mvALqASGUeC2294LybPWoL2FXb9qhGSUJxz151zuyQtk9QnCUnrJJ2wIdJSE2B6OWDXlVNagN0W5UsxyGk9kqLzAH43mchx4KkIrmT0fJbWOGqNUWkzSyCm54Be4IyZXAc+Be7KwfWQ2Z5Ma/zdGqPqqqyBBPq3A+8Bf5npZbuvu3cHFpjNxbTGCWuMKjPyBhLYLQU+D4bbCPB8HZs2072xt4+dbDNX/mNDq1JraP1vJnuSfl/OGUNiXzcQpqbfIeLS72tmfyP9hnNk2K6P5gXOQFwGPpL0k6RVkn6TtEnSY865gQjIpNRJ7ZFXLMr9kc5O6RGaX6KsSWvsoFo0zosAnxQIzSsay1SLxjunU9prpBsiCBJpdhm/yXB311J63ZSORhAk0uyN1ZDh99ZSbAPOmmLN1TXFNpRmbXXXGP4Z6q03wDZTHmLmHT58bzxvZzEoUT3r3ZKDqNnHQduCl5XtoxCw2ozGKCDTNCrAcqqlTL5PGfjvE8kbmN8kH7P4UcEfygHsiAEo4Q+OwR8k34xD7DnAoPkwmHlIpQBVgJMGdJgGV+Sc3GXgW+M+RaMffPAfepKuHQEKr8VSOJcHnKPAPUUBLwqG2Rj+QLm1EPDJPK2WnZKJPQgsLJqkFCQA8AfKhawZ+BW7h+o6AbAjek5kJO0Ouh18YbgR6IjAKuNrp6EAb5SIr8WxPwyU5PcT2yXdbY//lnRI0n5JP0galf9h4E9rv0P+54L7JD0i6VlJj0tKFtGzkj6QtNM5NxHjV7Tga7O1wB78FiCvXMXvTHsbHUZF/lQzV/6nmpXyR6RLJVXke0LyPXNR0in5nd03kvqdc5eK8uGWzCT5F05QXc/Nk/+qAAAAAElFTkSuQmCC\") !important;\n    background-repeat: no-repeat !important;\n    background-position: center !important;\n    background-size: 17.5px !important;\n}\n.${E.CSS_CLS_ICON_PLAY_BG} {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAAB5ElEQVRoge2ZMS8EQRTH7wgSIiEhcY1GcxoUdDqViE8g8RVUeo0PoFRSalWicRrR6BRoFBQkCiIhuPsp7m3y7m7Pzd3O7pjJ/prL3s689/9nZ3fezBQKOTk5ORpgGxh0rSMx1LkBVl1rSQSNnAKzrjX1hDLxJr+fwC4w4lpbVygjJWAfqMr1I7AJFF1rNCJyoa4XgQtlsALMu9RoRLMR+a9PnsaT3K4Ch8CkK50diTOi7o0Be8C3NHsBtoD+rHV25C8jqk0ZOFHD7QpYzkqjESZGVNt14F4ZOgam09ZoRDdGpP0wsAN8SNd3uR5KU6eJsK6MqH4zwJF6OnfAWhoaTQX1ZET1XwGulSE31UFSIxJjQL5mrxLuS752o7Z0mohIbETFKlGfb2oSNrvqwKYRFXMJuFTDrQLM2cwRl9S6EYkbVQfPkiKqDiZs54oSpmJExR+X9+VHUqVTHaRtROVZAM7VcLNbHWRlRHIVgQ3gQdLWgANgql2fviyE/SvyoWUe3++XPYjPL60T4hk+TYj4XqIQQtFIfBlftqnRVEhPRmhdWN3i08KKEJa6NG4+1OSJ+LP5gO/bQfi+QUf7LdN0ZmUbNBshfhM73VnZBkpwGMcKBHTQAwEcvQVxGBrG8XROTo7f/AKcSk4xvp2PUQAAAABJRU5ErkJggg==\") !important;\n    background-repeat: no-repeat !important;\n    background-position: center !important;\n    background-size: 17.5px !important;\n}\n.${E.CSS_CLS_ICON_PAUSE_BG} {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAAAcElEQVRoge3YwQqAIBAGYTd6/1fe7mKga8Eg8537hcmbrUmSVBerg8zMqYMjhmfv7t9cKx+T3dXhX398dt875kYMoTGExhAaQ2gMoTGExhAaQ2gMoTGExhAaQ2gMoTGEpvwaX301/2rfO+ZGJEna8QBvaBhAtB8jZQAAAABJRU5ErkJggg==\") !important;\n    background-repeat: no-repeat !important;\n    background-position: center !important;\n    background-size: 17.5px !important;\n}\n.${E.CSS_CLS_ICON_PREV_BG} {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAABv0lEQVRoge3Zv48OQRzH8Ts/Q0FIJIorJCgUOg2l66ivvdK/IKJRKDQKpVYpdCoKNAqdgo6C6uQkQsSPHC/FTWLztZl9nrvZZOcyn3Ln+32/s5PnmZ2dXVhoaWlpaWmZcLAfN6fOHBKex2uYMjMnO4Bb2JAyReaQ8CLeJtevElIsl2bmZIdwB7+T5xXObUeKw6WZQ8JLeJ/433ED+9LYlqRjMHOyI7jrX17gTKiZSzoGc0i4grXE/Iar2N1TN7M0MT+WZOZkx/GgM2PPcTpTPyhNzIclmUM3sYL1xPmMK1gc6MlKE/NTSWau8QQed2bsEZZm7O2VJuaTksxcw2KaoS+pdw2rMwN6pB3m11LMoeKTeNqZsfs4No8wSnEKz0oyc0V7cM3m2g0fcHleWZTiOn6UZOYKzuJlqvuDezi6VWFXOgazb2CvzTX7Z6p5h+XtyKJ0DGa8eAFv0tgGbuNgCWHij8H870Z2lYJPIjvipxUK6v6zh6L6l99QXPcDMTTUv0UJjXVvGnsAdW/jA6T+F6sAq/tVNwDrP3wI4LqPg4K4/gO6IK/7yDSI6z/EDvK6PysEcf0felpaWlpadnz+AmU+bU+WvHU/AAAAAElFTkSuQmCC\") !important;\n    background-repeat: no-repeat !important;\n    background-position: center !important;\n    background-size: 17.5px !important;\n}\n.${E.CSS_CLS_ICON_NEXT_BG} {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAABo0lEQVRoge3Zv0tWURzHcU0hiIgMAocEIRIK2loKJx2lIaF/wbUxotXBxaHRtTEadWiKGhrcHBQXJ9EWiQgs8Ucvh05wFOm593nOk/cezme5l3PP9/2558u995zzvQMDRUVFRUVFiYR5XG06s4oprONxk5lVTeE3lnC9icw6pofhuIXpPjCnUt1zJ9OHWI0y+Ra3msKsbBrOh/EC+6H5K2YTM3fxLPU4zphGbXfxMcrsO9y+TGZXpqF9EHP4Ebp8w9xlMbs2ja6P40OUyRWMJWYu404v4+hoGvV7jr3Q/XvI7OD/YnZUVdPQdxTvo0x+xkRi5ifcqzuOWqZRzFPshNCfeImhhMz988wqgNqmIe6mP7P2X33Bgx6ZIxcw71cN7so0ip/BdsAc4HVi5i+8wnCnoJ5MA+MG3uAkymZq5hoe/SugZ9OINYnNPjKPsOCiLUJK08C7hkUc94MZbncDT66kMmiUyqN1ltH+l13bP79ymBC1fYkih0Wjti/jtX1jJYetrrYXH+RQDpJLgU5GJdMsithZ/FbI40dPUVFRUVFRTZ0CTmptVyb//40AAAAASUVORK5CYII=\") !important;\n    background-repeat: no-repeat !important;\n    background-position: center !important;\n    background-size: 17.5px !important;\n}\n.${E.CSS_CLS_ICON_REWIND_15SEC_BG} {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAAEbElEQVRoge2ZTWxUVRTHzxRoCykQW6JUoxAtVlqq5aNUjQSCupEYV7IyrlyywMSEDQlxC4gffJUlJCREWECtX4nGAAmJC0RbSKk71ETBqcA0EuhAfy7uec7tm3nT++bememCfzK5mXfPPef/f+/ec+87T8QTQBPwYZn+ecB23zhVBfAycAUgof814HJSf90BLAI+BR6giPV3AkNYqBfXRABvAX8ov3s2UWAJcBDI6+V/Zp0QoB04Zd3kC0C39f99i3geOAC0zRohQAZ4F8gqp3+BHcAc7Y/jO6DHGl9/IcAK4AeL5BfAkzGbCKPAGyV8RBjHJIZBYBewGZgXiuvcUI4c0Kq/LhF5U6/dAj4XkYFMJnOpqtF1ar0H3NQ7mwO2AQ3aH8c3QJc1PkI7sAZ4B5PxxmLjhoAXqipGCbUDJ63A3osdWAXsBybU7D6wB5hfC0HB0y/wqAq6r+Y/A0/XQsxi4BDJG2I38K09bxz99ltTLgv0VUdBceBXMNkqaepsAa66CtExiymcCm4D/eEYlw8c/NAIzAWOq5gbwDP+TOsEYA5wRsWMAM315lQxgBZrzeytNx8vAGs1C+aBVfXm4wXMBgowVG8uXgBaddOcotq7P/BI0p4BDFMGjv73qflAePbTA21P2BwbgDsBhHSp+TjQGJp8iy7GzygcL+JClunlvwLEi57sxnif7zF+wsHmWW1/9YwlIvK9iPSIyCYROWt3NARwPhMiIWMBfF3Qtjfe4SUkE0OCWSRkA/A7MKntALA8Zcjoqa6ojLEjEtbI12XWeQ54PYX/6P0m62J8HjhfgY4kIR9g3ktOYI7384E+pp9wlzn6b9Qx91yMo5el1CkuKZ0CC4CiqWeJOezov0nt77oYR2WfNif208eWFFLGfr0OueZov0Tt/473lVrsN7R93JWQB0a1fczR/gltr8c7SgmJ0mRnSlJFAG7pHUzKTiu1dd0sI05FqbyUkGFtX3R0Xg7ntN2Z0L9L268c/b2k7S8zWgKb9C6mLpjF1wjm+DKpl08C6zDHmvXAl1bWesrR/4iO2eBi3EShjPOcjxC99jbJh8bbOO4jFGpoWVxLrZhdF2CPrxC93gEcAX7DpPdrmHKS05NQHx+p+0NpCK3GvMTkgFbngVUCZkev7MXKmsP7qsQvDZdPlMtgJYOfp/DSX3TarBUwhe+8Jo3Kig/WvBwFWgJzdIm/kEI5aLePo2bgkjo6DdTsewqm2jiosS8CTb4OOzBlS4CjtRCjIo5pzOuEqsxjjt05dXymmtNMp1P0JHLAutAB+qwncxVYHTSA/L+wx6wnEVaEFagD+EkD5YGPqeC4X8Jvm6bY6APRxWDTqUzQZmCvFTSn/7tmHl3kq1szY/TpbRLY7b2wU5LowXyunqKAYX1KW4FeTKmzUX9tem2r2oxY46Z0XXTXTEAJQb2Yc9M46ZHFfHP0rucmlXBSA/OO3y8ir4oponWKyFIRWagmEyLyp5iSzrCYYtuPmUwmH4rDQ8wm/AdKwkFw69lcCwAAAABJRU5ErkJggg==\") !important;\n    background-repeat: no-repeat !important;\n    background-position: center !important;\n    background-size: 17.5px !important;\n}\n.${E.CSS_CLS_ICON_FORWARD_15SEC_BG} {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAAEWElEQVRoge2Zz29VRRTHzyVA+anAgwAL0GilSC20SEESSEDjBheu6MqEDTGRkIgJfwBsURCMIBg3EhYmbqBClATjgkTjApGCtMUVAlG0/HiviQEK/biYM97b23m3c++7971n4jd5mbw759c3M3Nm5oxIwQB2AVMS+vcCLUXHUTMwuAZsTej/Fdhc79hSgbE4B6ys0j8KHAfmNSrWREQCvavtCHAYmB/rf6jtTeDNRsc9DpFAS8DHSsQSey/S3w58H/n/JbCo0fH/CxtV5H8b8FVsyqF9AfA2UNbP94F3gUn1DHgK8CqwB+gFfgHuxIlE5LcA/a5+YEmM7HfAC0n+J+dAoEtE3hGRHhF5ulZ7dQfQBZyJzZAB4CDwFrAaWOyYWiuAb6pMrUnATqCin+8B24GgCAIzgA+Ax+psGPgIaK8ib9E8ix14Hrikjh4Dh4AFE+hYNEf6BboJF+8A0O2pF8XZ+MhF+p4AR4Di1hmwjjAl9gJPpdC1xN9I6L8KbMgvYrejVuBPdXgCSJXpaIZDI9AC/KwkzqQl0TQADkSGfmaj48kEYKVmmEeYTe+/CcJNa3+jY8kMoFNJlIE5jY7HB9VOlTu0/TQIgvv1CiZXaKayu/DyFHpz7c7m6OsjAfkyCJ1uVvsXU+rtcgWGOQj+XTQR176wSdtvPYKfJSJtIrJNwukYxxIRmS4it4MgKOzG5yLSqe0PHvrDHjLLtL3mFVFGuBa7vYnl5dgSGczJnhMuIgu1vTWRchBDFTFLZCNwQzfYG8BR4NksQXuB8F4wNYOua7F/nbDOK8DrKX2cB877COZNZDcmnX+BuQVOx9xtTqt4GXjG036L6jzwER5S4VIeRPT7DBz37giZTzztz1f5v3yEr6pwh1f0Y3VT7QvAWlW57im/SuWvxPtci91mlzbfgGpAv7YLE6VC2JjGZUAXkT5tX0kZ1DhgKoUkZKcXtf3D0+R6bS/5ON+kzlMdUVR3zNTC3O8BPqsib+tiRzztX1b5jT7CmQ6Nqhsn8jJm3wBTp1oDzNK1YUmUgaUetttVfoiEGkBc6agqvV8LEf22leqHxjKe+wiwP83oWaUuzMNLhRQPLy4i+r0VOAb8htmnrmNqWBOOhOqXMBXNUWCVNxFVtkN/IJViAcDUkwF6syjb4sMI0DmxRjHAFMNtEeSlrEbsvOzH3D3qCmA2MKgx7KvF0DTgoho6SR0LdMBkwvR9gVqrkYwtmX5eDzJK4rj6vA08l5fhbsLHl1NFTjOdTnYkKsCavB10R0ZmgAKqj7qwByMjkS+JiKNW4Cd1NAJ8SIbjvsNuSVOsfc26kNt0SnA6DfP0Zp1W9P+KDLbaNTMOq61HwL6aF3bKIDowT8ijhOjTUerBlF3nAVP1V9JvPSpzOaI3quvC+Q5ZL0KdmOPGHdJjCPOemO7Y4UBuz76YO/46EXlNRDrEXIIWichsFRkWkd/FlJn6xBQAfwyCYCSvGP5HM+EfxLY/VkoBSKsAAAAASUVORK5CYII=\") !important;\n    background-repeat: no-repeat !important;\n    background-position: center !important;\n    background-size: 17.5px !important;\n}\n.${E.CSS_CLS_ICON_VOLUME_BG} {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAAEEUlEQVRoge2ZXYhVVRTH98ydDyc/0L4Gckb0QTJ1oIdiYGrExGoQTHzyRXwIkijpIYkwYaBoKGiCFBXywQfLj6hkihCUXoIgQvxAZdJQakxqxnEcSLEcm/n1cP7Hu++9+5x79pk7c0aY9XK4+7/W2ut3Pu5Zex9jpm3a7h8DcsA7wO/AMLAHqM26Li8D6oAeSq0r69oSmyC+UeHXgNVAq35fybq+ROaAaNF4tcZGPfMtnJhK4ye1IQaA5UU6AB75XlfIcWBJ5St2TxoLIR9fkKeVC2AE6ASqK1t54YT2gz0Q3k4OPy8QxcwFdgB3FX4UmFeZygsnKr4Sy2J8vUGs2BXW1TkDPJi+6tLkNkR/HIT8U4Movgk4qzQ/A3PS5rKTFkMsTRATC6Kc3wOHgOYIn0bgglL1AFWTCqG4ciCzgety+xvYEOHXDAzKb8ukQii27K0FLAC+lesYsC3Cb630f4BF44H4C3jCMz7xMwK8BYzGnXVgn/TP7MEGgr+5G5Q3bwhfEPm/orP+H9Dm0JuA2wJuCQd3JgBIDZEGRDEfKewSUO/QP5G+KxwY0sALEQmvSH8mDYRyFIAAM4H3gU1AQ0RMHXBeoW849OXSrgN19yYBZkQkHJOeukVwgDxnzdsHrIyIWyefP1zzAyeldyQB8b4tEoBUAy8Dv0gaAV50xFUBl+WzyqF/IO29TECs8RzwqeRrwEMOny7p3Q5tvbRjmYJIqwJ+lEunQ++Q9oNDWyStL3MQ6WvkcsqhNUm76tBmSbs5VUAelcsth9Yg7XZE7L8wkYuVSbapAvKUjhcd2sM63igWgFnGmHpjzK3MQQja8e362eNwCZfOlxzaIzoOZQoC5Iwxe40xbcaYQWPMbofbszqecGhP6nghyxfiZvILpTvA8444+4VY8vYHPpT27lRoUX4D2iPiwhalzzU/cEp6h900dkQkC5vGFRUEaSBoGjfi6GzlYzeNJesSoEXaIGoad5DM7u0ejhckYUy3wn51wVp17wwHZhD09kOUt1QwviDkF1Z3gVaH3kyw1B3FsSEYl9i5r+sRnxgE2EqwMgTYHOETLnX3+9QRBtu7il4wSUCA+Vb+UeDNCL+XyG8+pNvoFswRX5hyIATtfL/choH1EX4LyG8HvZYKwkpWC3ztA5PwinwOHAAei9AbgYtKdSRt/cVJa4GvksL4PuyO+GbgnNL8BMxOm8uVvBb4MgnMeECAleQ3sU8zQTvyOd0SsTBpQCj9rPAdMLcylbsnrAG+iIPxBaHwU8IdYDvj2bT2mLgGOBwFkwKkUyHHgMcrX3H85DUEnwUKYIAHwjPrmWvxxFVbvoAccNCCaSe/sdCbWWFpTDD7KbW3s67N2wgWRK8CvcCfwMdATdZ1Tdu0pbD/AWi0WyEV/M6mAAAAAElFTkSuQmCC\") !important;\n    background-repeat: no-repeat !important;\n    background-position: center !important;\n    background-size: 17.5px !important;\n}\n.${E.CSS_CLS_ICON_VOLUME_LOW_BG} {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAACNklEQVRoge2YPUtcQRSGj+vnmi5C/oOoXcBClAQSDfkNYmER/AcBA6m0FNRCkHT57BLzH1JbarAx2UKJoKksFOJjscfrdXfWnXsmuzML+zaXmXPmvOfhXuYOI9JVV50joBdYBn4Bf4EtoD92X4UEDAA71Gs1dm/eUojv2vgJ8AyY1HEldn9eckBM6HxJ5/7F7rGpaj6nDCIXByBWf15qBqE5aYPUQPxxQWheuiAOiPF7ctMEKQKh+emBFIXQNWmBWCB0XTogVghdmwaIA2Ks4PrWgwBlYAM4o7mOgVGDR1tANj0AzBDq0RaQU/WZbRCvaHwqwOMOCPAAWAEWgLK1rtMEGGoQv9J4KdQjN36a8/0NPLHWrjO5ByT4s3CAlIBFYF9Dl8BciEcUkNx8L7Ct4RNgJNgkBojGeoAfmvI22CQWiMZfaspusElkkEeacm71MO9ELdKVdWEqII/1eWAtEB0E6BGRNzrcCSkUe/t9l9t+HwabtBOE6g/xFfBTQxfA8xCPFI4oh8C0tXbe5ObQ+KJB/ObQOBPgUQtSpnponAcGrXVrTTbwk/POygLSEgFDwHruzfx3mLaAeDYyAHyzwiQDIiIC9ANfLTBJgYjYYZIDEcl+Yl+KwCQJIpLBfPaFSRZEJIP55AOTNIhIBvOxGUzyICJ+MB0BIpLBfGgE0zEgIiJAn2s3A4Z17iJ2j95y7GbT3F4s7MXur5AU5j31eh27t8Kiele1BOwBR8Aa0Be7r666MugagV1qiCmz2jgAAAAASUVORK5CYII=\") !important;\n    background-repeat: no-repeat !important;\n    background-position: center !important;\n    background-size: 17.5px !important;\n}\n.${E.CSS_CLS_ICON_MUTE_BG} {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAACKklEQVRoge3ZzU4UQRSG4a8RCHgBSrwDg65ZGE1IjDFeiXdg4t6libjwAgR1589VuDEEjGF0Z1j4l6hbXOjr5tB2muqeqhqm64yZbzVTp5o6z1R3MQFpnnlmJ8AZ4C7wEfgJPAKWSveVFGAZeMnJ3CvdW3QM8coa/wZcBzbs/WHp/qISQFy28QUb+126x7Fp3U41olEHoFR/URmHsDm+IS3E1xDC5vmFBBCXeub6hKQgbL4/SCrCrvEFyUHYdX4guQi71gckgFhPvH76EGAV2AJ+MD6fgYsZawwCeRgByEbYGoNAvts6Nzrqh1a/MsEag0COs9JR/2P1hUnXCIzvAm+BtZ5r14A3wOuoRXogE3+aPZB9K41CGEOMbM4uUHmFnAPeWfkDcKFRO9+ovW/W3EG6MMkIDxCrN2+hUet15/MTXKQkxOY0dyZ+JyzZJ9EU0n6Qux/sUDzsyH9xaxF4sOk5zVxCQohGLQ1TGJLyC3Gvb42Yhx37odM4GI4k7UnarKrqS7toY5uS9m1ud/j3pfFmR/34S+O13G5PY1djFtkiLsG/WUWuMQhkBXjQ2JlTxwwCiWxkGXiRi3EDkSRgCXieg3EFkfIx7iBS/d+oZykYlxCpxjyNxbiFSDXmSQzGNUSqMTvjMO4hUhxmJiBSjdnuwswMRJKAxdBpBpy1sV+le4xO4DS7Ctyy9wel+0uKYR5zMndK95YcoAJuAwfAJ+A+sFi6r3nmychfhFcHzJwBUtEAAAAASUVORK5CYII=\") !important;\n    background-repeat: no-repeat !important;\n    background-position: center !important;\n    background-size: 17.5px !important;\n}\n.${E.CSS_CLS_ICON_CAPTION_BG} {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAAB1klEQVRoge2ZQU7CQBSG/0eMRzCEE7jUrWiMF/EaujNuRI/hRTRGMIaNGxP1ABhP4efCqU6GTgcs0oH0W5U3703/R/++tCC1tLRUAmwCV8A7q8cEGACbBlxKOmn6C63JQK4rgD1/BRgB92FFTnGgX1yZjqSeJJnZQ1D7KYlww5ziZjZyhz0DcEErKc6eQn8nCGZjm3njnSAnG9vMG19PawUJ2dimKl4QbUQZ2SYRl7Su1srNNu3UKinInnZqZRiXtK7Wys027dQqKcieQv9GRcKNpKOlKZqNoZkdlC1Er0gRz42YzugViRU2ReqLnWlq5UadqZUb0zrdzylT4sviwJhfHktq/m09pTN5s/vxcKPUgFjkekpn1bPWSjFvI2PveMoaS1iP43vPnwYxTzZFSufaTK25bvYmqX2z8788AV3vXKNYYkpnVSPDVPEC2JF06zWzV5UsKf7UMWvHiwbYAp7d6d+A3l+0/NT4xSz5zQ7oAi9OwouvZdZ9ippG3xDN7EPf7zyvkrZr7d+UtQINvs3qWytIaMJmT8BdRHBsnx9rvbtAP8hZus3MbNfMDssaKdsH2HeHEwMGkk4jxavCxYakM/fhWO4f3hViIula0nnTQlpacucLx/BHx+PecukAAAAASUVORK5CYII=\") !important;\n    background-repeat: no-repeat !important;\n    background-position: center !important;\n    background-size: 17.5px !important;\n}\n.${E.CSS_CLS_ICON_FULLSCREEN_BG} {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAAAkklEQVRoge3ZOwqAMBCE4UXsvP9pLCwUxVONlYXgaxNJFvm/VszOaBMSMwD4BfmNCTNm75CrtZq8usdchd5xTnj4AqWV/CNVUSQaikRDkWgoEk1782yyEluI93oz62qHAAAAwB9JWiUttXPskvNwQFcJRaKhSDQUiYYi0TwWcdxTDt7hksbcS9DXRTy5PlwLAM5t/Iby+IVFZREAAAAASUVORK5CYII=\") !important;\n    background-repeat: no-repeat !important;\n    background-position: center !important;\n    background-size: 17.5px !important;\n}\n.${E.CSS_CLS_ICON_OK_BG} {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAAC9UlEQVRoge3ZT6iUVRjH8TOJlNc/cS9iWRlkBeXq6iK0CMpllNCiaOHKRS4KqmUS7lpICgoF0UZIqJVtghalUbSICAqFtOgPBXYjK/9wbxilflrMMzRc575zpvfc982YHwyHec/D7/k+c86c97znTWmsscZqXFiG/fgVM3gVk21zjSQswbuu1NeYapsvW3gxwH/ENO7Gsbi2t22+LGErLuEvbO67fl8U8m2bfFnC6hgF2DWvb0Vcv9AWX5bQwdsBexTXzOufjr6v2mLMEp4J0NO4aUD/vuh/uQ2+LGEj/sBlPDygfwK/RSGb2mAcKizHyYDcv0DMk9H/UdN82cLBgDyO6xaI6S29jzfNlyU8FoBzuGuBmAf67ilLm2YcKqzH+YDcURF3OGJeaJIvS1iKTwLwzYq423ARF7CmScYsYU8U8YOKjSAORNxrTfJlKeZ8bwuypSJuVUy9y9jQJONQYQ1+il/5+SGxvRvkIM3hTMVnBh9jF1aULqKDdwLkiHlbkAHx2/FnRTG5OoEbShbyVBifxtoaPssxOeSzDtvwReQ8VKqIKZwL00eLmOblvSNyni9l+FwYvlfEMD/vZOSdy4mvnOuhh6Jtehm9JdpTRdzwc/wyV2zPF1O4vzci2FnC8GIYLinAN0rea/FKX/56m87eOliI79/kfzoQPq1r1HYhUzl/+pw/e9u6M9qztVzaHBHdk5nPAuFAXbM2Czke6b8z5Mj1vz61vo/25pTSwKfQbLU8Ih28FAjv1zVre9Va/X9ZtW6M9kxVUE4hsymlhJV1iUYVbk0pvRFfj9Q1+zKGdro22Wh5t+P3vlWrcq+XMyIfRvtIfbyRtDWlNJFS+jyltLnT6czUctN950H36XBVCcLMvPdE3pMlTY+G6WFDntcL5pyInOXeqeB23Reb8BauL2a+cM7ekew3pY3v7SvmF+zGJoWPbLAWO/1zJPtsSf9ekvW6x0FN6XWLOZXxoO678xOYLQw/iw/wxKIVMNZYY129+hvtFueCjOcEIQAAAABJRU5ErkJggg==\") !important;\n    background-repeat: no-repeat !important;\n    background-position: center !important;\n    background-size: 17.5px !important;\n}\n.${E.CSS_CLS_ICON_RELOAD_BG} {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAABrElEQVRIie2WyUoDQRCG/zl7jUYxBiKJ+CJehOCCC1EQj3oR8RV8ChGXi6jB9SL4KpqbElxQz4kmn4eUZAwTZjJpc7KgL1PL19XTVV3Sv/RIvKiGQFrSrKQJSeOSkqYqSypJupF07Xneg5OdAWngEKgSLlVgFxjpFjoHfPiCHgEFYBTos5W1b8e+zX0A+bjQIaBmgc7tqMN8MsCZ+dSBtThgD9gGVmL4bhr4C5juGN6NAFuW+RvQ32v4tcH3wwzngXmH4LRduErbrIF+4MWWs6PxXbbNdgZFXz0WHYILP5URpFwIaAZOjhzIWbz7VkUCeA4AvwLJNvGiAIsBMX/kNMzgqgtwAnhqk9BAq3HJlLm4wJZ4U5F+IXBhykUXYIsZfmlpdhuXtzq8TIEBmgWfcggPb0zAgWV94QocSSzrd4MHd5s/hM/QeNLqwEYM/1UaT2rk0crvvG5gaPTbTASfDHBlPjVgsGOwBcr7jr1KY7xZAsb4PfosAyfAp9m+AXOxoD54Ctgh2rBXAfaiVEQn421K0pSkSUlZScOmKku6k3Qr6dLzvMfO0/uXP5RvHD/lZJn8ZpoAAAAASUVORK5CYII=\") !important;\n    background-repeat: no-repeat !important;\n    background-position: center !important;\n    background-size: 17.5px !important;\n}\n.${E.CSS_CLS_ICON_CLOSE_BG} {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAAkUlEQVRIie2VwQ2AIBAE1R40WiKWKw/LGR+SaIzi7SE/90XC7Y7CAU3zSxUQgMHhG4DwVjSzKyqQFB6Td84V9sCSCldgMoRfPaNqeITI4QrEHW6BFIfnIJ+FnyDnDomXsdzOlj+Rvrwr4LYF3kNVl+huQz2H0RyemdMgllZ0Q5Q+lyGeQyRBqH1dp+J6D86vO23cMwceYU71pwAAAABJRU5ErkJggg==\") !important;\n    background-repeat: no-repeat !important;\n    background-position: center !important;\n    background-size: 17.5px !important;\n}\n\n.${E.CSS_CLS_HIDDEN} {\n    display: none !important;\n}\n\n.${E.CSS_CLS_INVISIBLE} {\n    visibility: hidden !important;\n}\n\n.${E.CSS_CLS_CHAPTER_LINK} {\n    position: absolute;\n    top: 50%;\n    width: 4.5px;\n    height: 4.5px;\n    border-radius: 0px;\n    background-color: var(--color-royal-blue);\n    -moz-transform: translate(0, -50%);\n    -ms-transform: translate(0, -50%);\n    -o-transform: translate(0, -50%);\n    -webkit-transform: translate(0, -50%);\n    transform: translate(0, -50%);\n    -webkit-transition: width .25s ease-in, height .25s ease-in, border-radius 0.25s ease-in;\n    -moz-transition: width .25s ease-in, height .25s ease-in, border-radius 0.25s ease-in;\n    -o-transition: width .25s ease-in, height .25s ease-in, border-radius 0.25s ease-in;\n    -ms-transition: width .25s ease-in, height .25s ease-in, border-radius 0.25s ease-in;\n    transition: width .25s ease-in, height .25s ease-in, border-radius 0.25s ease-in;\n}\n.${E.CSS_CLS_VISUAL_SHOWING} #${E.CSS_CONTROL_TIME_PER_DURATION} {\n    text-decoration-line: line-through;\n    text-decoration-color: var(--color-royal-blue);\n}\n.${E.CSS_CLS_VISUAL_SHOWING} #${E.CSS_CONTROL_TIME_PER_DURATION}::before {\n    content: \" \";\n    color: var(--color-royal-blue);\n}\n.${E.CSS_CLS_VISUAL_SHOWING} #${E.CSS_CONTROL_TIME_PER_DURATION}::after {\n    content: \" \";\n    color: var(--color-royal-blue);\n}\n\n.${E.CSS_CLS_CONTROL_SHOW} #${E.CSS_CONTROL_CONTAINER} {\n    -moz-transform: translate(0, 0);\n    -ms-transform: translate(0, 0);\n    -o-transform: translate(0, 0);\n    -webkit-transform: translate(0, 0);\n    transform: translate(0, 0);\n    -webkit-transition: transform .25s ease-in;\n    -moz-transition: transform .25s ease-in;\n    -o-transition: transform .25s ease-in;\n    -ms-transition: transform .25s ease-in;\n    transition: transform .25s ease-in;\n}\n.${E.CSS_CLS_CONTROL_SHOW} #${E.CSS_VISUAL_CONTAINER} {\n    height: calc(100% - var(--dimension-control-container-height));\n    -webkit-transition: height .25s ease-in;\n    -moz-transition: height .25s ease-in;\n    -o-transition: height .25s ease-in;\n    -ms-transition: height .25s ease-in;\n    transition: height .25s ease-in;\n}\n@media (any-hover: hover) {\n    #${E.CSS_ENGINE_CONTAINER}:hover #${E.CSS_CONTROL_CONTAINER} {\n        -moz-transform: translate(0, 0);\n        -ms-transform: translate(0, 0);\n        -o-transform: translate(0, 0);\n        -webkit-transform: translate(0, 0);\n        transform: translate(0, 0);\n        -webkit-transition: transform .25s ease-in;\n        -moz-transition: transform .25s ease-in;\n        -o-transition: transform .25s ease-in;\n        -ms-transition: transform .25s ease-in;\n        transition: transform .25s ease-in;\n    }\n    #${E.CSS_ENGINE_CONTAINER}:hover #${E.CSS_VISUAL_CONTAINER} {\n        height: calc(100% - var(--dimension-control-container-height));\n        -webkit-transition: height .25s ease-in;\n        -moz-transition: height .25s ease-in;\n        -o-transition: height .25s ease-in;\n        -ms-transition: height .25s ease-in;\n        transition: height .25s ease-in;\n    }\n}\n@media (any-hover: none) {\n    #${E.CSS_CONTROL_VOLUME_GROUP} {\n        display: none;\n    }\n}\n\n@keyframes ive-busy-spinner {\n    to {-webkit-transform: rotate(360deg);}\n}\n`;\n\n// use for absolute centering\n// position: absolute;\n// top: 50%;\n// left: 50%;\n// text-align: center;\n// transform: translate(-50%, -50%);\n// z-index: x;\n","import { Video } from \"./Video\";\nimport { rootStyles } from \"../util/misc\";\nimport { E } from \"../util/constant\";\n\ninterface IEngineProps {\n  styleElement: HTMLStyleElement;\n  externalStyleElement: HTMLStyleElement;\n  externalScriptElement: HTMLScriptElement;\n}\n\nexport class Engine extends Video {\n  private styleElement: IEngineProps[\"styleElement\"];\n  private externalStyleElement: IEngineProps[\"externalStyleElement\"];\n  private externalScriptElement: IEngineProps[\"externalScriptElement\"];\n\n  constructor({}: Partial<IEngineProps> = {}) {\n    super();\n  }\n\n  connectedCallback() {\n    this.onEngineReady(() => {\n      this.styleElement = this._addStyleElement();\n      this.externalStyleElement = this._addExternalStyleElement();\n      this.externalScriptElement = this._addExternalScriptElement();\n      this.root.append(\n        this.styleElement,\n        this.externalStyleElement,\n        this.externalScriptElement\n      );\n      const container = this._addEngineChildren();\n      this.root.append(container);\n    });\n  }\n\n  attributeChangedCallback(name: string, _oldValue, _newValue) {\n    let oldNode, newNode;\n    if (name === \"data\") {\n      this.onDataChange(() => {\n        this._resetEngineChildren();\n      });\n      return;\n    }\n    if (name === \"run\") {\n      this.runner = this.runners[this.run];\n      return;\n    }\n    if (name === \"conf\") {\n      this.config = this.configs[this.conf];\n      this._addVideoSrc();\n      this._addAudioSrc();\n      return;\n    }\n    if (this.isConnected && this.configs && this.root.childNodes.length) {\n      switch (name) {\n        case \"css\":\n          oldNode = this.externalStyleElement;\n          newNode = this._addExternalStyleElement();\n          this.root.replaceChild(newNode, oldNode);\n          this.externalStyleElement = newNode;\n          break;\n        case \"script\":\n          oldNode = this.externalScriptElement;\n          newNode = this._addExternalScriptElement();\n          this.root.replaceChild(newNode, oldNode);\n          this.externalScriptElement = newNode;\n          break;\n        default:\n          break;\n      }\n      return;\n    }\n  }\n\n  disconnectedCallback() {\n    this.onEngineDestroyed(() => {\n      console.info(\"Engine element removed from page.\");\n    });\n  }\n\n  adoptedCallback() {\n    console.info(\"Engine element moved to new document.\");\n  }\n\n  private _addStyleElement() {\n    const style = document.createElement(\"style\");\n    style.textContent = rootStyles;\n    return style;\n  }\n\n  private _addExternalStyleElement() {\n    const style = document.createElement(\"style\");\n    if (this.css) {\n      style.textContent = `@import url('${this.css}');`;\n    }\n    return style;\n  }\n\n  private _addExternalScriptElement() {\n    const script = document.createElement(\"script\");\n    if (this.script) {\n      script.src = this.script;\n      script.async = true;\n    }\n    return script;\n  }\n\n  private _addEngineChildren() {\n    const container = document.createElement(\"figure\");\n    container.id = E.CSS_ENGINE_CONTAINER;\n    container.append(\n      this._addVideoElement(),\n      this._addAudioElement(),\n      this._addVisualElement(),\n      this._addControlElement(),\n      this._addLoaderElement()\n    );\n    return container;\n  }\n\n  protected _resetEngineChildren() {\n    const container = this.root.getElementById(E.CSS_ENGINE_CONTAINER);\n    const children = [\n      this._addVideoElement(),\n      this._addAudioElement(),\n      this._addVisualElement(),\n      this._addControlElement(),\n      this._addLoaderElement(),\n    ];\n    try {\n      container.replaceChildren(...children);\n    } catch (error) {\n      container.innerHTML = \"\";\n      container.append(...children);\n      console.warn(\n        `Compatibility:\\nreplaceChildren not supported by browser\\n\\n${error}`\n      );\n    }\n  }\n}\n","import { E } from \"./util/constant\";\nimport { Engine } from \"./view/Engine\";\n\nfunction on(id: string) {\n  return new Promise<Engine>((resolve, reject) => {\n    customElements.define(\"interactive-video-engine\", Engine);\n    const iveElement = document.getElementById(id) as Engine;\n    if (iveElement) {\n      iveElement.addEventListener(E.EVENT_ENGINE_READY, () => {\n        resolve(iveElement);\n      });\n    } else {\n      reject(\"Missing:\\nNo element found in DOM with this ID\");\n    }\n  });\n}\n\nexport { on };\n"],"names":["E","_C","DEFAULT_HOST_TYPE","HOST_BASE_URL","HOST_ENDPOINT_GET_ALL","HOST_ENDPOINT_GET","HOST_ENDPOINT_PUT","HOST_ENDPOINT_POST","HOST_ENDPOINT_DELETE","DB","CONFIGS","RUNNERS","SESSIONS","POWERED_BY_IVE_MSG","IVE_FONT_LOGO_STYLE","WELCOME_CTA_MSG","NETWORK_ERROR_CTA_MSG","A","Object","freeze","DELAY_BY","PLAY_FILM","PAUSE_FILM","SEEK_FILM","PLAY_AUDIO","PAUSE_AUDIO","SEEK_AUDIO","SHOW_VISUAL","HIDE_VISUAL","LOAD_VISUAL","PUSH_ASIDE","T","RIOT_INTERACTION","TOUCH_END","MOUSE_OVER","CLICK","C","create","update","key","value","Reflect","factory","root","global","self","this","Function","exporter","makeExporter","target","previous","defineProperty","configurable","writable","hasOwn","prototype","hasOwnProperty","supportsSymbol","Symbol","toPrimitiveSymbol","toPrimitive","iteratorSymbol","iterator","supportsCreate","supportsProto","__proto__","Array","downLevel","HashMap","MakeDictionary","has","map","call","get","undefined","functionPrototype","getPrototypeOf","usePolyfill","process","env","_Map","Map","entries","cacheSentinel","arraySentinel","MapIterator","keys","values","selector","_index","_keys","_values","_selector","next","index","length","result","done","throw","error","return","_cacheKey","_cacheIndex","enumerable","_find","set","delete","size","i","clear","getKey","getValue","getEntry","insert","indexOf","push","_","CreateMapPolyfill","_Set","Set","_map","add","Metadata","WeakMap","rootKey","CreateUniqueKey","_key","table","GetOrCreateWeakMapTable","CreateUUID","FillRandomBytes","buffer","Math","random","data","Uint8Array","crypto","getRandomValues","msCrypto","offset","byte","toString","toLowerCase","CreateWeakMapPolyfill","GetOrCreateMetadataMap","O","P","Create","targetMetadata","IsUndefined","metadataMap","OrdinaryHasMetadata","MetadataKey","OrdinaryHasOwnMetadata","parent","OrdinaryGetPrototypeOf","IsNull","OrdinaryGetMetadata","OrdinaryGetOwnMetadata","OrdinaryDefineOwnMetadata","MetadataValue","OrdinaryMetadataKeys","ownKeys","OrdinaryOwnMetadataKeys","parentKeys","_i","ownKeys_1","_a","parentKeys_1","obj","method","GetMethod","IsCallable","TypeError","IsObject","GetIterator","k","IteratorStep","nextValue","e","IteratorClose","Type","x","ToPropertyKey","argument","input","PreferredType","exoticToPrim","hint","valueOf","toString_1","OrdinaryToPrimitive","ToPrimitive","ToString","IsArray","isArray","IsConstructor","V","func","f","proto","prototypeProto","constructor","__","decorators","propertyKey","attributes","decorated","decorator","DecorateConstructor","descriptor","DecorateProperty","metadataKey","metadataValue","IsPropertyKey","__decorate","desc","d","c","arguments","r","getOwnPropertyDescriptor","decorate","__metadata","v","metadata","exports","AccessType","METADATA_JSON_PROPERTIES_NAME","METADATA_JSON_IGNORE_NAME","getJsonPropertyDecoratorMetadata","getMetadata","JSON_PROPERTY_DECORATOR_NAME","getKeyName","name","isSimpleType","typeName","Constants","STRING_TYPE","NUMBER_TYPE","BOOLEAN_TYPE","DATE_TYPE","STRING_TYPE_LOWERCASE","NUMBER_TYPE_LOWERCASE","BOOLEAN_TYPE_LOWERCASE","DATE_TYPE_LOWERCASE","getTypeNameFromInstance","instance","instr","i1","i2","substring","trim","extractClassname","getType","OBJECT_TYPE","OBJECT_TYPE_LOWERCASE","ARRAY_TYPE","ARRAY_TYPE_LOWERCASE","FROM_ARRAY","getCachedType","type","cache","getJsonObjectMapperCacheKey","CacheKey","functionImpl","JsonConverstionError","message","json","stack","Error","DeserializeSimpleType","instanceKey","jsonKey","DeserializeDateType","Date","DeserializeArrayType","jsonObject","jsonArraySize","conversionFunctionsList","arrayInstance","conversionFunctions","typeInstance","functionName","DeserializeComplexType","objectInstance","objectKeys","concat","filter","item","hasMetadata","forEach","required","access","BOTH","WRITE_ONLY","jsonKeyName","deserializer","getOrCreateDeserializer","deserialize","isArrayType","struct","getTypeName","deserializers","SerializeArrayType","parentStructure","instanceStructure","instanceIndex","furtherSerializationStructures","visited","serializeFunctions","serializers","id","uniqueId","parentIndex","createArrayOfSerializationStructures","serializationStructuresObject","serializationStructures","mergeObjectOrArrayValuesAndCopyToParents","mergeObjectOrArrayValues","pop","mergedValue","join","instanceValuesStack","serializeArray","SerializeObjectType","keyInstance","READ_ONLY","serializer","getOrCreateSerializer","SerializeSimpleType","serialize","DateSerializer","getTime","StringSerializer","JSON","stringify","NumberSerializer","BooleanSerializer","now","ObjectMapper","deserializeArray","instances","runDeserialization","dtoInstance","conversionFunctionStructures","converstionFunctionsArray","conversionFunctionStructure","structure","instanceStruct","parentStruct","moreStructures","JsonProperty","getPropertyDecorator","getJsonPropertyDecorator","JsonIgnore","defineMetadata","dashToCamelCase","string","replace","toUpperCase","moveChildren","source","firstChild","appendChild","cleanNode","node","clearChildren","childNodes","children","from","removeChild","parentNode","insertBefore","newNode","refNode","COMPONENTS_IMPLEMENTATION_MAP$1","DOM_COMPONENT_INSTANCE_PROPERTY$1","PLUGINS_SET$1","MOUNT_METHOD_KEY","UPDATE_METHOD_KEY","UNMOUNT_METHOD_KEY","IS_PURE_SYMBOL","IS_COMPONENT_UPDATING","PARENT_KEY_SYMBOL","ATTRIBUTES_KEY_SYMBOL","TEMPLATE_KEY_SYMBOL","bindingTypes","EACH","IF","SIMPLE","TAG","SLOT","expressionTypes","ATTRIBUTE","EVENT","TEXT","VALUE","HEAD_SYMBOL","TAIL_SYMBOL","options","assign","defineProperties","properties","_ref","defineDefaults","defaults","_ref2","checkType","element","isSvg","el","owner","ownerSVGElement","isTemplate","tagName","isFunction","isObject","isNil","UNMOUNT_SCOPE","EachBinding","nodes","mount","scope","parentScope","placeholder","childrenMap","collection","evaluate","items","newChildrenMap","batches","futureNodes","binding","condition","template","itemName","indexName","isTemplateTag","context","extendScope","oldItem","mustFilterItem","mustMount","componentTemplate","clone","cloneNode","meta","fragment","dom","head","tail","document","createTextNode","createHeadTailPlaceholders","avoidDOMInjection","createTemplateMeta","createPatch","a","b","before","bLength","aEnd","bEnd","aStart","bStart","nextSibling","sequence","replaced","replaceChild","udomdiff","redundant","info","unmount","patch","fn","IfBinding","pristine","panic","memoize","cached","val","evaluateAttributeExpressions","reduce","acc","attribute","ElementProto","Element","isNativeHtmlProperty","RE_EVENTS_PREFIX","EventListener","handleEvent","event","ListenersWeakMap","normalizeStringValue","getTextNode","childNodeIndex","nodeType","Node","COMMENT_NODE","textNode","expressions","attributeExpression","oldValue","newAttributes","oldAttributes","newKeys","includes","removeAttribute","removeAllAttributes","setAllAttributes","isBoolean","shouldRemoveAttribute","canRenderAttribute","setAttribute","normalizeValue","normalizedEventName","eventListener","listener","createListener","callback","getCallbackAndOptions","handler","mustAddEvent","removeEventListener","addEventListener","expression","Expression","apply","create$4","getRealParent","SlotBinding","getTemplateScope","attr","extendParentScope","templateData","slots","find","realParent","html","bindings","createDOM","moveSlotInnerContent","mustRemoveRoot","slot","child","slotBindings","TagBinding","tag","component","slotsToMarkup","getTag","getComponent","keepRootTag","fixTextExpressionsOffset","textExpressionsOffset","injectDOM","TemplateChunk","container","ownerDocument","importNode","window","DOMParser","parseFromString","documentElement","createSVGTree","createElement","innerHTML","content","createHTMLTree","createDOMTree","createTemplateDOM","createDocumentFragment","templateTagOffset","siblings","max","getTemplateTagOffset","bindingsData","redundantAttribute","querySelector","bindingExpressions","create$1","noop","callOrAssign","domToArray","els","test","$","ctx","vendor","getHostNode","querySelectorAll","normalize","attrs","props","prop","CSS_BY_NAME","style","cssManager","css","inject","_styles","after","getStyleNode","remove","curry","_len","_len2","args","_key2","COMPONENT_CORE_HELPERS","$$","PURE_COMPONENT_API","COMPONENT_LIFECYCLE_METHODS","shouldUpdate","onBeforeMount","onMounted","onBeforeUpdate","onUpdated","onBeforeUnmount","onUnmounted","MOCKED_TEMPLATE_INTERFACE","memoizedCreateComponent","createComponent","bindDOMNodeToComponentObject","createCoreAPIMethods","mapFunction","componentWrapper","templateFn","components","_ref4","createSubcomponents","componentTemplateFactory","pureFactoryFunction","createPureComponent","componentAPI","_ref3","enhanceComponentAPI","state","defineComponent","preserveRoot","computeState","oldState","newState","_ref5","runPlugins","createAttributeBindings","initialProps","DOMattributesToObject","evaluateInitialProps","names","n","parseNodes","getName","addCssHook","newProps","bind","implementation","_temp","fns","g","compose","SHADOW_ROOT","shadowRoot","Base","HTMLElement","super","_root","_detail","_config","_configs","_runner","_runners","hasAttribute","attachShadow","mode","console","log","observedAttributes","run","parseInt","getAttribute","conf","script","detail","runner","inst","unbind","runners","configs","config","_extendElementPrototype","classList","CSS_CLS_HIDDEN","focus","toggle","_shrinkElementPrototype","_A$PLAY_FILM","_A$PAUSE_FILM","_A$SEEK_FILM","_A$PLAY_AUDIO","_A$PAUSE_AUDIO","_A$SEEK_AUDIO","_A$SHOW_VISUAL","_A$HIDE_VISUAL","_A$LOAD_VISUAL","Handle","_isBuffering","_isFilmLoadError","_isAudioLoadError","_filmBuffered","_audioBuffered","_filmLoadProgress","_audioLoadProgress","_isExperiencePaused_","_isRunnerFilmPaused_","_isRunnerAudioPlaying_","_isRunnerVisualShowing_","_visualElements_","getElementById","CSS_VIDEO_ELEMENT","play","then","catch","_isFilmLoadError_","warn","pause","currentTime","CSS_AUDIO_ELEMENT","_isAudioLoadError_","audio","CSS_VISUAL_CONTAINER","showMe","hideMe","visuals","load","_isBuffering_","dispatchEvent","CustomEvent","EVENT_ENGINE_EXPERIENCE_LOADING","_filmBuffered_","_audioBuffered_","_filmLoadProgress_","_audioLoadProgress_","_currentTime_","_duration_","duration","_playbackRate_","playbackRate","_timePerDuration_","video","toISOString","_initExperience_","welcomeGroup","CSS_LOADER_WELCOME_GROUP","control","CSS_CONTROL_CONTAINER","muted","_changeVolume_","_changePlaybackRate_","_changeCaption_","CC_OFF","_changeExperience_","_changeCurrentTime_","_value","parseFloat","currentTarget","seek","volumeInput","CSS_CONTROL_VOLUME_RANGE_INPUT","btn","CSS_CONTROL_VOLUME_BTN","cls","CSS_CLS_ICON_VOLUME_BG","CSS_CLS_ICON_VOLUME_LOW_BG","CSS_CLS_ICON_MUTE_BG","volume","videoCCContainer","CSS_LOADER_VIDEO_CAPTION_CONTAINER","audioCCContainer","CSS_LOADER_AUDIO_CAPTION_CONTAINER","associateBtn","CSS_CONTROL_CAPTION_BTN","innerText","dataset","selectedValue","textTracks","videoTrack","videoCues","cues","label","j","onenter","inner","text","onexit","l","audioTrack","audioCues","m","CSS_CONTROL_PLAYBACK_RATE_BTN","_valueToFix2","toFixed","_toggleControlVisibilityOnTouchDevice_","rootContainer","CSS_ENGINE_CONTAINER","CSS_CLS_CONTROL_SHOW","_toggleFullscreen_","host","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","_toggleMute_","_toggleExperiencePlay_","visual","resumeBtn","CSS_LOADER_RESUME_PLAY_BTN","resume","showFocusMe","Host","uid","mem","ORM","slice","dtoList","dto","parseQuery","arg","URLSearchParams","fetch","HOST_TYPE_EXTERNAL","_external","HOST_TYPE_INTERNAL","_internal","Promise","reject","body","endpoint","resolve","headers","response","pointer","pathname","searchParams","URL","dbTable","entry","parse","res","Manage","post","put","_extends","deepClone","_sleep_","_wait","_timerRef","_resolve","_reject","_prom","prom","setTimeout","abort","clearTimeout","sleep","wait","CLS","ORM_CONFIGS","Config","film","_handleSourceLoad","modify","register","getAllMem","getMem","setMem","EVENT_ENGINE_ATTACH_VIDEO_SRC","EVENT_ENGINE_ATTACH_AUDIO_SRC","member","mimeTypeXCodecs","mimeType","_codecs","split","revokeObjectURL","src","MediaSource","isTypeSupported","createObjectURL","onsourceopen","addSourceBuffer","_fetch","arraybuffer","onupdateend","endOfStream","Blob","appendBuffer","finally","isTooLarge","req","XMLHttpRequest","responseType","open","onprogress","lengthComputable","total","loaded","onload","onerror","send","ORM_RUNNERS","Runner","aside","_handleExec","timeout","debounce","cloneStack","cloneTop","RUNNER_STATE_IDLE","EVENT_ENGINE_TIMEUPDATE","EVENT_ENGINE_VISUAL_INTERACTION","pauseStart","_setTop","remainingDelay","topActions","actions","lastExecTopAction","RUNNER_STATE_BUSY","_exec","eventType","asideIndex","RUNNER_TYPE_IMMEDIATE","RUNNER_TYPE_TIMER","floor","RUNNER_TYPE_INTERACTION","topCondition","async","namespace","delayActionRef","delayStart","idx","ORM_SESSIONS","Session","Collection","list","Core","onEngineReady","_loadDataSrc","EVENT_ENGINE_READY","onDataChange","isConnected","onEngineDestroyed","Loader","_addLoaderElement","loader","_createLoader","append","_createWelcomeGroup","_createNetworkErrorGroup","_createVideoLoadProgressGroup","_createEngineBusySpinner","_createVideoCaptionContainer","_createAudioCaptionContainer","_createResumePlayBtn","_addLoaderListener","CSS_LOADER_CONTAINER","wrapper","CSS_CLS_ICON_OK_BG","ariaLabel","disabled","onclick","CSS_LOADER_NETWORK_ERROR_GROUP","CSS_CLS_ICON_RELOAD_BG","location","reload","count","progressBar","CSS_LOADER_VIDEO_LOAD_PROGRESS_GROUP","CSS_LOADER_ENGINE_BUSY_GROUP","CSS_CLS_ICON_RESUME_PLAY_BG","welcomeCTAgroup","networkErrorGroup","progressGroup","busySpinner","okayBtn","progress","percentage","round","nodeValue","Control","_addControlElement","_createControl","_createControlProgressTimeGroup","_createControlCTAGroup","_addControlListener","played","buffered","range","CSS_CONTROL_PROGRESS_TIME_GROUP","CSS_CONTROL_TIME_PER_DURATION","CSS_CONTROL_PROGRESS_BAR","tabIndex","min","step","oninput","_createControlPreviousBtnWrapper","CSS_CONTROL_PREVIOUS_BTN","CSS_CLS_ICON_PREV_BG","_createControlPlayPauseBtnWrapper","CSS_CONTROL_PLAY_PAUSE_BTN","CSS_CLS_ICON_PLAY_BG","_createControlNextBtnWrapper","CSS_CONTROL_NEXT_BTN","CSS_CLS_ICON_NEXT_BG","_createControlRewind15secBtnWrapper","CSS_CONTROL_REWIND_15SEC_BTN","CSS_CLS_ICON_REWIND_15SEC_BG","_createControlForward15secBtnWrapper","CSS_CONTROL_FORWARD_15SEC_BTN","CSS_CLS_ICON_FORWARD_15SEC_BG","_createControlVolumeGroup","CSS_CONTROL_VOLUME_GROUP","_createControlCaptionGroup","CSS_CLS_ICON_CAPTION_BG","CSS_CONTROL_POPUP_CONTAINER","_togglePopupMenu","ul","CSS_CONTROL_CAPTION_LIST_GROUP","tracks","t","li","isSelected","href","selected","associateBtnId","_createControlPlaybackRateGroup","CSS_CONTROL_PLAYBACK_RATE_LIST_GROUP","rate","_createControlFullscreenBtnWrapper","CSS_CONTROL_FULLSCREEN_BTN","CSS_CLS_ICON_FULLSCREEN_BG","space","CSS_CONTROL_CTA_GROUP","flex","visibility","_createControlPopupList","header","closeBtn","CSS_CONTROL_CLOSE_POPUP_BTN","CSS_CLS_ICON_CLOSE_BG","popup","scrollIntoView","prevAssociateBtn","_updateControlBtnState","currentIdx","playPauseBtn","rewind15SecBtn","forward15SecBtn","prevBtn","nextBtn","CSS_CLS_ICON_PAUSE_BG","_updateControlChapterJump","CSS_CLS_CHAPTER_LINK","nodeList","chapter","chapters","left","timePerDuration","width","playedAmount","EVENT_ENGINE_VISUAL_PRESENTED_TIMEUPDATE","CSS_CLS_VISUAL_SHOWING","Visual","_addVisualElement","_createVisual","_addVisualListener","ontouchend","_createLazyVisualContent","replaceChildren","_renderElements","elements","_renderRiots","riots","elem","ontouchstart","stopImmediatePropagation","_ive_script_","timerRef","isShowing","totalTime","MutationObserver","mutationsList","mutation","contains","setInterval","clearInterval","observe","Audio","_addAudioElement","_createAudio","_createAudioTrack","_createNoAudioSupport","_addAudioEventListener","_addAudioSrc","autoplay","controls","loop","preload","trackElement","kind","default","srclang","_event","start","end","oncanplaythrough","onwaiting","Video","_addVideoElement","_createVideo","_createVideoTrack","_createNoVideoSupport","_addVideoEventListener","_addVideoSrc","poster","disablePictureInPicture","disableRemotePlayback","playsInline","onplaying","ontimeupdate","rootStyles","CSS_CLS_INVISIBLE","Engine","styleElement","externalStyleElement","externalScriptElement","connectedCallback","_addStyleElement","_addExternalStyleElement","_addExternalScriptElement","_addEngineChildren","attributeChangedCallback","_oldValue","_newValue","oldNode","_resetEngineChildren","disconnectedCallback","adoptedCallback","textContent","on","customElements","define","iveElement"],"mappings":"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"}